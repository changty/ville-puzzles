{"version":3,"sources":["lib/util.js","puzzles/BasePuzzle.js","puzzles/Puzzle1.js","puzzles/Puzzle2.js","puzzles/Puzzle3.js","puzzles/index.js","initPuzzle1.js","initPuzzle2.js","initPuzzle3.js","index.js"],"names":["randomChoice","capitalize","setVendorStyle","indexToRowCol","rowColToIndex","arr","Math","floor","random","length","str","charAt","toUpperCase","substr","element","property","value","prop","style","numOfCols","idx","col","row","defaultOptions","BasePuzzle","options","Object","assign","state","answer","answerSent","elementSelectors","parent","callback","window","alert","completeAnswer","JSON","stringify","setting","console","log","setState","parentEl","document","querySelector","renderHTML","el","inner","HTMLElement","Text","appendChild","Array","forEach","renderInner","i","innerText","type","id","newEl","createElement","oldEl","parentNode","removeChild","innerHTML","renderElement","newState","oldState","updateView","Puzzle1","cipherer","Cipherer","characterSet","key","answerCheck","currentCharIdx","ringRotation","selectedCharIdx","submitted","setup","onkeydown","onKeyPress","bind","canSubmit","cipherText","checkMessage","canSend","sendAnswer","canErase","slice","canSelect","e","onPrev","onNext","onSelect","onErase","preventDefault","updateAnswer","updateButtons","updateQuestion","updateRing","rotation","getRingRotation","setTimeout","querySelectorAll","c","classList","add","remove","renderQuestion","renderAnswer","eraseButton","disabled","selectButton","submitButton","sendAnswerButton","renderDescription","renderCipherRing","onclick","onSubmit","onSendAnswer","keyExample","createTextNode","labelText","label","chars","split","map","questionEl","answerText","radius","ring","ringWrapper","prevButton","nextButton","controls","index","keys","exec","factor","parseInt","indexOf","m","cipherChar","join","charToCheck","message","checkCharacter","Puzzle2","cols","onSpotClick","onAnswerChange","grid","rows","fill","_","rowCol","Spot","objects","s","objectType","event","spot","input","newAnswer","canEditAnswer","target","name","rowInput","colInput","renderExamples","renderGrid","question","renderInputForm","ul","examples","text","gridElements","onClick","step","min","onchange","onkeyup","max","row_0","col_0","className","gridColumn","gridRow","renderIndexingNumber","number","Puzzle3","slots","Slot","onChange","draggables","Draggable","d","onresize","updateSlotPositions","backgroundImage","check","slot","draggable","imageEl","widthRatio","offsetWidth","naturalWidth","heightRatio","offsetHeight","naturalHeight","setPosition","wrapper","renderBackground","draggabblesContainer","renderDraggables","ondragover","ondrop","dataTransfer","getData","getElementById","setSlot","src","backgroundUrl","onload","render","correctDraggable","top","left","position","size","onDraggableChange","width","height","onDragover","onDrop","ondragenter","onDragEnter","ondragleave","onDragLeave","newDraggable","ratios","swap","content","ondragstart","onDragStart","ondragend","onDragEnd","renderContent","renderTextContent","renderImageContent","renderAudioContent","renderVideoContent","draggingAnchor","audio","preload","oncanplay","video","minWidth","padding","newSlot","setDraggable","setData","other","otherParent","otherSlot","thisParent","thisSlot","init","possibleSettings","puzzleSetting","possibleMessages","cipherMessage","puzzleOptions","puzzleInputs","puzzleQuestions","activatePuzzle","activePuzzle","cleanUp"],"mappings":";;;;;;;;QAAgBA,eAAAA;QAIAC,aAAAA;QAIAC,iBAAAA;QAQAC,gBAAAA;QAOAC,gBAAAA;AAvBT,SAASJ,YAAT,CAAsBK,GAAtB,EAA2B;AAChC,SAAOA,IAAIC,KAAKC,KAAL,CAAWD,KAAKE,MAAL,KAAgBH,IAAII,MAA/B,CAAJ,CAAP;AACD,ACFD,IAAMc,iBAAiB;AACrB,sBAAoB,cADC;ADIhB,ACFL,SDEctB,UAAT,CAAoBS,ECFL,CDEf,EAAyB,OCJT;ADKrB,ACFA,ACHF,SFKSA,IAAIC,MAAJ,CAAW,CAAX,ACFY,EDEEC,MCLA,KDKd,KAA8BF,IAAIG,MAAJ,CAAW,CAAX,CAArC;AACD,ACFC,qBAAmB,oBAJE;AAKrB,ACJF,ACDA,gBFKgB,SALO;AKAvB,ANQO,ACFL,SDEcX,MCFD,QDER,CAAwBY,OAAxB,EAAiCC,QAAjC,EAA2CC,KAA3C,EAAkD;AACvD,ACTqB,ACGvB,ACFA,ACDA,CHAA,KDSQC,OAAOhB,WAAWc,QAAX,CAAb;AMRF,ACDA,APUED,UAAQI,KAAR,CAAc,WAAWD,IAAzB,IAAiCD,KAAjC;AACAF,AGRF,ACDA,IHOaU,MDEHN,KAAR,CAAc,OKXPM,CLWeP,CCFXO,GDEX,IAA8BR,KAA9B;ASXF,AHGA,ACFA,APWEF,ACFA,SKPO8P,CNSC1P,GMTV,ENSE,CMTc,ANSA,OAAOD,IAArB,IAA6BD,KAA7B;AMRA,ANSAF,AIVF,MECQ0D,INSEtD,KAAR,CAAc,KMTO,CNSDD,IAApB,IAA4BD,KAA5B,iBMTA;AGFF,AFCA,ACHA,ARcC,SOXQ4P,IAAT,GAAgB;ADGd,ACFA,MDEMC,ACFAA,mBDEmB,ACFA,CDGvB,ACFA;ADGEpM,ACFAgF,ACLN,AReO,ACFL,SKNS,ANQKtJ,COVJ,EADR,CDEA,SNSG,CAAuBgB,CCFF,QDErB,EAAkCC,GAAlC,EAAuC;AMPxCqG,ACFA4B,APUJ,ACH0B,ACT5B,IAAM9H,IDSQE,CDGL,COVG,EAFR,GNSwB,CKLV,KJJK,iEDSC,EAAI;AQX5B,AHII,ACCEqI,ACLN,AReIzI,AEZF,GIAyB,EAKvB,INOKf,IOVM,CACP,APSMC,AEZA,CKGL,CAAD,EAAI,CAAJ,APSC,CAAWa,COTL,KPSWD,COTlB,CADO,CLHQ,CKKf,CAAC,CAAD,EAAI,CAAJ,APQC,CADA,COPM,UAAP,CAFO,EAGP,CAAC,CAAD,EAAI,CAAJ,EAAO,MAAP,CAHO,EAIP,CAAC,CAAD,EAAI,CAAJ,EAAO,WAAP,CAJO,CAHX;ADOEsD,ACEAsG,APKFzJ,ACLwB,ACP1B,ACFF,IAAMC,KGOK,ANOFjB,IMRL,CCGY,APKFC,COLG,IPKR,CAAWa,CEXhB,ACHmB,KHcGD,GOLV,EAAiB,IPKxB,UOLO,4CLTO;AIQjBsG,ACRF,APYK,AERP,ACHA,GIFyB,APazB,EODE,SJVU,EGOI,GDZTpD,OHQiB,ECJH;AGMnB,ACMEoF,APIL,ACNG,ACLA,ACHF,ACFF,GEC2B,CFDrBlI,CEUF,ILAKE,CMEG,ALNN,EKKF,INDA,GAAeC,EEPf,ACHmB,KHUGC,MAAP,CAAcJ,cAAd,EAA8BE,OAA9B,CAAf,kCCNsB,yDCJH;AMDvB,AHYMgD,ACEA4E,ALNF,ACHF,ACHA,SEUS,CCEC,ALLN,EKGF,CDDA,CFTU,ODGO,yEDAK;AIQpB5B,ACEAqC,APIC,ACNH,ACHA,ACJA,ACLmB,CAAvB,QJkBgB1J,ACNPwB,CCFH,GKIS,CACP,ANHJ,CMGK,CDHS,ACGV,CNHS,CMGL,CAAJ,EAAO,AJVM,CHad,CAAuBT,IOHtB,CADO,EAEP,CAAC,CAAD,APED,EOFK,APE6BG,COFjC,EAAO,APER,EAAuCD,GAAvC,EAA4C,GOF3C,CAFO,EAGP,CAAC,CAAD,EAAI,CAAJ,EAAO,MAAP,CAHO,EAIP,CAAC,CAAD,EAAI,CAAJ,CJda,CIcN,WAAP,CAJO,CAHX,MLPsB;AIMtB,ACUE0J,ACpBN,ARmBE,ACNIlJ,ACFF,ACLA,GGLuB,EAavB,IEdK+O,ARmBAtP,CEPH,GMZN,CDoBgB,ANPF,CMOG,APDFH,CQnBC,APYC,CENA,OHaR,GAAkBE,EOCX,CPDd,COC+B,cAAjB,MJhBK;AGWfoD,ACJF,ACVF,ARmBD,ACNK3C,ACVoB,ACGtB,GIRuB,ALCJ,CKDrB,AHKWiK,EIHL8E,GFcG,IADP,KLAc,AEPA,ICHL9E,GIHc,CACvB;AFcEtE,AEbAsG,APSW,ACEf,ACVmB,KFQjB,WKIc,GDpBAxJ,IHkBK,aAdA,MMEnB;AFYA,ACUF,ACpBIyH,ANWJ,ACfqB,CAAvB,EGC2B,CAAzB,ECuBM8E,KCpBK,CACL,EAAEpN,IAAI,CAAN,EAASwK,CDmBO,ILTE,aMVS,CAA3B,EAA8BC,IDmBD0C,CCnBM,ENLpB,CMKf,EAAwCzC,MAAM,GAA9C,CDmBgB,CAAtB,ACpBW,EACgD;ACJ7D,ADKQ,APWJ,ACDF,AEXA,MICQ1K,GPWD3B,COXK,CAAN,EAASmM,KNUC,CEXJ3L,MHYV,CGZF,EHY0Bb,AGZLD,GICY,CAA3B,EAA8B0M,CPWHxM,AGZjC,EAA8B,EICW,EPWf,CACtB,COZE,EAAyCyM,MAAM,GAA/C,EAFK,EAEiD;AFc5D,ACMA,ACnBM,APYApM,ACnBe,AEKS,CFLhC,GCWaoH,EGSL0H,ACMAI,ACnBExN,IAAI,CAAN,EAASwK,CPYD,OMOO,CDNC,ACMA,AJfX9E,SKJsB,CAA3B,EAA8B+E,GDmBf,EAAkB,ACnBE,IAAnC,EAAyCC,CFaZyC,ICMd,CCnBgC,CDmBD,ECnB9C,EAHK,EAGiD,IFatC,CAAtB,CCMqB,CAArB;AEvBF,AHkBEC,AEbM,APUF,KADsB,COTlBpN,CPaJ,EQlBG0N,CDKK,CAAN,CPaG3P,CObMyM,GFaD1J,GLAV,CAAazC,GQlBnB,CAAwB6O,IAAxB,AHkBE,EGlB4B,CHkBCpM,AEbI,CAA3B,EAA8B2J,EPSV,CAAxB,EOTuC,IFazC,AEbM,EAAyCC,MAAM,GAA/C,CAAqD;ACJ3D,AFwBA,ACpBM,APeL,AGlB6B,IFcnB/J,CMfA,CCAPnC,AFwBEiP,AC1BJ,OCESE,SPeAhN,EKSa,CExBpB,AFyBF,IEzByBnC,OAAOmP,YAAP,CAAoBC,IFwBvB,EAEtB,CE1BF,EACEpP,OAAOmP,YAAP,CAAoBC,OAApB,6BLKM5P,OAAOC,MAAP,CAAcJ,cAAd,EAA8BE,OAA9B,CALsB,8CGuBN,CAAxB;AEtBAS,AHiBA,AEbIiK,ALEJ,ACNE,MEiBI4E,GGjBCM,ODIS,CACV,ELCM9O,EMNZ,GAAsBqO,CHiBG,CAAC,AHX1B,EAAmC,EMNnC,SHiByB,EAAgB,WAAhB,EAA6B,oBAA7B,CAAzB;AGhBD,AF0BCE,ACrBQpN,ALA2B,QAAdjC,EKAT,CADN,ILC6B,CIqBrBmJ,QAAd,GAAyB,wBAAauG,eAAb,CAAzB,mBJrB+B,EAAI;AGanC,ACSAL,ACrBQrN,ANOR,MIKMa,MEZQ,IDqBA6F,CDTG,EJLL5H,EKcZ,ECvBM,CDuBgB,ELdtB,EAAmC,WIKLuO,SCSKI,KDTS1M,OCStB,CAAtB,IDTiB,EAAyCsM,cAAcrM,GAAvD,CAAjB;AGhBF7B,AHiBEkO,AEZQ3B,ANM2B,ACRA,QDQd1N,COXdoB,MDKU,ANMkB,CIMrBuC,ID7BPgE,EIYT,CAAuB,GHiBrB,GAA2B9E,ELDhB,CAAE,KQhBf,CHiBsC0M,CGjBC1J,OAAvC,GAAiD,EHiBpB,CACzB,SGlBmD,eHkBtCyJ,UJPgB,EAAI,IIOjC,CADyB,CAA3B;AGhBAK,AF0BA,ACzBM,KADU,CD0BVH,CCpBA,eDoBgB,EAAtB;AEzBD,AHmBC,AEbQvN,ANG2B,ACRA,CMHrC,KHqBQuN,IEbM,CADN,WFcgB,EAAtB,0FHbQvP,OAAOC,MAAP,CAAcJ,cAAd,EAA8BE,OAA9B,CAL2B;AI0BnC,AJzBE,ACDA,SG0BK,CH1BAc,OAAL,GAAeA,OAAf,GG0BiBuO,CNXR7O,UAAU,EMWd,EAA2BgP,aAA3B,CAAP;AEzBFrO,AHmBE,ACOD,ACpBSa,APSNvB,ACRiC,SOP5BW,AHmBA,GEbO,CPSLV,KAAP,CAAa,GQfjB,CAAuB,ADGf,CPYcV,MKIDqP,CLJJ,CAAa,KQf9B,EAAuCxJ,IHmB9B,EAA2B2J,CGnBpC,GAAiD,ARehC,CAAb,QKIK,CAAP,EGnBqD,qDPY7CvP,OAAOC,MAAP,CAAcJ,cAAd,EAA8BE,OAA9B,CAL2B;AONnC2P,AHmBD,AEbSjC,ANCN,AEPA,UAAKvN,KIMU,AJNf,GAAaF,OAAOC,MAAP,CAAc,MAAKC,KAAnB,EAA0B;AKC1C,ADCO,APcJ,AGfE8C,CKFN,IDHkB,EAYV,WDmBOkM,CH1BI,EADwB;AISjClN,APQN,AEZA,ACHEoB,UIOQ,APQJ1C,AEZDG,CKGD,MLHJ,ACHa,CEmBFqO,EHhBIrO,OFYQF,AEZvB,KFY4BC,SAAL,CAAe;AQd1CM,AReML,AGlBqC,KAA1B,CAAb,GKGKM,QReM,KQff,AReoBN,CQfG,MRcmB,QQd1C,EAAuC+E,OAAvC,GAAiD,YAAM;AACrD8J,ADOQ3N,APQJhC,AEZF,UAAKG,EKIO,GLJZ,EFYW,CEZEF,EEvBRqK,EJmCWtK,COXZ,ELDgBE,IFUkB,EEVzB,CAAc,MAAKC,KAAnB,EAA0B;AMF1C,ADOSuN,APQJtN,AEZAA,ACHF,CKFJ,SLESmK,IDGK,CKIK,AJPf,CHeU,AEZE1K,ECHC,GHeEM,AEZE,GCHCW,CDGR,CFYA,CAAWV,AEZER,ICHV,CDGe,ACHF2K,IDGhB,CCHG,CAAmBjE,GAAnB,CACX;AIEE,APSkC,ACJtC,ACNuC,ACDrC,KIVY,ALWD,CAAb,CKOI,APGmB,CAAvB,COHMrE,CNDDnB,GMCK,AJRH,CIQH,EAASkB,CNDb,AEPWwI,GFOI1J,CEPR,CIQY,AJRHwH,CAAT,EAAY,EFOnB,AEPqBmC,OIQjB,EAA6BiD,CJRF,MAAK5F,EIQM,WAAtC,CJR2B,CIVjB,AJUqCrE,EIS/C,EAAExB,AJTyB,IISrB,CAAN,EAASD,AJTM,EAAZ,CAAL,GISiB,YAAf,EAA6B0L,SAAS,WAAtC,EAnBU,EAoBV,EAAEzL,IAAI,CAAN,EAASD,MAAM,YAAf,EAA6B0L,SAAS,0BAAtC,EApBU,EAqBV;AACEzL,ANJN,AERE,KADW,CAAb,IIaU,ANJLY,CMGD,ONHJ,GAAgB,IAAIC,QAAJ,CAAa,MAAKhC,OAAL,CAAaiC,YAA1B,EAAwC,MAAKjC,OAAL,CAAakC,GAArD,CAAhB;AMKMhB,APIN,AEZA,UAAKtD,EKQO,WAFR,ALNJ,GAAqB,oBAAc+E,IAAd,CAAmB,IAAnB,EAAyB3C,QAAQ8G,IAAjC,CAArB;AKSM8F,APIN3M,ACRA,ACJA,ACHA,UFOKZ,ACJAxB,ACHA+L,IHeG1J,COJO,ANJf,EDQA,CAAY,ACRCf,EEPb,GDGA,ACHkB,EFOEC,CCJC,GCHEY,EFOV,CAAc,IDQ3B,AGfkB,CAAa4J,CHeC/J,ACRAR,KAAnB,EAA0B,CCJJsD,CCHjB,CAAwB6C,EDGrB,CAAmB,ACHtB,CHelB,AGf8C,GDGzB,EAAyBxF,QAAQ8G,IAAjC,CAArB;AKKI,ANAF3E,AER4C,KIbhC,EA0BV,MJb+C,IAAI0H,EFQxC,EADwB,KEPY,CAAcC,CAAd,CAAL;AIcxC3I,APGN,ACREiB,ACJF,ACL8C,KAA5B,CAAlB,IIcU,ALTL2E,CKQD,APIC5G,QAAL,CAAc,CEZd,CFYgBZ,ACRE,CAFqB,CCFpB,MAAKwH,IFYI,IAAd,EAAd,CEZmB,CFYiBrH,AEZAiD,IAAjB,IFYnB,GEZA;AKUMzB,APGP,ACRGmB,ACJF,UAAK2E,EKSO,QNLI,CAHuB,EMMnC,CLPJ,GAAsB,MAAKA,cAAL,CAAoBrE,IAApB,OAAtB;AKUMiK,ANLJtK,AETF,UAAKE,KIcU,AJdf,QFSmB,CAJoB;AMMnC,ANDFD,ACJF,AC1B4B,KIKd,YNyBD;AMjCb,AN4BuC,ACEvC,ACND,GIzBwB,CAAzB,CN6Be,CAAb,ICEK0E,IAAL,GAAYpG,MAAM,KFWZ,CEXiBb,OAAL,CAAakH,IAAb,GAAoB,MAAKlH,OAAL,CAAa8G,IAAvC,EACTK,IADS,CACJ,IADI,EACE;AFWd,AEZY,KAET3B,GAFS,CAEL,EFUFpF,QAAL,AEVQgH,CAAD,EFUS/G,AEVLxB,GAAJ,EAAY,IFUMyB,aAAT,CAAuB,KAAKd,gBAAL,CAAsBC,MAA7C,CAAhB;AOCF,APAE,ACPA,ACHI,MKUA8O,INPC/L,ACHK6E,CFUL9G,ICPL,ICHmB,EFUnB,COAoB,GLVI3C,aAAL,CAAmBiB,GAAnB,CAAf,GKU6ByP,gBAAb,CAAtB;APCC,AC1BkC,ACgB7B,aAAO,IAAIhH,IAAJ,CAASD,OAAOtI,GAAhB,EAAqBsI,OAAOvI,GAA5B,CAAP;AKWN,ANRC,ACFI,KALS,CAAZ,GKeK,mBJnBC,EImBWyP,aAAZ,CAAP;AACD,AJpBS;ADWN,gCFSU/N,IAAIC,OAAO;AAAA,AERrB,ACXA,UDWKT,OAAL,CKUWqO,ALVE9G,OAAb,CAAqBzG,OAArB,CAA6B,aAAK;AAChC,ACXFnB,aAAOoK,QAAP,GAAkB,IFWZ,QEXkB;AHmBxB,ACPA,ACAE,ACXA,UHkBEtJ,AEPI5B,KCXDmL,CDWO,MAAKnM,KFOE6C,OGlBnB,CDWY,ACXa,CDWM8G,EFO7B,AEP+B,CAAF,GFOG/G,AGlBJwJ,CDWQ,CAA1B,EAA6BzC,EAAE,CAAF,IAAO,CAApC,CAAZ,ECXA,EHkBmD7G,IAArD,EAA2D;AACzDH,ACPFH,ACAE,ACXD,OAFD,IHoBKO,CEPEqG,GDAExE,CCAP,CAAU5D,GAAV,EFOA,AEPe4I,CFOAhH,CCPjB,GAAqB,CDOnB,ICPwBiC,ACAxB,GAA4B8E,EAAE,CAAF,CAA5B,GDAmB,CAAgB7E,IAAhB,CAAqB,IAArB,CAArB;ADQC,ACPF,ACAE,ACXF,KDOC,EFSA,MAEO,IAAIlC,iBAAiBI,KAArB,EAA4B;AACjCJ,cAAMK,OAAN,CAAc,aAAK;AACjB,AEPJ,UAAK0B,KAAL,CFOSzB,WAAL,CAAiBP,EAAjB,EAAqBQ,CAArB;AACD,AE1C8B,SFwC/B,qBCNM,AEXA;AHoBP,ACRDX,ACAD,ACXCV,OHeO,MAIA,AGnBAoK,EFWEtH,MEXT,GFWA,AEXkB,GFWG,CEXrB,GFWA;ADSEjC,ACRH,AEXA,WHmBMS,SAAH,GAAeR,SAAS,EAAxB;AACD;AACF;+BCRU,AEXA,IDUI;ADEb,ACDA,ACVA,UFWI,ACDA,ACVA,CFWC,ACDA,ACVA,KFWKmC,ACDAG,ACVAH,ODUL,EDCA,ACDL,ACVK,EFWL,ACDqB,ACVrB,EFWuB,AEXA;AFUd,ACCT,ACVA,UFWQtD,AEXF6C,CDUDa,KDDI,GAEU,ECDnB,GDCwB3D,AEXJ,KFSX,AETgBoK,CFWjBnK,IDQI4B,AGnBQ,CAAWsE,CFStB,EETW,CAAe,CHmBjBrE,IAAIV,OAA+B;AAAA,ACV5C,ACEV,ACXoC,UHmBNhB,ACPrBoD,KEZgC2E,CHmBa,CGnBX0C,GFSjC,EET+B,CFYjB,CEZY,IFYPlK,OAHnB,CAGD6C,UAHC,yCDU6B,KAAKzC,QAAU;AGnBlB,OAAf,CAApB;AHoBA,ACPA,AEZA,UHmBMgB,ACPAe,CEZDhC,OHmBSE,CGnBd,CAAc,EAAE8B,EFYI,GDOGd,ECPEU,QAAL,CAAce,EDOpB,CAAuB5B,IAAvB,CAAd,AGnBc,EAAeqB,EFYT,CAA2BM,QEZP,EFYpB,EAAuCvD,AEZ7C,EAAd,IFYoB,CAApB;ADQA8B,ACPA,AEZD,WFYMjB,CDOCgB,EAAN,GAAWA,EAAX,ACPA,CAAc,EAAEgB,UCDNuF,OAAOC,MAAM,CDCT,EAAepF,WAAW,IAA1B,EAAd;AACD,ACDC,UAAI,KAAKvC,OAAL,CAAa4H,KAAb,KAAuB,WAA3B,EAAwC;AFSxC,AEVuB,UAEf7I,CFQHgC,EEVkB,GAEF4G,IAFE,CAEf5I,CFQR,CAAiBqC,CEVM,IFUvB,EAAwBX,KAAxB;AEVuB,UAEV3B,GAFU,GAEF6I,IAFE,CAEV7I,GAFU,WCTV;AHqBb,AGpBA,UHoBMwC,AGpBF,CAAC,KAAKyB,EHoBI1C,KGpBT,EAAL,EHoBuBC,AGpBF,QFYR,KDQC,OAA2Ba,EAA3B,CAAd;AACA,ACRA,ACFA,ACVA,UHoBIG,ACRA,CAAC,ACFA0F,ACVAhE,IHoBL,CCRUD,CDQCzB,IGpBX,EHoBiBC,ACRZ,EAAL,ACFA,CAAoB,CDEC,GCFrB,EAA0B,CFUf,CAAiBC,AEVAzC,QAAF,EAAOD,CFUtB,CAA6BwC,KAA7B,CEVe,EAA1B;ADGA,ACFD,ACVA,WFYM0B,UAAL;ADSA,ACRD,UDQKvD,MAAJ,EAAY;AACVA,eAAOmB,WAAP,CAAmBQ,KAAnB;AACD,mCEXYsG,ECVE,KDUKG,WAAW;AAC/B,ACVA,UDUI,ACVA,CDUC,ACVA,KDUKC,ACVAA,aFYH,ACFF,ACVA,EDUL,ACVA,EDU2B,ACVA;AHsB3B,ACVO,ACHwB,ACR/B,UDUQxI,ACVFA,GHqBC8B,GEbwB,EFa/B,CCTwC,ACFrB,ACVJ,KFY8B/B,ACFrBA,ACVJoK,KFWb,ACHwB,ACRhB,CDUPnK,ACVkBkG,GAAX,CAAe,EDQC;AFchC,ACXQ,AEXuB,UFYxBnD,KEZ8B,OFW7B,UACDA,YADC;AAAA,ACAP,ACVE8H,UFWkB7H,ACDhBoF,MCVIF,EAAErG,CDUG,CAAC,ACXsB,KFW7B,ACAM,EAAQ,KAAR,EAAemF,CDCRhE,MCDP,CAAuBoF,MAAMK,EDAnC,ICA6B,CAAaC,IAApC,IAA4C,CAAC,CAA1D,EAA6D;ADAtD,ACCL1I,ACVA8K,UFWMnI,KCDCyF,MAAMK,ACVFP,CFSN,CETQ4C,EFWU,ECDhB,CAAapC,EDCQhI,ECD5B,ACVW,GAAcwH,CDUGE,CDDvB,AETsB0C,CFWrBnI,ICD4B8F,ICVT,CAAY5G,CDUT,CAAa1C,ACV9B,CFSN,EETqC,EDU1C;AACD,ACbmC,SAAN,wBHwBnB;AACX,AEXA,ACd8B,OAAf,CAAf,GHyBK2B,AEXAD,QFWL,AEXA,CFWcsB,AEXA,EAAEnC,OFWhB,CEXwBoI,EFWE,EAA1B,IEXgCpI,MAAR,GAAiBuI,SAA3B,EAAd;AFYA,ACXAxF,ACAD,ACXC,WHsBKX,AGtBAvB,QAAL,CAAc,EFWE,AEXAb,CFWhB,CDWA,CAAmB,IAAnB,EAAyB,KGtBX,EAAd,KHsBA,EAAuC,KAAKJ,OAAL,CAAa,UAAb,CAAvC;AACD,AGtBA;AFYC,UAAIoD,mBAAmB,CAAvB,EAA0B;AACxBA,0BAAkBL,ICDZ,SDCyB/D,MAAb,GAAsB,CAAxC;AACD,ACFO,ODAR,MAEO,MCDwB,KAAKmB,KFW7BsC,AEZC,OCVM,GHsBGjC,UAAU;AAC3B,ACVE4C,ACHM,ACVM,UHuBRV,AEZEtC,ACVAC,MDSA,ICVM,CHuBG,EGtBM,GHsBDF,AEZdC,CDEa,CAAnB,AEZ0BD,GHsB5B,CEbQ,CCVM,CACNE,UADM;AHwBd,ACVC,ACJO,UACQA,CFaXF,KAAL,GAAaF,CEdL,MFcYC,IEbJG,EFaH,CAAc,EAAd,EAAkBqC,GEdvB,KFcK,EAA4BD,QAA5B,CAAb;AACA,AGvBA,UHuBI,GGvBG,CAACpC,GHuBGG,OGvBX,CHuBI,KAAoB,UAAxB,EAAoCA,WAApC,KACK,KAAKmC,UAAL;AACN,ACXC,ACJA,ACTD,WFaM1B,ECJE,CAACZ,KDIR,CAAc,EAAE8C,ECJT,IAAe/C,OAAOP,GAAP,KAAe,IAA9B,CDIO,EAAgBuD,CCJehD,OAAOR,GAAP,KAAe,IAA5D,YDIc,EAAd;AACD,ACJA;;gCCRW,CHwBC,CAAE;AGxBH,mBACoB,KAAKO,KFa5B,AEdG,ODUI;ADIP,ACJO,ACVJ,UDWFE,ACVAD,MADE,IFe8B,ACL1B,GACS,EDIsBD,CEdrCC,EDUoBD,EDGrB,EEdG,CDUI,CACNE,UADM;ADIP,AEdG,UFeJ8C,AEdUE,SADN,GFcH,OEbSA,IFcVF,KEfI,OFcH;AAAA,ACFP,UDGoBC,GCHb,CAAC/C,UAAR,CDEO,WACa+C,eADb;AAAA,ACDR,ACXC,UFcQL,GEdD,CAACM,QFYD,CEZA,EFckB,EEdJjD,GFcSU,IEdF9B,GFYrB,CAEC+D,EEda,GAAgB,CAArC,MFYO;AEXR;;AFeCI,sBAAgB,CAAhB,UCHW;AACX,8BCXQ;AFeR,AEfQ,UFeJC,UEd8B,KAAKjD,IFchB4C,CEff,YFe4B/D,MAAb,GAAsB,CAA7C,EAAgD;AAC9CoE,ACHF,ACbQ,UACA/C,CDYHmE,SCbG,GDaR,GDGoB,CAAlB,IEfMnE,UADA;AFiBP,ACHD,ACdQ,OFeR,GEdoBgD,CDafoB,EDGE,MEjBC,KDcR,MCboBpB,SADZ;AFkBND,ACHH,2BDGsB,CAAnB;AACD,AEjBD,aAAOC,aAAa,CAAChD,UAArB;AACD;AFkBC,WAAKY,QAAL,CAAc,EAAEkC,cCJF,YDIA,EAAgBC,gCAAhB,EAAd;AACD,ACJC,WAAKsC,gBAAL,CAAsBH,QAAtB,GAAiC,CAAC,KAAK1B,OAAL,EAAlC;AACD,iCCdY;AACX;8BFkBQ;AACR,AEjBA,UFiBI,CAAC,AEjBAY,KFiBKV,QAAL,AEjBL,EFiBA,EAAsB,OCJT;AAAA,ACZd,UDaS3D,MADK,GACM,KAAKD,KADX,CACLC,MADK;ADGL,oBAGyB,KAAKD,KAH9B;AAAA,UAGFC,MAHE,WAGFA,MAHE;AAAA,ACAR,UDGc8C,CCHT6F,QAAL,CAAcxJ,IDAN,CCAR,GAAsBa,ODGR8C,ACHerD,CCbf,EDad,WDAQ;AAAA,ACCR,ACbA,UFgBQ8D,CCHHoF,ACbAtD,QDaL,CDDQ,ACCMF,GDGS,AEhBvB,CAAkBA,IFgBUzE,ACH5B,GACE,CAAC,ACdH,GFYQ,AEZqB,CFgBrB6C,AEhBsB,CDctBiF,ICd2BlF,KFY3B,ICEL,ACd2B,EDc5B,ACdF,IDc2B,KAAK5C,OAAL,CAAa4H,KAAb,KAAuB,YADlD;ACZA,WAAKhD,gBAAL,CAAsBH,QAAtB,GAAiC,CAAC,KAAK1B,OAAL,EAAlC;ADeA,ACdD,WDcMmF,QAAL,CAAczJ,KAAd,GAAsBa,OAAOR,GAA7B;ADEAQ,ACDA,WAAK4I,IDCI5I,ICDT,CAAcmF,EDCEvB,KAAP,CAAa,ACDtB,CDCS,EAAgB,ACAvB,CDAwB,ACAvB,CDAM,CAAT,GCAQ4E,aAAL,EAAD,IAAyB,KAAK9H,OAAL,CAAa4H,KAAb,KAAuB,YADlD;ADEAxF,ACAD,wBDAmB,CAAlB;AACA,aAAOS,WAAWT,cAAX,EEhBWiI,IFgBoB,GAAtC,EAA2C,AEhBhB;AFiBzBjI,AEhBF,UAAMkI,aAAaD,GFgBC,CAAlB,IEhByBE,WAAR,GAAsBF,QAAQG,YAAjD;AFiBElL,AEhBF,UAAMmL,OFgBKnL,OAAO4D,AEhBEmH,KFgBT,CAAa,CAAb,CEhBiBK,CFgBD,ACDhB,CDCiB,CAAjB,CAAT,QEhBkB,GAAuBL,QAAQM,aAAnD;AFiBC,ACDD,ACfA,WAAKlB,KAAL,CAAW3I,OAAX,CAAmB;AAAA,eAAK0G,EAAEoD,WAAF,CAAc,EAAEN,sBAAF,EAAcG,wBAAd,EAAd,CAAL;AFkBnB,ACDA,ACjBmB,OAAnB,IFkBKtK,ACDAuB,QDCL,CAAc,EAAEpC,ECDhB,CACE,GADF,EAEE,MDDY,EAAU8C,WCDxB,EAGE,KAAKlD,OAAL,CAAa,IDFD,EAAd,WCEE,CAHF;ADED,ACGC,ACrBD,WDqBMwC,aAAL,CAAmB,KAAnB,EAA0B,eAA1B,EAA2C,KAAKyG,cAAL,EAA3C;AACA,WAAKzG,aAAL,CAAmB,KAAnB,EAA0B,YAA1B,EAAwC,KAAK0G,UAAL,EAAxC;AACA,WAAK1G,aAAL,CAAmB,GAAnB,EAAwB,gBAAxB,EAA0C,CACxCrB,SAAS8E,cAAT,CAAwB,KAAKnF,OAAL,CAAaqI,QAArC,CADwC,EAExChI,SAASgB,aAAT,CAAuB,IAAvB,CAFwC,EAGxChB,SAAS8E,cAAT,CACE,KAAKjG,OAAL,CAAa,iBAAb,EAAgC,KAAKc,OAAL,CAAa4H,KAA7C,CADF,CAHwC,CAA1C;AAOA,WAAKlG,aAAL,CACE,GADF,EAEE,CDZO,EElBE,gBD4BX,EAGE,KAAKxC,OAAL,CAAa,kBAAb,CAHF;ADTA,ACcA,AChCA,UFkBI,CAAC,ACcAwC,KDdKyB,QCcV,CDdK,ACcc,EDdnB,EAAuB,CCcvB,EAA0B,aAA1B,EAAyC,KAAKmF,eAAL,EAAzC;;ADfS,ACiBT,AChCA,UFkBQhG,AElBFuI,UAAU,KFeP,AEfYnJ,GFkBO,KAAKrC,KAHxB,AEfO,CFkBRiD,AElB2B,KAAnB,EAA0B,QFejC,CEfO,EAAqC,IAArC,CAAhB;AFeS,ACkBT,WAAKsC,SDd4B,KAAKvF,ECctC,GDlBS,ACkBe,KAAKqC,aAAL,CACtB,QADsB,EAEtB,YAFsB,EAGtB,KAAKxC,OAAL,CAAa,iBAAb,CAHsB,CAAxB;ADlBS,ACuBT,ACpCA,UFiBMkD,CCmBDwC,ACpCAlD,aFaI,AEbT,CAAmB,EDoCnB,CAAsBqD,ECpCtB,EAA0B,GFiBpB3C,ACmBN,GAAgC,KAAK6C,CCpCrC,EAAwC,GFa/B,EEboC6F,IDoCb,CAAkBnI,IAAlB,CAAuB,IAAvB,CAAhC,CCpCwC,EAAxC,EAAiEkI,OAAjE;AFaS,ACwBT,UDpBsBvL,CCoBjBsF,KDxBI,WAIatF,ACoBtB,CAAsBmF,KDxBb,GCwBT,GAAiC,IAAjC;ADxBS,AEXT,UAAMsG,WFgB+B,KAAK/K,OALjC,AEXoB,KAAK0B,aAAL,CAC3B,KAD2B,EAE3B,sBAF2B,EAG3B,KAAKsJ,gBAAL,EAH2B,EAI3BH,OAJ2B,CAA7B;AFWS,AC0BT,UDrBQ5I,CCqBHJ,UAAL,CD1BS,YAKDI,YALC;AAAA,AC2BV,AC/BC8I,UFSsBlI,UALb,OEJYoI,KFSCpI,KETtB,GAAkC,EFIzB;AEJyB,eAAS6E,MAAMjE,cAAN,EAAT;AAAA,OAAlC;AFWAnE,AEVAyL,gBFUU9I,WEVWiJ,EFUE5I,IEVvB,GAA8B,CDgCf,ODtBL,CAAV,QEVuC;AFWvCF,ACsBA,AChCEsF,UDgCIa,IChCE9E,CDgCGpD,SDtBO,ACsBEgB,CDtBpB,GEVE,SDgCS,CAAuB,IAAvB,CAAX;ADrBA,ACsBA,AChCE,WDgCGrB,CChCGmB,CFUD0B,IEVM6E,CDgCb,CAAac,IChCM2C,CFUD/I,GCsBlB,CAAsBtB,OAAtB,AChCa,CDgCiB,AChCEsK,EFUzB,KEVM,CFUyB,AEVE,GFUxC,EAA2C,GCsBL,IChCzB,CAAX;AFWAhJ,ACsBA,AChCA,YDgCM5B,AChCF,CAACW,EAAL,EDgCWd,AChCF,SFUS,ACsBEgB,CDtBpB,YCsBW,CAAuB,IAAvB,CAAX;ADrBA/B,ACsBAkB,AChCA,WDgCGS,CChCGT,KAAKH,CFUD,ECsBV,CDtBA,ECsBeoI,GChCK4C,CDgCpB,aChCW,CAAwBlK,EAAxB,CAAX;AFWD,ACsBCoH,AChCA,WDgCG3H,CChCC,CAACJ,GAAGqJ,MDgCR,CAAerJ,EAAf,AChCA,EAAmB;ADiCpB,AChCCA,OD4BF,IC5BKqJ,SAAH,CAAayB,OAAb,CAAqB,IAArB;AFWF,ACsBA,AChCEP,WFUG5K,ECsBEoI,EAAP,IDtBA,CAAc,EAAEjJ,OEVOsB,OFUT,EAAUwB,EEVtB,CAAiC5B,EAAjC,yBFUY,EAAd;AACD,ACsBA,AChCE,OARD;;AAUA;AACA,WAAKmE,YAAL,GAAoB,KFSXvB,AETgB1B,ED+Bd,CDtBC,UETQ,CAClB,QADkB,EAElB,cAFkB,EAGlB,KAAKxC,OAAL,CAAa,kBAAb,CAHkB,CAApB;AFUA,ACqBW,AC1BX,WAAKyF,GFKGvB,EAAElB,GAAV,IELA,CAAkB6C,OAAlB,GAA4B,KAAKC,QAAL,CAAcrC,IAAd,CAAmB,IAAnB,CAA5B;AFME,AELF,WAAKgC,EFKE,UELP,CFKE,AELgBF,QAAlB,GAA6B,IAA7B;AFMI,ACoBJ,UAAMiE,KDpBGrF,MAAL,ICoBiB,KAAK4D,IAAL,CAAUzB,GAAV,CAAc;ADnB/B,ACmB+B,ACxBnC,eDyBEmC,KAAKpH,UAAL,CAAgB;AACdoI,ACzBJ,WAAK/D,QDyBQ,OAAKmC,CCzBlB,GAAwB,KAAKrF,aAAL,CACtB,QADsB,EAEtB,YAFsB,EAGtB,KAAKxC,OAAL,CAAa,iBAAb,CAHsB,CAAxB;AFME,ACkBgB,ACnBlB,SDmBE,CADiC,CClB9B0F,EFCE,YAAL,EEDF,CAAsBG,OAAtB,GAAgC,KAAKE,YAAL,CAAkBtC,IAAlB,CAAuB,IAAvB,CAAhC;AFEI,ACgB+B,ACjBnC,ODiBqB,CAArB,GCjBKiC,IFCItB,MAAL,MEDJ,CAAsBmB,QAAtB,GAAiC,IAAjC;AFEI;ACqBJ,ACrBA,WAAK5C,EDqBE,KAAKH,GCrBZ,UDqBO,CAAmB,KAAnB,EAA0B,aAA1B,EAAyCgH,YAAzC,EAAuD,IAAvD,CAAP;ADnBE,ACoBH,ACrBA,aFCQ,OAAL;AACE,eAAKnF,QAAL;AACA;sCCoBY,CCrBC;AFGf,ACkBc,ACrBC,aFGV,WAAL;AACE,eAAKC,OAAL;AACA,ACiBJ,ACrBA,UAAMhD,CDqBDyH,ICrBM5H,IDqBX,GAAgBA,ECrBIgB,ODqBKA,MCrBd,CAAuB,KAAvB,CDqBK,ACrBhB,CDqBuC,OAAvB,CAAhB;AACA,ACrBAb,SAAG+K,EDqBErD,CCrBL,GAAS,IDqBT,CCrBclI,EDqBEK,KCrBP,CAAamL,GDqBGnK,UCrBzB,GDqBgB,CAAuB,OAAvB,CAAhB;ADhBE,AEJFb,SAAGW,EAAH,GAAQ,kBAAR;AFKI,ACiBJ,ACrBAX,ODqBC,ECrBEiL,GDqBGxD,GCrBN,EFdA,CAkBY,AEJA,EDqBZ,EAAgB,KAAKC,GCrBH,KDqBlB,EAA+BpH,OAA/B,CAAuC,aAAK;ADnC5C,ACoCEE,ACrBA,UDqBEE,IAAF,CCrBK8I,EDqBI,QAAT,SCrBA,CAAyBxJ,EAAzB;ADsBAQ,ACrBA,UDqBE4H,IAAF,CCrBKa,EDqBI,CAAT,ECrBA,CAAW3I,OAAX,CAAmB;AFKrBsC,ACiBEpC,ACtBmB,QFKnByC,ECiBEoF,GAAF,GAAQ,CAAR,ACtBwBrI,GAAGe,EFK7B,GAtBY,CAsBQ,IELM,CAAcX,WAAd,CAA0B4G,EAAEhH,EAA5B,CAAL;AFMtB,ACiBGQ,ACvBmB,SAAnB,CDuBEyD,QAAF,GAAa,OAAKzE,OAAL,CAAa4H,KAAb,KAAuB,YAApC;AACA5G,ACvBD,OAHD,GD0BI8H,QAAF,GAAa,OAAK9B,cAAlB;AACAhG,ACvBF,UDuBI+H,CCvBCkB,MDuBH,GAAY,MCvBd,CDuBmBjD,ECvBIxG,EAAvB,UDuBE;AACD,ACvBD,ODgBA,MChBOA,EAAP,iBFKU;AAAA,AEJX,oBFK+B,KAAKnB,KADzB;AAAA,ACoBV,UDnBQC,CCmBH2I,KDpBK,GCoBV,CAAce,GAAd,GAAoB,CDnBZ1J,ICmBiBU,EDpBf,KCoBU,CAAakH,IAAjC;ADpBU,ACqBV,UDpBgB3E,CCoBX0F,QDrBK,ACqBV,CAAcD,IAAd,GAAqB,GDpBLzF,ECoBhB,ODrBU;AAAA,ACsBV,UDpBQM,CCoBHqF,QAAL,CDtBU,ACsBIc,GDpBS,ACoBvB,GAAoB,EDpBQhJ,GCoBHA,IDtBf,CAEF6C,ECoBY,CAAaiE,ACxBhB,IDwBjB,GDtBU;ACuBV,ACxBA,WDwBKoB,ECxBE,KAAK0B,CDwBZ,CAAc5B,IAAd,GAAqB,CCxBd,CAAgBxC,GDwBvB,ACxBO,CAAoB;AAAA,eAAKsE,EAAE4B,MAAF,EAAL;AFK3B,ACqBA,AC1B2B,OAApB,CAAP,KFKO,ACqBA,CDrBCnJ,ICqBIb,KDrBL,IAAcpC,ICqBd,CACL,EDtB0BpB,ICqBrB,EDrBc,ACuBnB,GDvBmC2E,QCqB9B,EAGL,CDxB8C3E,ACwB7C,KAAK+J,CDxBR,OCwBE,EAAgB,KAAKC,QAArB,CAHK,EAIL,IAJK,CAAP;ADpBD,AC0BA,AC/BA;;;+BFOU;AAAA,oBACqC,KAAK7I,KAD1C;AAAA,UACDC,MADC,WACDA,MADC;AAAA,IC2BPgI,AC/BAoC,MFKctH,cADP,WACOA,cADP;AAAA,AC4BX,AC/BA,UFIkCG,MC2BtB0G,GD5BD,EC4BX,EAAmBC,KAAnB,CC/B+D,CFI7B3G,AC2BW,SD5BlC;AC4BkC,AC/BkB,QD+BrCkF,AC/BZtG,EAAiD,QD+BlB,AC/B/BA,EAAiD,qED+BxB,IAAM;AD1B3C,AEL6D,QAA7CwK,KFKT,CAACpJ,SAAD,CELsD,GFKxCjD,KELLqM,EFKYzN,MAAP,GAAgB,CAA9B,IAAmCkE,AELmB,iBFKF,CAA3D;AACD,ACyB4C,AC/BkB,QAA3BwJ,GAA2B,QAA3BA,GAA2B;AAAA,QAAtBC,IAAsB,QAAtBA,IAAsB;ADgC7D,AChC6D,QAAZlC,QAAY,SAAZA,QAAY;gCFQnD;AAAA,AERmD,oBFS/B,KAAKtK,KADzB;AAAA,UAC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","file":"src.29b4f172.map","sourceRoot":"../src","sourcesContent":["export function randomChoice(arr) {\n  return arr[Math.floor(Math.random() * arr.length)];\n}\n\nexport function capitalize(str) {\n  return str.charAt(0).toUpperCase() + str.substr(1);\n}\n\nexport function setVendorStyle(element, property, value) {\n  const prop = capitalize(property);\n  element.style[\"webkit\" + prop] = value;\n  element.style[\"moz\" + prop] = value;\n  element.style[\"ms\" + prop] = value;\n  element.style[\"o\" + prop] = value;\n}\n\nexport function indexToRowCol(numOfCols, idx) {\n  return {\n    col: Math.floor(idx % numOfCols),\n    row: Math.floor(idx / numOfCols)\n  };\n}\n\nexport function rowColToIndex(numOfCols, row, col) {\n  return row * numOfCols + col;\n}\n","const defaultOptions = {\n  \"str-answer-label\": \"Vastauksesi:\",\n  \"str-check-answer\": \"Tarkista\",\n  \"str-send-answer\": \"Lähetä\",\n  \"str-answer-sent\": \"Vastaus lähetetty!\",\n  \"str-select\": \"Valitse\",\n  \"str-erase\": \"Poista\"\n};\n\nexport class BasePuzzle {\n  /**\n   * @param {object} options\n   */\n\n  constructor(options = {}) {\n    this.options = Object.assign(defaultOptions, options);\n\n    this.state = {\n      answer: \"\",\n      answerSent: false\n    };\n\n    this.elementSelectors = Object.assign(\n      {\n        parent: \"#puzzle\"\n      },\n      this.options.elementSelectors\n    );\n  }\n\n  onSubmit() {}\n\n  sendAnswer(callback) {\n    window.alert(this.options[\"str-answer-sent\"]);\n\n    // TODO: Actually send \"completeAnswer\" to server\n    const completeAnswer = JSON.stringify({\n      setting: this.setting,\n      options: this.options,\n      answer: this.state.answer\n    });\n\n    // eslint-disable-next-line no-console\n    console.log(\"Complete answer:\", completeAnswer);\n\n    this.setState({ answerSent: true }, callback);\n  }\n\n  setup() {\n    this.parentEl = document.querySelector(this.elementSelectors.parent);\n    this.renderHTML();\n  }\n\n  renderInner(el, inner) {\n    if (inner instanceof HTMLElement || inner instanceof Text) {\n      el.appendChild(inner);\n    } else if (inner instanceof Array) {\n      inner.forEach(i => {\n        this.renderInner(el, i);\n      });\n    } else {\n      el.innerText = inner || \"\";\n    }\n  }\n\n  renderElement(type, id, inner, parent = this.parentEl) {\n    const newEl = document.createElement(type);\n    newEl.id = id;\n\n    this.renderInner(newEl, inner);\n\n    const oldEl = document.querySelector(`#${id}`);\n    if (oldEl) oldEl.parentNode.removeChild(oldEl);\n\n    if (parent) {\n      parent.appendChild(newEl);\n    }\n\n    return newEl;\n  }\n\n  renderHTML() {\n    this.parentEl.innerHTML = \"\";\n    this.renderElement(\"h1\", \"puzzleName\", this.options[\"str-name\"]);\n  }\n\n  setState(newState, callback) {\n    const oldState = this.state;\n    this.state = Object.assign({}, oldState, newState);\n    if (typeof callback === \"function\") callback();\n    else this.updateView();\n  }\n\n  updateView() {}\n}\n","import { BasePuzzle } from \"./BasePuzzle\";\nimport { setVendorStyle } from \"../lib/util\";\n\nimport \"./Puzzle1.css\";\n\nconst defaultOptions = {\n  \"str-name\": \"Salakirjoitus\",\n  \"str-description\":\n    \"Majavat lähettävät tietoa erityistä salakirjoitusavainta käyttäen.\",\n  \"str-key-descriptions\": {\n    \"+1\":\n      \"Jokainen kirjain vaihdetaan aakkosissa yksi askel eteenpäin olevaan kirjaimeen.\",\n    \"+2\":\n      \"Jokainen kirjain vaihdetaan aakkosissa kaksi askelta eteenpäin olevaan kirjaimeen.\",\n    \"-1\":\n      \"Jokainen kirjain vaihdetaan aakkosissa yksi askel taaksepäin olevaan kirjaimeen.\",\n    \"-2\":\n      \"Jokainen kirjain vaihdetaan aakkosissa kaksi askelta taaksepäin olevaan kirjaimeen.\"\n  },\n  \"str-example-label\": \"Siis esim..\",\n  \"str-ciphertext-label\": \"Vastaanotettu viesti:\",\n  \"str-question\": \"Mikä oli viesti?\"\n};\n\nexport class Puzzle1 extends BasePuzzle {\n  constructor(setting, options = {}) {\n    /**\n     * @param {object} setting\n     * @param {object} options\n     */\n    super(Object.assign(defaultOptions, options));\n\n    this.setting = setting;\n    this.cipherer = new Cipherer(this.setting.characterSet, this.setting.key);\n\n    this.state = Object.assign(this.state, {\n      answerCheck: [],\n      currentCharIdx: 0,\n      ringRotation: 0,\n      selectedCharIdx: 0,\n      submitted: false\n    });\n\n    this.setup();\n  }\n\n  setup() {\n    super.setup();\n    document.onkeydown = this.onKeyPress.bind(this);\n  }\n\n  cleanUp() {\n    document.onkeydown = null;\n  }\n\n  onSubmit() {\n    if (!this.canSubmit()) return;\n    const { answer } = this.state;\n    const { cipherText } = this.setting;\n    const answerCheck = this.cipherer.checkMessage(cipherText, answer);\n    this.setState({ answerCheck, submitted: true });\n  }\n\n  onSendAnswer() {\n    if (!this.canSend()) return;\n    this.sendAnswer();\n  }\n\n  onPrev() {\n    let { ringRotation, selectedCharIdx } = this.state;\n    const { characterSet } = this.setting;\n\n    ringRotation -= 1;\n\n    if (selectedCharIdx <= 0) {\n      selectedCharIdx = characterSet.length - 1;\n    } else {\n      selectedCharIdx -= 1;\n    }\n\n    this.setState({ ringRotation, selectedCharIdx });\n  }\n\n  onNext() {\n    let { ringRotation, selectedCharIdx } = this.state;\n    const { characterSet } = this.setting;\n\n    ringRotation += 1;\n\n    if (selectedCharIdx >= characterSet.length - 1) {\n      selectedCharIdx = 0;\n    } else {\n      selectedCharIdx += 1;\n    }\n\n    this.setState({ ringRotation, selectedCharIdx });\n  }\n\n  onErase() {\n    if (!this.canErase()) return;\n\n    let { answer, currentCharIdx } = this.state;\n    const { cipherText } = this.setting;\n\n    answer = answer.slice(0, -1);\n    currentCharIdx -= 1;\n    while (cipherText[currentCharIdx] === \" \") {\n      currentCharIdx -= 1;\n      answer = answer.slice(0, -1);\n    }\n\n    this.setState({ answer, currentCharIdx });\n  }\n\n  onSelect() {\n    if (!this.canSelect()) return;\n\n    const { selectedCharIdx } = this.state;\n    let { currentCharIdx, answer } = this.state;\n    const { characterSet, cipherText } = this.setting;\n\n    answer += characterSet[selectedCharIdx];\n    currentCharIdx += 1;\n    while (cipherText[currentCharIdx] === \" \") {\n      currentCharIdx += 1;\n      answer += \" \";\n    }\n\n    this.setState({ answer, currentCharIdx });\n  }\n\n  onKeyPress(e) {\n    switch (e.key) {\n      case \"ArrowLeft\":\n        this.onPrev();\n        break;\n\n      case \"ArrowRight\":\n        this.onNext();\n        break;\n\n      case \"Enter\":\n        this.onSelect();\n        break;\n\n      case \"Backspace\":\n        this.onErase();\n        break;\n\n      default:\n        return; // exit this handler for other keys\n    }\n\n    e.preventDefault(); // prevent the default action (scroll / move caret)\n  }\n\n  canSelect() {\n    const { answer, submitted } = this.state;\n    const { cipherText } = this.setting;\n\n    return !submitted && answer.length < cipherText.length;\n  }\n\n  canErase() {\n    const { answer, currentCharIdx, submitted } = this.state;\n    return !submitted && answer.length > 0 && currentCharIdx > 0;\n  }\n\n  canSubmit() {\n    const { answer, submitted } = this.state;\n    return !submitted && answer.length > 0;\n  }\n\n  canSend() {\n    const { answerSent, submitted } = this.state;\n    return submitted && !answerSent;\n  }\n\n  updateView() {\n    super.updateView();\n\n    this.updateAnswer();\n    this.updateButtons();\n    this.updateQuestion();\n    this.updateRing();\n  }\n\n  updateRing() {\n    const { ringRotation, selectedCharIdx } = this.state;\n    const rotation = this.getRingRotation(ringRotation);\n\n    // Update rotation\n    const el = document.querySelector(\"#puzzleRing #characters\");\n    setVendorStyle(el, \"transform\", `rotateY(${-rotation}deg)`);\n\n    // Update selected class\n    // Use setTimeout so the class is set somewhat in sync with the animation\n    setTimeout(() => {\n      document\n        .querySelectorAll(\"#puzzleRing #characters .characterSet\")\n        .forEach((c, idx) => {\n          if (idx === selectedCharIdx) c.classList.add(\"current-char\");\n          else c.classList.remove(\"current-char\");\n        });\n    }, 60);\n  }\n\n  updateQuestion() {\n    const el = document.querySelector(\"#puzzleQuestion\");\n    el.innerHTML = \"\"; // Clear old content\n    this.renderInner(el, this.renderQuestion());\n  }\n\n  updateAnswer() {\n    const el = document.querySelector(\"#puzzleAnswer\");\n    el.innerHTML = \"\"; // Clear old content\n    this.renderInner(el, this.renderAnswer());\n  }\n\n  updateButtons() {\n    this.eraseButton.disabled = !this.canErase();\n    this.selectButton.disabled = !this.canSelect();\n    this.submitButton.disabled = !this.canSubmit();\n    this.sendAnswerButton.disabled = !this.canSend();\n  }\n\n  renderHTML() {\n    super.renderHTML();\n\n    this.renderElement(\"p\", \"puzzleDescription\", this.renderDescription());\n    this.renderElement(\"p\", \"puzzleQuestion\", this.renderQuestion());\n    this.renderElement(\"div\", \"puzzleRing\", this.renderCipherRing());\n    this.renderElement(\"p\", \"puzzleAnswer\", this.renderAnswer());\n\n    // \"Tarkista\"-button\n    this.submitButton = this.renderElement(\n      \"button\",\n      \"puzzleSubmit\",\n      this.options[\"str-check-answer\"]\n    );\n    this.submitButton.onclick = this.onSubmit.bind(this);\n    this.submitButton.disabled = true;\n\n    // \"Lähetä\"-button\n    this.sendAnswerButton = this.renderElement(\n      \"button\",\n      \"puzzleSend\",\n      this.options[\"str-send-answer\"]\n    );\n    this.sendAnswerButton.onclick = this.onSendAnswer.bind(this);\n    this.sendAnswerButton.disabled = true;\n\n    this.updateView();\n  }\n\n  renderDescription() {\n    const { key, keyExample } = this.setting;\n    return [\n      document.createTextNode(this.options[\"str-description\"]),\n      document.createElement(\"br\"),\n      document.createTextNode(this.options[\"str-key-descriptions\"][key]),\n      document.createElement(\"br\"),\n      document.createTextNode(this.options[\"str-example-label\"]),\n      document.createTextNode(\" \"),\n      document.createTextNode(keyExample)\n    ];\n  }\n\n  renderQuestion() {\n    const { currentCharIdx } = this.state;\n    const { cipherText } = this.setting;\n\n    const labelText = document.createTextNode(\n      this.options[\"str-ciphertext-label\"]\n    );\n\n    const label = [labelText, document.createTextNode(\" \")];\n\n    const chars = cipherText.split(\"\").map((c, idx) => {\n      const el = document.createElement(\"span\");\n      el.classList.add(\"cipher-char\");\n      if (idx === currentCharIdx) el.classList.add(\"current-char\");\n      el.innerText = c;\n      return el;\n    });\n\n    const questionEl = document.createElement(\"strong\");\n    questionEl.innerText = this.options[\"str-question\"];\n\n    return [label, chars, document.createElement(\"br\"), questionEl];\n  }\n\n  renderAnswer() {\n    const { answer, answerCheck, submitted } = this.state;\n\n    const labelText = document.createTextNode(this.options[\"str-answer-label\"]);\n\n    const label = [labelText, document.createTextNode(\" \")];\n\n    const chars = answer.split(\"\").map((c, idx) => {\n      const el = document.createElement(\"span\");\n      el.classList.add(answerCheck[idx] ? \"correct\" : \"incorrect\");\n      el.innerText = c;\n      return el;\n    });\n\n    const answerText = document.createTextNode(answer);\n\n    return submitted ? [label, chars] : [label, answerText];\n  }\n\n  renderCipherRing() {\n    const { characterSet } = this.setting;\n\n    const radius = 300;\n\n    const chars = characterSet.split(\"\").map((c, idx) => {\n      const rotation = this.getRingRotation(idx);\n      const el = document.createElement(\"li\");\n      el.classList.add(\"characterSet\");\n      el.innerText = c;\n      setVendorStyle(\n        el,\n        \"transform\",\n        `rotateY(${rotation}deg) translateZ(${radius}px)`\n      );\n      return el;\n    });\n\n    const ring = this.renderElement(\"ul\", \"characters\", chars, null);\n\n    const ringWrapper = this.renderElement(\"div\", \"ringWrapper\", ring, null);\n\n    const eraseButton = this.renderElement(\n      \"button\",\n      \"eraseButton\",\n      this.options[\"str-erase\"],\n      null\n    );\n    const prevButton = this.renderElement(\"button\", \"prevButton\", \"<<<\", null);\n    const nextButton = this.renderElement(\"button\", \"nextButton\", \">>>\", null);\n    const selectButton = this.renderElement(\n      \"button\",\n      \"selectButton\",\n      this.options[\"str-select\"],\n      null\n    );\n\n    eraseButton.disabled = true;\n\n    eraseButton.onclick = this.onErase.bind(this);\n    prevButton.onclick = this.onPrev.bind(this);\n    nextButton.onclick = this.onNext.bind(this);\n    selectButton.onclick = this.onSelect.bind(this);\n\n    const controls = this.renderElement(\"div\", \"controls\", [\n      eraseButton,\n      prevButton,\n      nextButton,\n      selectButton\n    ]);\n\n    this.eraseButton = eraseButton;\n    this.selectButton = selectButton;\n\n    return [ringWrapper, controls];\n  }\n\n  getRingRotation(index) {\n    return index * (360 / this.setting.characterSet.length);\n  }\n}\n\nexport class Cipherer {\n  constructor(characterSet, key) {\n    const keys = /([+-])(\\d+)/g.exec(key);\n    this.factor = keys[1] === \"-\" ? -parseInt(keys[2]) : parseInt(keys[2]);\n    this.characterSet = characterSet;\n  }\n\n  cipherChar(c) {\n    if (this.characterSet.indexOf(c) === -1) return c;\n    let idx = this.characterSet.indexOf(c) + this.factor;\n    if (idx < 0) idx += this.characterSet.length;\n    else if (idx > this.characterSet.length - 1)\n      idx -= this.characterSet.length;\n    return this.characterSet[idx];\n  }\n\n  cipherMessage(m) {\n    if (typeof m === \"string\") {\n      return m\n        .toUpperCase()\n        .split(\"\")\n        .map(this.cipherChar.bind(this))\n        .join(\"\");\n    }\n  }\n\n  checkCharacter(cipherChar, charToCheck) {\n    return (\n      cipherChar && charToCheck && cipherChar === this.cipherChar(charToCheck)\n    );\n  }\n\n  checkMessage(cipherText, message) {\n    return message\n      .toUpperCase()\n      .split(\"\")\n      .map((c, idx) => this.checkCharacter(cipherText[idx], c));\n  }\n}\n","import { BasePuzzle } from \"./BasePuzzle\";\nimport { rowColToIndex, indexToRowCol } from \"../lib/util\";\n\nimport \"./Puzzle2.css\";\n\nconst defaultOptions = {\n  \"str-name\": \"Majavakartta\",\n  \"str-description\":\n    \"Majavakartassa esineen paikka ilmaistaan kahdella suluissa olevalla numerolla. Ensin rivin numero ja sitten sarakkeen numero.\",\n  \"str-input-types\": {\n    \"text-or-mouse\": \"Anna vastauksesi klikkaamalla tai kirjoittamalla.\",\n    \"text-only\": \"Anna vastauksesi kirjoittamalla.\",\n    \"mouse-only\": \"Anna vastauksesi klikkaamalla.\"\n  }\n};\n\nexport class Puzzle2 extends BasePuzzle {\n  constructor(setting, options = {}) {\n    /**\n     * @param {object} options\n     */\n\n    super(Object.assign(defaultOptions, options));\n\n    this.setting = setting;\n\n    this.state = Object.assign(this.state, {\n      answer: { row: null, col: null }\n    });\n\n    this.indexToRowCol = indexToRowCol.bind(null, setting.cols);\n    this.rowColToIndex = rowColToIndex.bind(null, setting.cols);\n\n    this.onSpotClick = this.onSpotClick.bind(this);\n    this.onAnswerChange = this.onAnswerChange.bind(this);\n\n    // Init an array with empty Spot in each element\n    this.grid = Array(this.setting.rows * this.setting.cols)\n      .fill(null) // Fill with nulls so we can use map()\n      .map((_, idx) => {\n        const rowCol = this.indexToRowCol(idx);\n        return new Spot(rowCol.row, rowCol.col);\n      });\n\n    // Replace Spot objectType with received parameters\n    this.setting.objects.forEach(s => {\n      // setting indexes are 1-indexed so we need to substract 1\n      const idx = this.rowColToIndex(s[0] - 1, s[1] - 1);\n      this.grid[idx].objectType = s[2];\n    });\n\n    this.setup();\n  }\n\n  onSendAnswer() {\n    if (!this.canSend()) return;\n    this.sendAnswer();\n  }\n\n  onSpotClick(event, spot) {\n    if (this.setting.input === \"text-only\") return;\n    const { row, col } = spot;\n    this.onAnswerChange(null, { row, col });\n  }\n\n  onAnswerChange(event, newAnswer) {\n    if (!this.canEditAnswer()) return;\n    const { answer } = this.state;\n    if (event && [\"row\", \"col\"].indexOf(event.target.name) > -1) {\n      answer[event.target.name] = event.target.value;\n    }\n    this.setState({ answer: event ? answer : newAnswer });\n  }\n\n  canSend() {\n    const { answer, answerSent } = this.state;\n    return !answerSent && answer.row !== null && answer.col !== null;\n  }\n\n  canEditAnswer() {\n    const { answerSent } = this.state;\n    return !answerSent;\n  }\n\n  updateView() {\n    super.updateView();\n\n    this.updateAnswer();\n    this.updateButtons();\n  }\n\n  updateButtons() {\n    this.sendAnswerButton.disabled = !this.canSend();\n  }\n\n  updateAnswer() {\n    const { answer } = this.state;\n\n    this.rowInput.value = answer.row;\n    this.rowInput.disabled =\n      !this.canEditAnswer() || this.setting.input === \"mouse-only\";\n\n    this.colInput.value = answer.col;\n    this.colInput.disabled =\n      !this.canEditAnswer() || this.setting.input === \"mouse-only\";\n  }\n\n  renderHTML() {\n    super.renderHTML();\n\n    this.renderElement(\n      \"p\",\n      \"puzzleDescription\",\n      this.options[\"str-description\"]\n    );\n    this.renderElement(\"div\", \"puzzleExample\", this.renderExamples());\n    this.renderElement(\"div\", \"puzzleGrid\", this.renderGrid());\n    this.renderElement(\"p\", \"puzzleQuestion\", [\n      document.createTextNode(this.setting.question),\n      document.createElement(\"br\"),\n      document.createTextNode(\n        this.options[\"str-input-types\"][this.setting.input]\n      )\n    ]);\n    this.renderElement(\n      \"p\",\n      \"puzzleAnswerLabel\",\n      this.options[\"str-answer-label\"]\n    );\n    this.renderElement(\"div\", \"puzzleInput\", this.renderInputForm());\n\n    // Render \"Lähetä\"-button\n    this.sendAnswerButton = this.renderElement(\n      \"button\",\n      \"puzzleSend\",\n      this.options[\"str-send-answer\"]\n    );\n    this.sendAnswerButton.onclick = this.onSendAnswer.bind(this);\n    this.sendAnswerButton.disabled = true;\n\n    this.updateView();\n  }\n\n  renderExamples() {\n    const ul = document.createElement(\"ul\");\n    this.setting.examples.forEach(text => {\n      const el = document.createElement(\"li\");\n      el.innerText = text;\n      ul.appendChild(el);\n    });\n    return ul;\n  }\n\n  renderGrid() {\n    const gridElements = this.grid.map(spot =>\n      spot.renderHTML({\n        onClick: this.onSpotClick\n      })\n    );\n\n    return this.renderElement(\"div\", \"gridWrapper\", gridElements, null);\n  }\n\n  renderInputForm() {\n    this.rowInput = document.createElement(\"input\");\n    this.colInput = document.createElement(\"input\");\n\n    [this.rowInput, this.colInput].forEach(i => {\n      i.type = \"number\";\n      i.step = 1;\n      i.min = 1;\n      i.disabled = this.setting.input === \"mouse-only\";\n      i.onchange = this.onAnswerChange;\n      i.onkeyup = this.onAnswerChange;\n    });\n\n    this.rowInput.max = this.setting.rows;\n    this.rowInput.name = \"row\";\n    this.colInput.max = this.setting.cols;\n    this.colInput.name = \"col\";\n\n    return this.renderElement(\n      \"form\",\n      \"inputForm\",\n      [this.rowInput, this.colInput],\n      null\n    );\n  }\n}\n\nclass Spot {\n  constructor(row_0, col_0, objectType = null) {\n    /**\n     * @param {number} row_0 - 0-indexed row\n     * @param {number} col_0 - 0-indexed col\n     * @param {number} objectType\n     */\n    this.col = col_0 + 1; // Coordinate in 1-indexed system\n    this.row = row_0 + 1; // Coordinate in 1-indexed system\n    this.objectType = objectType;\n  }\n\n  renderHTML({ onClick }) {\n    const el = document.createElement(\"div\");\n    el.className = \"spot\";\n\n    if (this.objectType) el.classList.add(this.objectType);\n    else {\n      el.classList.add(\"empty\");\n      el.innerText = \"•\";\n    }\n\n    el.style.gridColumn = this.col;\n    el.style.gridRow = this.row;\n\n    if (this.row === 1)\n      el.appendChild(this.renderIndexingNumber(\"col\", this.col));\n\n    if (this.col === 1)\n      el.appendChild(this.renderIndexingNumber(\"row\", this.row));\n\n    el.onclick = e => onClick(e, this);\n    return el;\n  }\n\n  renderIndexingNumber(type, number) {\n    const el = document.createElement(\"span\");\n    el.className = \"indexingNumber\";\n    el.classList.add(type);\n    el.innerText = number;\n    return el;\n  }\n}\n","import { BasePuzzle } from \"./BasePuzzle\";\n\nimport \"./Puzzle3.css\";\nimport { CANCELLED } from \"dns\";\n\nconst defaultOptions = {\n  \"str-name\": \"Drag & Drop\"\n};\n\nexport class Puzzle3 extends BasePuzzle {\n  constructor(setting, options) {\n    /**\n     * @param {object} setting\n     * @param {object} options\n     */\n    super(Object.assign(defaultOptions, options));\n\n    this.setting = setting;\n\n    this.state = Object.assign(this.state, {\n      answerCheck: [],\n      submitted: false\n    });\n\n    this.slots = this.setting.slots.map(\n      s => new Slot(s, { onChange: this.onAnswerChange.bind(this) })\n    );\n\n    this.draggables = this.setting.draggables.map(d => new Draggable(d));\n\n    this.setup();\n  }\n\n  setup() {\n    super.setup();\n    window.onresize = () => {\n      this.updateSlotPositions(this.backgroundImage);\n    };\n  }\n\n  cleanUp() {\n    window.onresize = null;\n  }\n\n  onSubmit() {\n    if (!this.canSubmit()) return;\n    const answerCheck = this.slots.map(s => s.check());\n    this.setState({ answerCheck, submitted: true });\n  }\n\n  onSendAnswer() {\n    if (!this.canSend()) return;\n    this.sendAnswer();\n  }\n\n  onAnswerChange() {\n    if (!this.canEditAnswer()) return;\n    const answer = this.slots.map(s => ({\n      slot: s.id,\n      draggable: s.draggable ? s.draggable.id : null\n    }));\n    this.setState({ answer });\n  }\n\n  canEditAnswer() {\n    const { answerSent } = this.state;\n    return !answerSent;\n  }\n\n  canSubmit() {\n    const { answer, submitted } = this.state;\n    return !submitted && answer.length > 0;\n  }\n\n  canSend() {\n    const { answerSent, submitted } = this.state;\n    return submitted && !answerSent;\n  }\n\n  updateView() {\n    super.updateView();\n\n    this.updateButtons();\n  }\n\n  updateButtons() {\n    this.submitButton.disabled = !this.canSubmit();\n    this.sendAnswerButton.disabled = !this.canSend();\n  }\n\n  updateSlotPositions(imageEl) {\n    const widthRatio = imageEl.offsetWidth / imageEl.naturalWidth;\n    const heightRatio = imageEl.offsetHeight / imageEl.naturalHeight;\n    this.slots.forEach(s => s.setPosition({ widthRatio, heightRatio }));\n  }\n\n  renderHTML() {\n    super.renderHTML();\n\n    const wrapper = this.renderElement(\"div\", \"wrapper\", null);\n\n    this.renderElement(\"div\", \"background\", this.renderBackground(), wrapper);\n\n    const draggabblesContainer = this.renderElement(\n      \"div\",\n      \"draggables-container\",\n      this.renderDraggables(),\n      wrapper\n    );\n\n    draggabblesContainer.ondragover = event => event.preventDefault();\n    draggabblesContainer.ondrop = event => {\n      event.preventDefault();\n      const id = event.dataTransfer.getData(\"dragged-id\");\n      if (!id) return;\n      const el = document.getElementById(id);\n      if (!el.Draggable) return;\n      el.Draggable.setSlot(null);\n      draggabblesContainer.appendChild(el);\n    };\n\n    // Render \"Tarkista\"-button\n    this.submitButton = this.renderElement(\n      \"button\",\n      \"puzzleSubmit\",\n      this.options[\"str-check-answer\"]\n    );\n    this.submitButton.onclick = this.onSubmit.bind(this);\n    this.submitButton.disabled = true;\n\n    // Render \"Lähetä\"-button\n    this.sendAnswerButton = this.renderElement(\n      \"button\",\n      \"puzzleSend\",\n      this.options[\"str-send-answer\"]\n    );\n    this.sendAnswerButton.onclick = this.onSendAnswer.bind(this);\n    this.sendAnswerButton.disabled = true;\n\n    this.updateView();\n  }\n\n  renderBackground() {\n    const el = document.createElement(\"img\");\n    el.src = this.setting.backgroundUrl;\n    el.id = \"background-image\";\n    el.onload = () => {\n      this.updateSlotPositions(el);\n      this.slots.forEach(s => el.parentNode.appendChild(s.el));\n    };\n    this.backgroundImage = el;\n    return el;\n  }\n\n  renderDraggables() {\n    return this.draggables.map(d => d.render());\n  }\n}\n\nclass Slot {\n  constructor({ id, correctDraggable, top, left }, { onChange }) {\n    this.id = id;\n    this.correctDraggable = correctDraggable;\n    this.position = { top, left };\n    this.size = 20;\n\n    this.onDraggableChange = onChange;\n\n    this.draggable = null;\n\n    this.el = document.createElement(\"div\");\n    this.el.className = \"slot\";\n    this.el.style.width = this.size + \"px\";\n    this.el.style.height = this.size + \"px\";\n\n    this.el.ondragover = this.onDragover.bind(this);\n    this.el.ondrop = this.onDrop.bind(this);\n    this.el.ondragenter = this.onDragEnter.bind(this);\n    this.el.ondragleave = this.onDragLeave.bind(this);\n  }\n\n  check() {\n    return (\n      !this.correctDraggable ||\n      (!!this.draggable && this.correctDraggable === this.draggable.id)\n    );\n  }\n\n  setDraggable(newDraggable) {\n    this.draggable = newDraggable;\n    this.onDraggableChange();\n  }\n\n  setPosition({ widthRatio = 1, heightRatio = 1 }) {\n    this.el.style.top = widthRatio * this.position.top - this.size / 2 + \"px\";\n    this.el.style.left =\n      heightRatio * this.position.left - this.size / 2 + \"px\";\n  }\n\n  render(ratios) {\n    this.setPosition(ratios);\n    return this.el;\n  }\n\n  onDragover(event) {\n    event.preventDefault();\n  }\n\n  onDrop(event) {\n    event.preventDefault();\n    this.el.classList.remove(\"drag-hover\");\n    const id = event.dataTransfer.getData(\"dragged-id\");\n    if (!id) return;\n    const el = document.getElementById(id);\n    if (!el.Draggable) return; // Dragging something else than a Draggable\n    if (this.draggable) {\n      // Already occupied\n      this.draggable.swap(el.Draggable);\n    } else {\n      el.Draggable.setSlot(this);\n      this.el.appendChild(el);\n    }\n  }\n\n  onDragEnter() {\n    this.el.classList.add(\"drag-hover\");\n  }\n\n  onDragLeave() {\n    this.el.classList.remove(\"drag-hover\");\n  }\n}\n\nclass Draggable {\n  constructor({ id, type, content }) {\n    this.id = id;\n    this.type = type;\n    this.content = content;\n\n    this.slot = null;\n\n    this.el = this.renderElement();\n\n    // this.el.draggable = true;\n\n    this.el.ondragstart = this.onDragStart.bind(this);\n    this.el.ondragend = this.onDragEnd.bind(this);\n\n    this.el.Draggable = this;\n  }\n\n  render() {\n    return this.el;\n  }\n\n  renderElement() {\n    const el = document.createElement(\"div\");\n    el.id = `draggable-${this.id}`;\n    el.className = \"draggable\";\n\n    el.ondragstart = this.onDragStart.bind(this);\n    el.ondragend = this.onDragEnd.bind(this);\n\n    el.appendChild(this.renderContent(el));\n\n    return el;\n  }\n\n  renderContent(parentEl) {\n    switch (this.type.split(\"/\")[0]) {\n      case \"text\":\n        parentEl.draggable = true;\n        return this.renderTextContent(parentEl);\n      case \"image\":\n        parentEl.draggable = true;\n        return this.renderImageContent(parentEl);\n      case \"audio\":\n        // Audio requires a more complex dragging logic because of seeking\n        return this.renderAudioContent(parentEl);\n      case \"video\":\n        // Video requires a more complex dragging logic because of seeking\n        return this.renderVideoContent(parentEl);\n      default:\n        return document.createTextNode(\"N/A\");\n    }\n  }\n\n  renderImageContent(parentEl) {\n    parentEl.classList.add(\"loading\");\n    const el = document.createElement(\"img\");\n    el.src = this.content;\n    el.onload = () => {\n      parentEl.classList.remove(\"loading\");\n    };\n    return el;\n  }\n\n  renderAudioContent(parentEl) {\n    parentEl.classList.add(\"loading\");\n    parentEl.classList.add(\"audio-video\");\n\n    const draggingAnchor = document.createElement(\"span\");\n    draggingAnchor.innerText = \"DRAG HERE\";\n    draggingAnchor.className = \"anchor\";\n\n    const audio = document.createElement(\"audio\");\n    audio.controls = true;\n    audio.preload = true;\n    audio.src = this.content;\n    audio.type = this.type;\n    audio.oncanplay = () => {\n      parentEl.classList.remove(\"loading\");\n      // parentEl.appendChild(draggingAnchor);\n    };\n\n    return audio;\n  }\n\n  /*\n   * Only direct URL to a video file is supported.\n   * Youtube and Vimeo for example require the use of iframe to play content.\n   * This can be circumvented by using a paid account. \n   * So they are not supported.\n   */\n  renderVideoContent(parentEl) {\n    parentEl.classList.add(\"loading\");\n    parentEl.classList.add(\"audio-video\");\n\n    const video = document.createElement(\"video\");\n    video.controls = true;\n    video.preload = true;\n    video.src = this.content;\n    video.type = this.type;\n    video.width = 300;\n    video.oncanplay = () => {\n      parentEl.classList.remove(\"loading\");\n    };\n    return video;\n  }\n\n  renderTextContent(parentEl) {\n    parentEl.style.minWidth = 100 + \"px\";\n    parentEl.style.padding = 4 + \"px\";\n    const el = document.createElement(\"p\");\n    el.innerText = this.content;\n    return el;\n  }\n\n  setSlot(newSlot) {\n    if (this.slot) {\n      // Moving out of this.slot\n      this.slot.setDraggable(null);\n    }\n\n    if (newSlot) {\n      // Moving into newSlot\n      newSlot.setDraggable(this);\n      this.el.classList.add(\"in-slot\");\n    } else {\n      // newSlot is null so we are not in a Slot\n      this.el.classList.remove(\"in-slot\");\n    }\n\n    this.slot = newSlot;\n  }\n\n  onDragStart(event) {\n    event.dataTransfer.setData(\"dragged-id\", this.el.id);\n\n    this.el.classList.add(\"dragging\");\n\n    setTimeout(() => {\n      // Needs to be in a timeout because otherwise element we are dragging\n      // will be hidden as well\n      this.el.classList.add(\"hide\");\n    }, 1);\n  }\n\n  onDragEnd() {\n    this.el.classList.remove(\"dragging\");\n    this.el.classList.remove(\"hide\");\n  }\n\n  /*\n   * Swap places with other Draggable\n   */\n  swap(other) {\n    if (!(other instanceof Draggable)) return;\n    const otherParent = other.el.parentNode;\n    const otherSlot = other.slot;\n    const thisParent = this.el.parentNode;\n    const thisSlot = this.slot;\n\n    this.setSlot(otherSlot);\n    otherParent.appendChild(this.el);\n    other.setSlot(thisSlot);\n    thisParent.appendChild(other.el);\n  }\n}\n","export { BasePuzzle } from \"./BasePuzzle\";\nexport { Puzzle1, Cipherer } from \"./Puzzle1\";\nexport { Puzzle2 } from \"./Puzzle2\";\nexport { Puzzle3 } from \"./Puzzle3\";\n","import { randomChoice } from \"./lib/util\";\nimport { Puzzle1, Cipherer } from \"./puzzles\";\n\nfunction init() {\n  const characterSet = \"ABCDEFGHIJKLMNOPQRSTUVWXYZÅÄÖ\";\n\n  const possibleSettings = [\n    {\n      key: \"+1\",\n      keyExample: \"A → B, B → C..., Ä → Ö, Ö → A\"\n    },\n    {\n      key: \"+2\",\n      keyExample: \"A → C, B → D..., Ä → A, Ö → B\"\n    },\n    {\n      key: \"-1\",\n      keyExample: \"A → Ö, B → A..., Ä → Å, Ö → Ä\"\n    },\n    {\n      key: \"-2\",\n      keyExample: \"A → Ä, B → Ö..., Ä → Z, Ö → Å\"\n    }\n  ];\n\n  const puzzleSetting = randomChoice(possibleSettings);\n  puzzleSetting.characterSet = characterSet;\n\n  const possibleMessages = [\"HEI MAAILMA\", \"JS ROKKAA\", \"YLIOPISTO ON PARAS\"];\n\n  const cipherer = new Cipherer(puzzleSetting.characterSet, puzzleSetting.key);\n  puzzleSetting.cipherText = cipherer.cipherMessage(\n    randomChoice(possibleMessages)\n  );\n\n  const puzzleOptions = {};\n\n  return new Puzzle1(puzzleSetting, puzzleOptions);\n}\n\nexport default init;\n","import { randomChoice } from \"./lib/util\";\nimport { Puzzle2 } from \"./puzzles\";\n\nfunction init() {\n  const possibleSettings = [\n    {\n      rows: 10,\n      cols: 10,\n      objects: [\n        [1, 1, \"lake\"],\n        [2, 5, \"mushroom\"],\n        [3, 9, \"tree\"],\n        [9, 6, \"treestump\"]\n      ],\n      examples: [\"Järvi (1, 1)\", \"Sieni (2, 5)\"]\n    },\n    {\n      rows: 10,\n      cols: 10,\n      objects: [\n        [4, 2, \"lake\"],\n        [3, 5, \"mushroom\"],\n        [2, 9, \"tree\"],\n        [9, 6, \"treestump\"]\n      ],\n      examples: [\"Järvi (4, 2)\", \"Sieni (3, 5)\"]\n    }\n  ];\n\n  const puzzleSetting = randomChoice(possibleSettings);\n\n  const puzzleInputs = [\"text-or-mouse\", \"text-only\", \"mouse-only\"];\n\n  const puzzleQuestions = [\n    \"Missä puunkanto sijaitsee?\",\n    \"Majavan talo sijaitsee neljä askelta sienen alapuolella ja siitä kaksi askelta oikealle. Missä rivissä ja sarakkeessa Majavan talo sijaitsee?\"\n  ];\n\n  puzzleSetting.question = randomChoice(puzzleQuestions);\n  puzzleSetting.input = randomChoice(puzzleInputs);\n\n  const puzzleOptions = {};\n\n  return new Puzzle2(puzzleSetting, puzzleOptions);\n}\n\nexport default init;\n","import { randomChoice } from \"./lib/util\";\nimport { Puzzle3 } from \"./puzzles\";\n\nimport finlandImg from \"./static/finland-23572_1280.png\";\n\nfunction init() {\n  const possibleSettings = [\n    {\n      backgroundUrl: finlandImg,\n      slots: [\n        { id: 1, correctDraggable: 1, top: 620, left: 390 }, // Oulu\n        { id: 2, correctDraggable: 2, top: 1070, left: 280 }, // Tampere\n        { id: 3, correctDraggable: 3, top: 1230, left: 340 }, // Helsinki\n        { id: 4, correctDraggable: 4, top: 1190, left: 160 } // Turku\n      ],\n      draggables: [\n        {\n          id: 1,\n          type: \"image/png\",\n          content: \"https://picsum.photos/200/100/?random\"\n        },\n        {\n          id: 2,\n\n          type: \"image/png\",\n          content: \"https://picsum.photos/200/200/?random\"\n        },\n        {\n          id: 3,\n\n          type: \"image/png\",\n          content: \"https://picsum.photos/100/100/?random\"\n        },\n        { id: 4, type: \"text/plain\", content: \"Drag me 1\" },\n        { id: 5, type: \"text/plain\", content: \"Drag me 2\" },\n        { id: 6, type: \"text/plain\", content: \"Drag me 3 very long text\" },\n        {\n          id: 7,\n          type: \"video/ogg\",\n          content: \"http://clips.vorwaerts-gmbh.de/big_buck_bunny.ogv\"\n        },\n        {\n          id: 8,\n          type: \"audio/mp3\",\n          content: \"https://html5tutorial.info/media/vincent.mp3\"\n        }\n      ]\n    }\n  ];\n\n  const puzzleSetting = randomChoice(possibleSettings);\n\n  return new Puzzle3(puzzleSetting);\n}\n\nexport default init;\n","import \"./index.css\";\n\nimport initPuzzle1 from \"./initPuzzle1\";\nimport initPuzzle2 from \"./initPuzzle2\";\nimport initPuzzle3 from \"./initPuzzle3\";\n\n// window.activePuzzle = initPuzzle2();\n\nfunction activatePuzzle(init) {\n  if (window.activePuzzle && window.activePuzzle.cleanUp)\n    window.activePuzzle.cleanUp();\n  window.activePuzzle = init();\n}\n\ndocument.querySelector(\"#initPuzzle1\").onclick = () => {\n  activatePuzzle(initPuzzle1);\n};\n\ndocument.querySelector(\"#initPuzzle2\").onclick = () => {\n  activatePuzzle(initPuzzle2);\n};\n\ndocument.querySelector(\"#initPuzzle3\").onclick = () => {\n  activatePuzzle(initPuzzle3);\n};\n"]}