{"version":3,"sources":["puzzles/BasePuzzle.js","lib/util.js","puzzles/Puzzle2.js"],"names":["BasePuzzle","data","setting","locale","state","answer","answerSent","callback","window","alert","general","completeAnswer","JSON","stringify","console","log","setState","parentEl","document","querySelector","renderHTML","el","inner","HTMLElement","Text","appendChild","Array","forEach","renderInner","i","innerText","type","id","parent","newEl","createElement","oldEl","parentNode","removeChild","innerHTML","renderElement","specific","newState","oldState","Object","assign","updateView","randomChoice","capitalize","setVendorStyle","indexToRowCol","rowColToIndex","arr","Math","floor","random","length","str","charAt","toUpperCase","substr","element","property","value","prop","style","numOfCols","idx","col","row","Puzzle2","bind","cols","onSpotClick","onAnswerChange","grid","rows","fill","map","_","rowCol","Spot","objects","s","objectType","setup","canSend","sendAnswer","event","spot","input","newAnswer","canEditAnswer","indexOf","target","name","updateAnswer","updateButtons","sendAnswerButton","disabled","rowInput","colInput","renderExamples","renderGrid","createTextNode","question","renderInputForm","onclick","onSendAnswer","ul","examples","text","gridElements","onClick","step","min","onchange","onkeyup","max","row_0","col_0","className","classList","add","gridColumn","gridRow","renderIndexingNumber","e","number"],"mappings":";;;;;;;;;;;QCAgB+C,eAAAA;IDAH/C,ICIGgD,aAAAA,IDJHhD;AACX,QCOciD,iBAAAA;QAQAC,gBAAAA;QAOAC,gBAAAA;AAvBT,SAASJ,YAAT,CAAsBK,GAAtB,EAA2B;AAChC,ADIA,SCJOA,IAAIC,KAAKC,IDIJrD,CCJD,CAAWoD,EDItB,EAAkB,CCJSE,MAAL,KAAgBH,IAAII,MAA/B,CAAJ,CAAP;AACD,ADGmB,AELpB;;ADIO,ADEH,AELJ,SDGgBR,ADEP9C,OAAL,GCFG,ADEYD,CCFQwD,GAApB,CDEiBvD,CCFQ,MDE5B;ACDF,ADEE,SCFKuD,ADEAtD,ICFIuD,EDET,GAAczD,CCFT,CAAW,CAAX,EAAc0D,ADEAxD,MAAnB,KCFK,KAA8BsD,IAAIG,MAAJ,CAAW,CAAX,CAArC;AACD,ACHD;AFMI,SAAKxD,KAAL,GAAa;ACDV,ADEDC,SCFU4C,KDEF,EADG,OCDV,CAAwBY,OAAxB,EAAiCC,QAAjC,EAA2CC,KAA3C,EAAkD;AACvD,ADEIzD,MCFE0D,OAAOhB,KDEG,MCFQc,QAAX,CAAb;AACAD,ADDe,KAAb,KCCMI,KAAR,CAAc,WAAWD,IAAzB,IAAiCD,KAAjC;AACAF,ADEC,UCFOI,KAAR,CAAc,QAAQD,IAAtB,IAA8BD,KAA9B;AACAF,UAAQI,KAAR,CAAc,OAAOD,IAArB,IAA6BD,KAA7B;AACAF,UAAQI,KAAR,CAAc,MAAMD,IAApB,IAA4BD,KAA5B;AACD,ACTD;+BFUa,CAAE;ACCR,SAASb,aAAT,CAAuBgB,SAAvB,EAAkCC,GAAlC,EAAuC;AAC5C,ICTWG,KDSJ,aCTIA;ADUTF,SAAKf,KAAKC,KAAL,CAAWa,MAAMD,KDDb3D,ICCJ,CADA,KDAc;ACEnB8D,ADDA7D,SCCK6C,IDDE5C,CCCG6C,IDDV,CCCK,ADDQ,CCCGa,IDDEhE,ECCI+D,IDDT,CAAYxD,ICCpB,GDDQ,CAAoB,iBAApB,CAAb;ACDK,ACRP,GDQA,gBCRYT,IAAZ,EAAkB;ADYnB,ADDG,AEXgB;AFYhB,UAAMU,iBAAiBC,KAAKC,SAAL,CAAe;ACEnC,ADDDX,AEbc,SDcJiD,QDDD,KCCR,ADDajD,CCCUgE,MDFY,GCEnC,EAAkCG,GAAlC,EAAuCD,GAAvC,EAA4C,sECTzCnE,IALU;ADelB,ADDIE,AEbF,SDcKkE,MAAMH,CDDD,KAAK/D,GCCV,GAAkBiE,ADHe,GCGxC;AACD,ADDK/D,gBAAQ,KAAKD,KAAL,CAAWC;AAHiB,OAAf,CAAvB;;AAMA,AEXA,UAAKD,KAAL,GAAawC,OAAOC,MAAP,CAAc,MAAKzC,KAAnB,EAA0B;AFYvCU,AEXET,cFWMU,AEXE,EAAEsD,CFWZ,CAAY,GEXK,IAAP,EAAaD,KAAK,IFW5B,AEXU,EFWsBzD,cAAhC;AEZuC,KAA1B,CAAb;AFcA,WAAKK,QAAL,CAAc,EAAEV,YAAY,IAAd,EAAd,EAAoCC,QAApC;AACD,AEXC,UAAK2C,aAAL,GAAqBA,oBAAcqB,IAAd,CAAmB,IAAnB,EAAyB,MAAKrE,OAAL,CAAasE,IAAtC,CAArB;AACA,UAAKrB,aAAL,GAAqBA,oBAAcoB,IAAd,CAAmB,IAAnB,EAAyB,MAAKrE,OAAL,CAAasE,IAAtC,CAArB;;AAEA,UAAKC,WAAL,GAAmB,IFUb,EEVkBA,WAAL,CAAiBF,IAAjB,OAAnB;AFWA,AEVA,UAAKG,CFUAzD,QAAL,GAAgBC,EEVhB,GAAsB,IFUGC,EEVEuD,WFUX,CAAuB,EEVjB,CAAoBH,IAApB,EFUN,CAAhB,IEVA;AFWA,WAAKnD,UAAL;AACD,AEVC;AACA,UAAKuD,IAAL,GAAYjD,MAAM,MAAKxB,OAAL,CAAa0E,IAAb,GAAoB,MAAK1E,OAAL,CAAasE,IAAvC,EACTK,IADS,CACJ,IADI,EACE;AADF,KAETC,GAFS,CAEL,UAACC,CAAD,EAAIZ,GAAJ,EAAY;AACf,UAAMa,SAAS,MAAK9B,OFQd7B,IAAIC,EERK,CAAmB6C,GAAnB,CFQE,AERjB;AFQiB,AEPjB,aAAO,IAAIc,IAAJ,CAASD,OAAOX,GAAhB,EAAqBW,OAAOZ,GAA5B,CAAP;AACD,KALS,CAAZ;AFYA,UAAI9C,iBAAiBC,WAAjB,IAAgCD,iBAAiBE,IAArD,EAA2D;AACzDH,AENF,WFMKI,WAAH,CAAeH,KAAf;AACD,AEND,OFIA,GEJKpB,GFME,IAAIoB,AENX,CAAa4D,OAAb,CAAqBvD,OAArB,CFM4BD,AENC,KFMtB,EAA4B,MEND;AFOhCJ,AENA,cFMMK,OAAN,CAAc,aAAK;AACjB,AENF,UAAMwC,MFMCvC,AENK,MAAKuB,KFMf,CAAiB9B,EAAjB,EAAqBQ,CAArB,EENU,CAAmBsD,EAAE,CAAF,IAAO,CAA1B,EAA6BA,EAAE,CAAF,IAAO,CAApC,CAAZ;AFOC,AEND,SFIA,GEJKR,IAAL,CAAUR,GAAV,EAAeiB,UAAf,GAA4BD,EAAE,CAAF,CAA5B;AFOD,AENA,KAJD,EFMO,MAIA;AACL9D,WAAGS,SAAH,GAAeR,SAAS,EAAxB;AACD,AEND,UAAK+D,KAAL;AFOD,AEvCiB;AAiCjB;;kCFQatD,MAAMC,IAAIV,OAA+B;AAAA,UAAxBW,MAAwB,uEAAf,KAAKhB,QAAU;mCENxC;AFOb,AENA,UFMMiB,AENF,CAAC,KAAKoD,EFMIpE,KENT,EAAL,EFMuBiB,AENF,aFMP,CAAuBJ,IAAvB,CAAd;AACAG,AENA,WAAKqD,CFMCvD,EAAN,GAAWA,EAAX,EENA;AACD;AFOC,WAAKJ,WAAL,CAAiBM,KAAjB,EAAwBZ,KAAxB;;AAEA,UAAMc,QAAQlB,SAASC,KEPbqE,OAAOC,CFOH,KEPS,EFOkBzD,EAA3B,CAAd;AACA,AEPA,UFOII,AEPA,KFOJ,AEPSlC,EFOEkC,KEPP,CFOaC,AEPAqD,KAAb,KFOO,AEPgB,CFOCpD,UEP5B,CFOW,CAA6BF,AEPA,KFO7B;AERY,UAEfiC,GAFe,GAEFoB,IAFE,CAEfpB,GAFe;AFUvB,AEVuB,UFUnBpC,AERSmC,GAFU,GFUvB,AERqBqB,EFQT,EEVW,CAEVrB,GAFU;AFWrBnC,eAAOR,WAAP,CAAmBS,KAAnB;AACD,AETD,WAAKwC,cAAL,CAAoB,IAApB,EAA0B,EAAEL,QAAF,EAAOD,QAAP,EAA1B;AACD;AFUC,aAAOlC,KAAP;AACD;mCETcsD,OAAOG,WAAW;AAC/B,UAAI,CAAC,KAAKC,aAAL,EAAL,EAA2B;AADI,UAEvBvF,MAFuB,GAEZ,KAAKD,KAFO,CAEvBC,GFSG,GEXoB;AFY/B,WAAKY,QAAL,CAAcsB,SAAd,GAA0B,EAA1B;AACA,AEVA,UAAIiD,CFUChD,QEVQ,CAAC,IFUd,CAAmB,AEVN,EAAQ,EFUrB,EAAyB,CEVZ,EAAeqD,OAAf,CAAuBL,CFUpC,EAAuC,GEVGM,EFUE3F,IEVR,CAAa4F,CFUV,CAAYtD,EEVtC,IAA4C,CAAC,CFUnB,AEVvC,CFU4D,CEVC,SFUtB,CAAvC;AACD,AEVGpC,eAAOmF,MAAMM,MAAN,CAAaC,IAApB,IAA4BP,MAAMM,MAAN,CAAa/B,KAAzC;AACD;AACD,WAAK/C,QAAL,CAAc,EAAEX,QAAQmF,QAAQnF,MAAR,GAAiBsF,SAA3B,EAAd;AACD,6BFSQjD,UAAUnC,UAAU;AAC3B,UAAMoC,WAAW,KAAKvC,KAAtB;AACA,WAAKA,KAAL,GAAawC,OAAOC,MAAP,CAAc,EAAd,EAAkBF,QAAlB,EAA4BD,QAA5B,CAAb;AACA,UAAI,OAAOnC,QAAP,KAAoB,AEVhB,UFUR,EAAoCA,WAApC,KACK,KAAKuC,UAAL;AACN,AEZS,mBACuB,KAAK1C,KAD5B;AAAA,UACAC,MADA,UACAA,MADA;AAAA,UACQC,UADR,UACQA,UADR;iCFcG,CAAE;AEZb,aAAO,CAACA,UAAD,IAAeD,OAAOgE,GAAP,KAAe,IAA9B,IAAsChE,OAAO+D,GAAP,KAAe,IAA5D;AACD;;;oCAEe;AAAA,UACN9D,UADM,GACS,KAAKF,KADd,CACNE,UADM;;AAEd,aAAO,CAACA,UAAR;AACD;;;iCAEY;AACX;;AAEA,WAAK0F,YAAL;AACA,WAAKC,aAAL;AACD;;;oCAEe;AACd,WAAKC,gBAAL,CAAsBC,QAAtB,GAAiC,CAAC,KAAKb,OAAL,EAAlC;AACD;;;mCAEc;AAAA,UACLjF,MADK,GACM,KAAKD,KADX,CACLC,MADK;;;AAGb,WAAK+F,QAAL,CAAcrC,KAAd,GAAsB1D,OAAOgE,GAA7B;AACA,WAAK+B,QAAL,CAAcD,QAAd,GACE,CAAC,KAAKP,aAAL,EAAD,IAAyB,KAAK1F,OAAL,CAAawF,KAAb,KAAuB,YADlD;;AAGA,WAAKW,QAAL,CAActC,KAAd,GAAsB1D,OAAO+D,GAA7B;AACA,WAAKiC,QAAL,CAAcF,QAAd,GACE,CAAC,KAAKP,aAAL,EAAD,IAAyB,KAAK1F,OAAL,CAAawF,KAAb,KAAuB,YADlD;AAED;;;iCAEY;AACX;;AAEA,WAAKlD,aAAL,CACE,GADF,EAEE,mBAFF,EAGE,KAAKrC,MAAL,CAAYsC,QAAZ,CAAqB,iBAArB,CAHF;AAKA,WAAKD,aAAL,CAAmB,KAAnB,EAA0B,eAA1B,EAA2C,KAAK8D,cAAL,EAA3C;AACA,WAAK9D,aAAL,CAAmB,KAAnB,EAA0B,YAA1B,EAAwC,KAAK+D,UAAL,EAAxC;AACA,WAAK/D,aAAL,CAAmB,GAAnB,EAAwB,gBAAxB,EAA0C,CACxCtB,SAASsF,cAAT,CAAwB,KAAKtG,OAAL,CAAauG,QAArC,CADwC,EAExCvF,SAASiB,aAAT,CAAuB,IAAvB,CAFwC,EAGxCjB,SAASsF,cAAT,CACE,KAAKrG,MAAL,CAAYsC,QAAZ,CAAqB,4BAArB,CADF,CAHwC,CAA1C;AAOA,WAAKD,aAAL,CACE,GADF,EAEE,mBAFF,EAGE,KAAKrC,MAAL,CAAYO,OAAZ,CAAoB,kBAApB,CAHF;AAKA,WAAK8B,aAAL,CAAmB,KAAnB,EAA0B,aAA1B,EAAyC,KAAKkE,eAAL,EAAzC;;AAEA;AACA,WAAKR,gBAAL,GAAwB,KAAK1D,aAAL,CACtB,QADsB,EAEtB,YAFsB,EAGtB,KAAKrC,MAAL,CAAYO,OAAZ,CAAoB,iBAApB,CAHsB,CAAxB;AAKA,WAAKwF,gBAAL,CAAsBS,OAAtB,GAAgC,KAAKC,YAAL,CAAkBrC,IAAlB,CAAuB,IAAvB,CAAhC;AACA,WAAK2B,gBAAL,CAAsBC,QAAtB,GAAiC,IAAjC;;AAEA,WAAKrD,UAAL;AACD;;;qCAEgB;AACf,UAAM+D,KAAK3F,SAASiB,aAAT,CAAuB,IAAvB,CAAX;AACA,WAAKjC,OAAL,CAAa4G,QAAb,CAAsBnF,OAAtB,CAA8B,gBAAQ;AACpC,YAAMN,KAAKH,SAASiB,aAAT,CAAuB,IAAvB,CAAX;AACAd,WAAGS,SAAH,GAAeiF,IAAf;AACAF,WAAGpF,WAAH,CAAeJ,EAAf;AACD,OAJD;AAKA,aAAOwF,EAAP;AACD;;;iCAEY;AAAA;;AACX,UAAMG,eAAe,KAAKrC,IAAL,CAAUG,GAAV,CAAc;AAAA,eACjCW,KAAKrE,UAAL,CAAgB;AACd6F,mBAAS,OAAKxC;AADA,SAAhB,CADiC;AAAA,OAAd,CAArB;;AAMA,aAAO,KAAKjC,aAAL,CAAmB,KAAnB,EAA0B,aAA1B,EAAyCwE,YAAzC,EAAuD,IAAvD,CAAP;AACD;;;sCAEiB;AAAA;;AAChB,WAAKZ,QAAL,GAAgBlF,SAASiB,aAAT,CAAuB,OAAvB,CAAhB;AACA,WAAKkE,QAAL,GAAgBnF,SAASiB,aAAT,CAAuB,OAAvB,CAAhB;;AAEA,OAAC,KAAKiE,QAAN,EAAgB,KAAKC,QAArB,EAA+B1E,OAA/B,CAAuC,aAAK;AAC1CE,UAAEE,IAAF,GAAS,QAAT;AACAF,UAAEqF,IAAF,GAAS,CAAT;AACArF,UAAEsF,GAAF,GAAQ,CAAR;AACAtF,UAAEsE,QAAF,GAAa,OAAKjG,OAAL,CAAawF,KAAb,KAAuB,YAApC;AACA7D,UAAEuF,QAAF,GAAa,OAAK1C,cAAlB;AACA7C,UAAEwF,OAAF,GAAY,OAAK3C,cAAjB;AACD,OAPD;;AASA,WAAK0B,QAAL,CAAckB,GAAd,GAAoB,KAAKpH,OAAL,CAAa0E,IAAjC;AACA,WAAKwB,QAAL,CAAcL,IAAd,GAAqB,KAArB;AACA,WAAKM,QAAL,CAAciB,GAAd,GAAoB,KAAKpH,OAAL,CAAasE,IAAjC;AACA,WAAK6B,QAAL,CAAcN,IAAd,GAAqB,KAArB;;AAEA,aAAO,KAAKvD,aAAL,CACL,MADK,EAEL,WAFK,EAGL,CAAC,KAAK4D,QAAN,EAAgB,KAAKC,QAArB,CAHK,EAIL,IAJK,CAAP;AAMD;;;;EAzK0BrG;;IA4KvBiF;AACJ,gBAAYsC,KAAZ,EAAmBC,KAAnB,EAA6C;AAAA,QAAnBpC,UAAmB,uEAAN,IAAM;;AAAA;;AAC3C;;;;;AAKA,SAAKhB,GAAL,GAAWoD,QAAQ,CAAnB,CAN2C,CAMrB;AACtB,SAAKnD,GAAL,GAAWkD,QAAQ,CAAnB,CAP2C,CAOrB;AACtB,SAAKnC,UAAL,GAAkBA,UAAlB;AACD;;;;qCAEuB;AAAA;;AAAA,UAAX6B,OAAW,QAAXA,OAAW;;AACtB,UAAM5F,KAAKH,SAASiB,aAAT,CAAuB,KAAvB,CAAX;AACAd,SAAGoG,SAAH,GAAe,MAAf;;AAEA,UAAI,KAAKrC,UAAT,EAAqB/D,GAAGqG,SAAH,CAAaC,GAAb,CAAiB,KAAKvC,UAAtB,EAArB,KACK;AACH/D,WAAGqG,SAAH,CAAaC,GAAb,CAAiB,OAAjB;AACAtG,WAAGS,SAAH,GAAe,GAAf;AACD;;AAEDT,SAAG4C,KAAH,CAAS2D,UAAT,GAAsB,KAAKxD,GAA3B;AACA/C,SAAG4C,KAAH,CAAS4D,OAAT,GAAmB,KAAKxD,GAAxB;;AAEA,UAAI,KAAKA,GAAL,KAAa,CAAjB,EACEhD,GAAGI,WAAH,CAAe,KAAKqG,oBAAL,CAA0B,KAA1B,EAAiC,KAAK1D,GAAtC,CAAf;;AAEF,UAAI,KAAKA,GAAL,KAAa,CAAjB,EACE/C,GAAGI,WAAH,CAAe,KAAKqG,oBAAL,CAA0B,KAA1B,EAAiC,KAAKzD,GAAtC,CAAf;;AAEFhD,SAAGsF,OAAH,GAAa;AAAA,eAAKM,QAAQc,CAAR,EAAW,MAAX,CAAL;AAAA,OAAb;AACA,aAAO1G,EAAP;AACD;;;yCAEoBU,MAAMiG,QAAQ;AACjC,UAAM3G,KAAKH,SAASiB,aAAT,CAAuB,MAAvB,CAAX;AACAd,SAAGoG,SAAH,GAAe,gBAAf;AACApG,SAAGqG,SAAH,CAAaC,GAAb,CAAiB5F,IAAjB;AACAV,SAAGS,SAAH,GAAekG,MAAf;AACA,aAAO3G,EAAP;AACD;;;;;;AAGHb,OAAO8D,OAAP,GAAiBA,OAAjB","file":"Puzzle2.4d971719.map","sourceRoot":"../src","sourcesContent":["export class BasePuzzle {\n  /**\n   * @param {object} data\n   */\n\n  constructor(data) {\n    this.setting = data.setting;\n    this.locale = data.locale;\n\n    this.state = {\n      answer: \"\",\n      answerSent: false\n    };\n  }\n\n  onSubmit() {}\n\n  sendAnswer(callback) {\n    window.alert(this.locale.general[\"str-answer-sent\"]);\n\n    // TODO: Actually send \"completeAnswer\" to server\n    const completeAnswer = JSON.stringify({\n      setting: this.setting,\n      locale: this.locale,\n      answer: this.state.answer\n    });\n\n    // eslint-disable-next-line no-console\n    console.log(\"Complete answer:\", completeAnswer);\n\n    this.setState({ answerSent: true }, callback);\n  }\n\n  setup() {\n    this.parentEl = document.querySelector(\"#puzzle\");\n    this.renderHTML();\n  }\n\n  renderInner(el, inner) {\n    if (inner instanceof HTMLElement || inner instanceof Text) {\n      el.appendChild(inner);\n    } else if (inner instanceof Array) {\n      inner.forEach(i => {\n        this.renderInner(el, i);\n      });\n    } else {\n      el.innerText = inner || \"\";\n    }\n  }\n\n  renderElement(type, id, inner, parent = this.parentEl) {\n    const newEl = document.createElement(type);\n    newEl.id = id;\n\n    this.renderInner(newEl, inner);\n\n    const oldEl = document.querySelector(`#${id}`);\n    if (oldEl) oldEl.parentNode.removeChild(oldEl);\n\n    if (parent) {\n      parent.appendChild(newEl);\n    }\n\n    return newEl;\n  }\n\n  renderHTML() {\n    this.parentEl.innerHTML = \"\";\n    this.renderElement(\"h1\", \"puzzleName\", this.locale.specific[\"str-name\"]);\n  }\n\n  setState(newState, callback) {\n    const oldState = this.state;\n    this.state = Object.assign({}, oldState, newState);\n    if (typeof callback === \"function\") callback();\n    else this.updateView();\n  }\n\n  updateView() {}\n}\n","export function randomChoice(arr) {\n  return arr[Math.floor(Math.random() * arr.length)];\n}\n\nexport function capitalize(str) {\n  return str.charAt(0).toUpperCase() + str.substr(1);\n}\n\nexport function setVendorStyle(element, property, value) {\n  const prop = capitalize(property);\n  element.style[\"webkit\" + prop] = value;\n  element.style[\"moz\" + prop] = value;\n  element.style[\"ms\" + prop] = value;\n  element.style[\"o\" + prop] = value;\n}\n\nexport function indexToRowCol(numOfCols, idx) {\n  return {\n    col: Math.floor(idx % numOfCols),\n    row: Math.floor(idx / numOfCols)\n  };\n}\n\nexport function rowColToIndex(numOfCols, row, col) {\n  return row * numOfCols + col;\n}\n","import { BasePuzzle } from \"./BasePuzzle\";\nimport { rowColToIndex, indexToRowCol } from \"../lib/util\";\n\nimport \"./Puzzle2.css\";\n\n/**\n * possible input types: text-only, mouse-only, text-or-mouse\n */\nexport class Puzzle2 extends BasePuzzle {\n  constructor(data) {\n    /**\n     * @param {object} data\n     */\n\n    super(data);\n\n    this.state = Object.assign(this.state, {\n      answer: { row: null, col: null }\n    });\n\n    this.indexToRowCol = indexToRowCol.bind(null, this.setting.cols);\n    this.rowColToIndex = rowColToIndex.bind(null, this.setting.cols);\n\n    this.onSpotClick = this.onSpotClick.bind(this);\n    this.onAnswerChange = this.onAnswerChange.bind(this);\n\n    // Init an array with empty Spot in each element\n    this.grid = Array(this.setting.rows * this.setting.cols)\n      .fill(null) // Fill with nulls so we can use map()\n      .map((_, idx) => {\n        const rowCol = this.indexToRowCol(idx);\n        return new Spot(rowCol.row, rowCol.col);\n      });\n\n    // Replace Spot objectType with received parameters\n    this.setting.objects.forEach(s => {\n      // setting indexes are 1-indexed so we need to substract 1\n      const idx = this.rowColToIndex(s[0] - 1, s[1] - 1);\n      this.grid[idx].objectType = s[2];\n    });\n\n    this.setup();\n  }\n\n  onSendAnswer() {\n    if (!this.canSend()) return;\n    this.sendAnswer();\n  }\n\n  onSpotClick(event, spot) {\n    if (this.setting.input === \"text-only\") return;\n    const { row, col } = spot;\n    this.onAnswerChange(null, { row, col });\n  }\n\n  onAnswerChange(event, newAnswer) {\n    if (!this.canEditAnswer()) return;\n    const { answer } = this.state;\n    if (event && [\"row\", \"col\"].indexOf(event.target.name) > -1) {\n      answer[event.target.name] = event.target.value;\n    }\n    this.setState({ answer: event ? answer : newAnswer });\n  }\n\n  canSend() {\n    const { answer, answerSent } = this.state;\n    return !answerSent && answer.row !== null && answer.col !== null;\n  }\n\n  canEditAnswer() {\n    const { answerSent } = this.state;\n    return !answerSent;\n  }\n\n  updateView() {\n    super.updateView();\n\n    this.updateAnswer();\n    this.updateButtons();\n  }\n\n  updateButtons() {\n    this.sendAnswerButton.disabled = !this.canSend();\n  }\n\n  updateAnswer() {\n    const { answer } = this.state;\n\n    this.rowInput.value = answer.row;\n    this.rowInput.disabled =\n      !this.canEditAnswer() || this.setting.input === \"mouse-only\";\n\n    this.colInput.value = answer.col;\n    this.colInput.disabled =\n      !this.canEditAnswer() || this.setting.input === \"mouse-only\";\n  }\n\n  renderHTML() {\n    super.renderHTML();\n\n    this.renderElement(\n      \"p\",\n      \"puzzleDescription\",\n      this.locale.specific[\"str-description\"]\n    );\n    this.renderElement(\"div\", \"puzzleExample\", this.renderExamples());\n    this.renderElement(\"div\", \"puzzleGrid\", this.renderGrid());\n    this.renderElement(\"p\", \"puzzleQuestion\", [\n      document.createTextNode(this.setting.question),\n      document.createElement(\"br\"),\n      document.createTextNode(\n        this.locale.specific[\"str-input-type-description\"]\n      )\n    ]);\n    this.renderElement(\n      \"p\",\n      \"puzzleAnswerLabel\",\n      this.locale.general[\"str-answer-label\"]\n    );\n    this.renderElement(\"div\", \"puzzleInput\", this.renderInputForm());\n\n    // Render \"Lähetä\"-button\n    this.sendAnswerButton = this.renderElement(\n      \"button\",\n      \"puzzleSend\",\n      this.locale.general[\"str-send-answer\"]\n    );\n    this.sendAnswerButton.onclick = this.onSendAnswer.bind(this);\n    this.sendAnswerButton.disabled = true;\n\n    this.updateView();\n  }\n\n  renderExamples() {\n    const ul = document.createElement(\"ul\");\n    this.setting.examples.forEach(text => {\n      const el = document.createElement(\"li\");\n      el.innerText = text;\n      ul.appendChild(el);\n    });\n    return ul;\n  }\n\n  renderGrid() {\n    const gridElements = this.grid.map(spot =>\n      spot.renderHTML({\n        onClick: this.onSpotClick\n      })\n    );\n\n    return this.renderElement(\"div\", \"gridWrapper\", gridElements, null);\n  }\n\n  renderInputForm() {\n    this.rowInput = document.createElement(\"input\");\n    this.colInput = document.createElement(\"input\");\n\n    [this.rowInput, this.colInput].forEach(i => {\n      i.type = \"number\";\n      i.step = 1;\n      i.min = 1;\n      i.disabled = this.setting.input === \"mouse-only\";\n      i.onchange = this.onAnswerChange;\n      i.onkeyup = this.onAnswerChange;\n    });\n\n    this.rowInput.max = this.setting.rows;\n    this.rowInput.name = \"row\";\n    this.colInput.max = this.setting.cols;\n    this.colInput.name = \"col\";\n\n    return this.renderElement(\n      \"form\",\n      \"inputForm\",\n      [this.rowInput, this.colInput],\n      null\n    );\n  }\n}\n\nclass Spot {\n  constructor(row_0, col_0, objectType = null) {\n    /**\n     * @param {number} row_0 - 0-indexed row\n     * @param {number} col_0 - 0-indexed col\n     * @param {number} objectType\n     */\n    this.col = col_0 + 1; // Coordinate in 1-indexed system\n    this.row = row_0 + 1; // Coordinate in 1-indexed system\n    this.objectType = objectType;\n  }\n\n  renderHTML({ onClick }) {\n    const el = document.createElement(\"div\");\n    el.className = \"spot\";\n\n    if (this.objectType) el.classList.add(this.objectType);\n    else {\n      el.classList.add(\"empty\");\n      el.innerText = \"•\";\n    }\n\n    el.style.gridColumn = this.col;\n    el.style.gridRow = this.row;\n\n    if (this.row === 1)\n      el.appendChild(this.renderIndexingNumber(\"col\", this.col));\n\n    if (this.col === 1)\n      el.appendChild(this.renderIndexingNumber(\"row\", this.row));\n\n    el.onclick = e => onClick(e, this);\n    return el;\n  }\n\n  renderIndexingNumber(type, number) {\n    const el = document.createElement(\"span\");\n    el.className = \"indexingNumber\";\n    el.classList.add(type);\n    el.innerText = number;\n    return el;\n  }\n}\n\nwindow.Puzzle2 = Puzzle2;\n"]}