{"version":3,"sources":["puzzles/BasePuzzle.js","lib/util.js","puzzles/Puzzle2.js"],"names":["BasePuzzle","data","setting","locale","state","answer","answerSent","callback","window","alert","general","completeAnswer","JSON","stringify","console","log","setState","parentEl","document","querySelector","renderHTML","el","inner","HTMLElement","Text","appendChild","Array","forEach","renderInner","i","innerText","type","id","parent","newEl","createElement","oldEl","parentNode","removeChild","innerHTML","renderElement","specific","newState","oldState","Object","assign","updateView","randomChoice","capitalize","setVendorStyle","indexToRowCol","rowColToIndex","arr","Math","floor","random","length","str","charAt","toUpperCase","substr","element","property","value","prop","style","numOfCols","idx","col","row","Puzzle2","bind","cols","onSpotClick","onAnswerChange","grid","rows","fill","map","_","rowCol","Spot","objects","s","objectType","setup","canSend","sendAnswer","event","spot","input","newAnswer","canEditAnswer","indexOf","target","name","updateAnswer","updateButtons","sendAnswerButton","disabled","rowInput","colInput","renderExamples","renderGrid","createTextNode","question","renderInputForm","onclick","onSendAnswer","ul","examples","text","gridElements","onClick","step","min","onchange","onkeyup","max","row_0","col_0","className","classList","add","gridColumn","gridRow","renderIndexingNumber","e","number"],"mappings":"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","file":"Puzzle2.65158abb.map","sourceRoot":"../src","sourcesContent":["export class BasePuzzle {\n  /**\n   * @param {object} data\n   */\n\n  constructor(data) {\n    this.setting = data.setting;\n    this.locale = data.locale;\n\n    this.state = {\n      answer: \"\",\n      answerSent: false\n    };\n  }\n\n  onSubmit() {}\n\n  sendAnswer(callback) {\n    window.alert(this.locale.general[\"str-answer-sent\"]);\n\n    // TODO: Actually send \"completeAnswer\" to server\n    const completeAnswer = JSON.stringify({\n      setting: this.setting,\n      locale: this.locale,\n      answer: this.state.answer\n    });\n\n    // eslint-disable-next-line no-console\n    console.log(\"Complete answer:\", completeAnswer);\n\n    this.setState({ answerSent: true }, callback);\n  }\n\n  setup() {\n    this.parentEl = document.querySelector(\"#puzzle\");\n    this.renderHTML();\n  }\n\n  renderInner(el, inner) {\n    if (inner instanceof HTMLElement || inner instanceof Text) {\n      el.appendChild(inner);\n    } else if (inner instanceof Array) {\n      inner.forEach(i => {\n        this.renderInner(el, i);\n      });\n    } else {\n      el.innerText = inner || \"\";\n    }\n  }\n\n  renderElement(type, id, inner, parent = this.parentEl) {\n    const newEl = document.createElement(type);\n    newEl.id = id;\n\n    this.renderInner(newEl, inner);\n\n    const oldEl = document.querySelector(`#${id}`);\n    if (oldEl) oldEl.parentNode.removeChild(oldEl);\n\n    if (parent) {\n      parent.appendChild(newEl);\n    }\n\n    return newEl;\n  }\n\n  renderHTML() {\n    this.parentEl.innerHTML = \"\";\n    this.renderElement(\"h1\", \"puzzleName\", this.locale.specific[\"str-name\"]);\n  }\n\n  setState(newState, callback) {\n    const oldState = this.state;\n    this.state = Object.assign({}, oldState, newState);\n    if (typeof callback === \"function\") callback();\n    else this.updateView();\n  }\n\n  updateView() {}\n}\n","export function randomChoice(arr) {\n  return arr[Math.floor(Math.random() * arr.length)];\n}\n\nexport function capitalize(str) {\n  return str.charAt(0).toUpperCase() + str.substr(1);\n}\n\nexport function setVendorStyle(element, property, value) {\n  const prop = capitalize(property);\n  element.style[\"webkit\" + prop] = value;\n  element.style[\"moz\" + prop] = value;\n  element.style[\"ms\" + prop] = value;\n  element.style[\"o\" + prop] = value;\n}\n\nexport function indexToRowCol(numOfCols, idx) {\n  return {\n    col: Math.floor(idx % numOfCols),\n    row: Math.floor(idx / numOfCols)\n  };\n}\n\nexport function rowColToIndex(numOfCols, row, col) {\n  return row * numOfCols + col;\n}\n","import { BasePuzzle } from \"./BasePuzzle\";\nimport { rowColToIndex, indexToRowCol } from \"../lib/util\";\n\nimport \"./Puzzle2.css\";\n\nexport class Puzzle2 extends BasePuzzle {\n  constructor(data) {\n    /**\n     * @param {object} data\n     */\n\n    super(data);\n\n    this.state = Object.assign(this.state, {\n      answer: { row: null, col: null }\n    });\n\n    this.indexToRowCol = indexToRowCol.bind(null, this.setting.cols);\n    this.rowColToIndex = rowColToIndex.bind(null, this.setting.cols);\n\n    this.onSpotClick = this.onSpotClick.bind(this);\n    this.onAnswerChange = this.onAnswerChange.bind(this);\n\n    // Init an array with empty Spot in each element\n    this.grid = Array(this.setting.rows * this.setting.cols)\n      .fill(null) // Fill with nulls so we can use map()\n      .map((_, idx) => {\n        const rowCol = this.indexToRowCol(idx);\n        return new Spot(rowCol.row, rowCol.col);\n      });\n\n    // Replace Spot objectType with received parameters\n    this.setting.objects.forEach(s => {\n      // setting indexes are 1-indexed so we need to substract 1\n      const idx = this.rowColToIndex(s[0] - 1, s[1] - 1);\n      this.grid[idx].objectType = s[2];\n    });\n\n    this.setup();\n  }\n\n  onSendAnswer() {\n    if (!this.canSend()) return;\n    this.sendAnswer();\n  }\n\n  onSpotClick(event, spot) {\n    if (this.setting.input === \"text-only\") return;\n    const { row, col } = spot;\n    this.onAnswerChange(null, { row, col });\n  }\n\n  onAnswerChange(event, newAnswer) {\n    if (!this.canEditAnswer()) return;\n    const { answer } = this.state;\n    if (event && [\"row\", \"col\"].indexOf(event.target.name) > -1) {\n      answer[event.target.name] = event.target.value;\n    }\n    this.setState({ answer: event ? answer : newAnswer });\n  }\n\n  canSend() {\n    const { answer, answerSent } = this.state;\n    return !answerSent && answer.row !== null && answer.col !== null;\n  }\n\n  canEditAnswer() {\n    const { answerSent } = this.state;\n    return !answerSent;\n  }\n\n  updateView() {\n    super.updateView();\n\n    this.updateAnswer();\n    this.updateButtons();\n  }\n\n  updateButtons() {\n    this.sendAnswerButton.disabled = !this.canSend();\n  }\n\n  updateAnswer() {\n    const { answer } = this.state;\n\n    this.rowInput.value = answer.row;\n    this.rowInput.disabled =\n      !this.canEditAnswer() || this.setting.input === \"mouse-only\";\n\n    this.colInput.value = answer.col;\n    this.colInput.disabled =\n      !this.canEditAnswer() || this.setting.input === \"mouse-only\";\n  }\n\n  renderHTML() {\n    super.renderHTML();\n\n    this.renderElement(\n      \"p\",\n      \"puzzleDescription\",\n      this.locale.specific[\"str-description\"]\n    );\n    this.renderElement(\"div\", \"puzzleExample\", this.renderExamples());\n    this.renderElement(\"div\", \"puzzleGrid\", this.renderGrid());\n    this.renderElement(\"p\", \"puzzleQuestion\", [\n      document.createTextNode(this.setting.question),\n      document.createElement(\"br\"),\n      document.createTextNode(\n        this.locale.specific[\"str-input-types\"][this.setting.input]\n      )\n    ]);\n    this.renderElement(\n      \"p\",\n      \"puzzleAnswerLabel\",\n      this.locale.general[\"str-answer-label\"]\n    );\n    this.renderElement(\"div\", \"puzzleInput\", this.renderInputForm());\n\n    // Render \"Lähetä\"-button\n    this.sendAnswerButton = this.renderElement(\n      \"button\",\n      \"puzzleSend\",\n      this.locale.general[\"str-send-answer\"]\n    );\n    this.sendAnswerButton.onclick = this.onSendAnswer.bind(this);\n    this.sendAnswerButton.disabled = true;\n\n    this.updateView();\n  }\n\n  renderExamples() {\n    const ul = document.createElement(\"ul\");\n    this.setting.examples.forEach(text => {\n      const el = document.createElement(\"li\");\n      el.innerText = text;\n      ul.appendChild(el);\n    });\n    return ul;\n  }\n\n  renderGrid() {\n    const gridElements = this.grid.map(spot =>\n      spot.renderHTML({\n        onClick: this.onSpotClick\n      })\n    );\n\n    return this.renderElement(\"div\", \"gridWrapper\", gridElements, null);\n  }\n\n  renderInputForm() {\n    this.rowInput = document.createElement(\"input\");\n    this.colInput = document.createElement(\"input\");\n\n    [this.rowInput, this.colInput].forEach(i => {\n      i.type = \"number\";\n      i.step = 1;\n      i.min = 1;\n      i.disabled = this.setting.input === \"mouse-only\";\n      i.onchange = this.onAnswerChange;\n      i.onkeyup = this.onAnswerChange;\n    });\n\n    this.rowInput.max = this.setting.rows;\n    this.rowInput.name = \"row\";\n    this.colInput.max = this.setting.cols;\n    this.colInput.name = \"col\";\n\n    return this.renderElement(\n      \"form\",\n      \"inputForm\",\n      [this.rowInput, this.colInput],\n      null\n    );\n  }\n}\n\nclass Spot {\n  constructor(row_0, col_0, objectType = null) {\n    /**\n     * @param {number} row_0 - 0-indexed row\n     * @param {number} col_0 - 0-indexed col\n     * @param {number} objectType\n     */\n    this.col = col_0 + 1; // Coordinate in 1-indexed system\n    this.row = row_0 + 1; // Coordinate in 1-indexed system\n    this.objectType = objectType;\n  }\n\n  renderHTML({ onClick }) {\n    const el = document.createElement(\"div\");\n    el.className = \"spot\";\n\n    if (this.objectType) el.classList.add(this.objectType);\n    else {\n      el.classList.add(\"empty\");\n      el.innerText = \"•\";\n    }\n\n    el.style.gridColumn = this.col;\n    el.style.gridRow = this.row;\n\n    if (this.row === 1)\n      el.appendChild(this.renderIndexingNumber(\"col\", this.col));\n\n    if (this.col === 1)\n      el.appendChild(this.renderIndexingNumber(\"row\", this.row));\n\n    el.onclick = e => onClick(e, this);\n    return el;\n  }\n\n  renderIndexingNumber(type, number) {\n    const el = document.createElement(\"span\");\n    el.className = \"indexingNumber\";\n    el.classList.add(type);\n    el.innerText = number;\n    return el;\n  }\n}\n\nwindow.Puzzle2 = Puzzle2;\n"]}