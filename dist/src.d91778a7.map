{"version":3,"sources":["lib/util.js","puzzles/BasePuzzle.js","puzzles/Puzzle1.js","puzzles/Puzzle2.js","puzzles/Puzzle3.js","puzzles/index.js","initPuzzle1.js","initPuzzle2.js","initPuzzle3.js","index.js"],"names":["randomChoice","capitalize","setVendorStyle","indexToRowCol","rowColToIndex","arr","Math","floor","random","length","str","charAt","toUpperCase","substr","element","property","value","prop","style","numOfCols","idx","col","row","defaultOptions","BasePuzzle","options","Object","assign","state","answer","answerSent","elementSelectors","parent","callback","window","alert","completeAnswer","JSON","stringify","setting","console","log","setState","parentEl","document","querySelector","renderHTML","el","inner","HTMLElement","Text","appendChild","Array","forEach","renderInner","i","innerText","type","id","newEl","createElement","oldEl","parentNode","removeChild","innerHTML","renderElement","newState","oldState","updateView","Puzzle1","cipherer","Cipherer","characterSet","key","answerCheck","currentCharIdx","ringRotation","selectedCharIdx","submitted","setup","onkeydown","onKeyPress","bind","canSubmit","cipherText","checkMessage","canSend","sendAnswer","canErase","slice","canSelect","e","onPrev","onNext","onSelect","onErase","preventDefault","updateAnswer","updateButtons","updateQuestion","updateRing","rotation","getRingRotation","setTimeout","querySelectorAll","c","classList","add","remove","renderQuestion","renderAnswer","eraseButton","disabled","selectButton","submitButton","sendAnswerButton","renderDescription","renderCipherRing","onclick","onSubmit","onSendAnswer","keyExample","createTextNode","labelText","label","chars","split","map","questionEl","answerText","radius","ring","ringWrapper","prevButton","nextButton","controls","index","keys","exec","factor","parseInt","indexOf","m","cipherChar","join","charToCheck","message","checkCharacter","Puzzle2","cols","onSpotClick","onAnswerChange","grid","rows","fill","_","rowCol","Spot","objects","s","objectType","event","spot","newAnswer","canEditAnswer","target","name","rowInput","input","colInput","renderExamples","renderGrid","question","renderInputForm","ul","examples","text","gridElements","onClick","step","min","onchange","onkeyup","max","row_0","col_0","className","gridColumn","gridRow","renderIndexingNumber","number","Puzzle3","slots","Slot","onChange","draggables","Draggable","d","onresize","updateSlotPositions","backgroundImage","check","slot","draggable","imageEl","widthRatio","offsetWidth","naturalWidth","heightRatio","offsetHeight","naturalHeight","setPosition","renderBackground","draggabblesContainer","renderDraggables","ondragover","ondrop","dataTransfer","getData","getElementById","setSlot","src","backgroundUrl","onload","render","correctDraggable","top","left","position","size","onDraggableChange","width","height","onDragover","onDrop","ondragenter","onDragEnter","ondragleave","onDragLeave","newDraggable","ratios","content","ondragstart","onDragStart","ondragend","onDragEnd","renderContent","minWidth","padding","newSlot","setDraggable","setData","init","possibleSettings","puzzleSetting","possibleMessages","cipherMessage","puzzleOptions","puzzleQuestions","activatePuzzle","activePuzzle","cleanUp"],"mappings":";;;;;;;;QAAgBA,eAAAA;QAIAC,aAAAA;QAIAC,iBAAAA;QAQAC,gBAAAA;QAOAC,gBAAAA;AAvBT,SAASJ,YAAT,CAAsBK,GAAtB,EAA2B;AAChC,SAAOA,IAAIC,KAAKC,KAAL,CAAWD,KAAKE,MAAL,KAAgBH,IAAII,MAA/B,CAAJ,CAAP;AACD,ACFD,IAAMc,iBAAiB;AACrB,sBAAoB,cADC;ADIhB,ACFL,SDEctB,UAAT,CAAoBS,ECFL,CDEf,EAAyB,OCJT;ADKrB,ACFA,ACHF,SFKSA,IAAIC,MAAJ,CAAW,CAAX,ACFY,EDEEC,MCLA,KDKd,KAA8BF,IAAIG,MAAJ,CAAW,CAAX,CAArC;AACD,ACFC,qBAAmB,oBAJE;AAKrB,ACJF,ACDA,gBFKgB,SALO;AKAvB,ANQO,ACFL,SDEcX,MCFD,QDER,CAAwBY,OAAxB,EAAiCC,QAAjC,EAA2CC,KAA3C,EAAkD;AACvD,ACTqB,ACGvB,ACFA,ACDA,CHAA,KDSQC,OAAOhB,WAAWc,QAAX,CAAb;AMRF,ACDA,APUED,UAAQI,KAAR,CAAc,WAAWD,IAAzB,IAAiCD,KAAjC;AACAF,AGRF,ACDA,IHOaU,MDEHN,KAAR,CAAc,OKXPM,CLWeP,CCFXO,GDEX,IAA8BR,KAA9B;ASXF,AHGA,ACFA,APWEF,ACFA,SKPO8O,CNSC1O,GMTV,ENSE,CMTc,ANSA,OAAOD,IAArB,IAA6BD,KAA7B;AMRA,ANSAF,MMTM0D,INSEtD,KAAR,CAAc,KMTO,CNSDD,IAApB,IAA4BD,KAA5B,iBMTA;AGFF,AFCA,ACHA,ARcC,SOXQ4O,IAAT,GAAgB;ADGd,ACFA,MDEMC,ACFAA,mBDEmB,ACFA,CDGvB,ACFA;ADGEpL,ACFAgF,ACLN,AReO,ACFL,SKNS,ANQKtJ,COVJ,EADR,CDEA,SNSG,CAAuBgB,CCFF,QDErB,EAAkCC,GAAlC,EAAuC;AMPxCqG,ACFA4B,APUJ,ACH0B,ACT5B,IAAM9H,IDSQE,CDGL,COVG,EAFR,GNSwB,CKLV,KJJK,iEDSC,EAAI;AQX5B,AHII,ACCEqI,ACLN,AReIzI,AEZF,GIAyB,EAKvB,INOKf,IOVM,CACP,APSMC,AEZA,CKGL,CAAD,EAAI,CAAJ,APSC,CAAWa,COTL,KPSWD,COTlB,CADO,CLHQ,CKKf,CAAC,CAAD,EAAI,CAAJ,APQC,CADA,COPM,UAAP,CAFO,EAGP,CAAC,CAAD,EAAI,CAAJ,EAAO,MAAP,CAHO,EAIP,CAAC,CAAD,EAAI,CAAJ,EAAO,WAAP,CAJO,CAHX;ADOEsD,ACEA+F,APKFlJ,ACLwB,ACP1B,ACFF,ACDA,IDCMC,ACDAA,KEQK,ANOFjB,EOLI,EDHT,CNQUC,IOdV,CPcK,COLa,APKFa,CEXhB,ACHmB,ACDA,KJeGD,SAAjB,sDEdc;AIQjBsG,ACEAsD,APEG,AERP,ACHA,ACDA,GJYA,WOFc,AJTF,ACDA,CGUG,CDFC,GDZT1G,OHQiB,ECJH,CIUP,EAAiB,cAAjB;ADJZ,ACNA,APgBH,ACNG,ACLA,ACHF,ACHqB,CAAvB,EEE2B,ACFA,EDWvB,ACEA,INFK5C,CCJH,MDIF,GAAeC,EEPf,KFOsBC,MAAP,CAAcJ,cAAd,EAA8BE,OAA9B,CAAf,kCCNsB;AOL1B,AHYMgD,ACEAgF,ALNF,ACPmB,CAAvB,QGWW,CCEC,ALLN,EKIF,CDFA,iFJNsB;AIQpBhC,ACEA4B,APIC,ACNH,ACHA,IENS0C,KJeG3L,ACNPwB,CMEG,ALJN,EKEF,ENAA,EKAc,CLAD,KDMV,AIfMmK,CJeiB5K,SAAvB,EAAkCG,GAAlC,EAAuCD,GAAvC,EAA4C,gDEdzB;AIMtB,ACKEyI,ACfN,ARmBE,ACNIjI,ACFF,GIVuB,CHKduH,CGQT,IEdKwG,ARmBAtO,CEPH,GKGS,ACff,CDgBQ,ANHM,CMGL,APGMH,COHP,AChBQ,APYC,EMIL,CAAJ,EAAO,CJVFiI,EHaJ,GOHD,APGmB/H,COJZ,EAEP,APEN,COFO,CAAD,EAAI,CAAJ,EAAO,UAAP,CAFO,EAGP,CAAC,CAAD,EAAI,CAAJ,EAAO,MAAP,CAHO,EAIP,CAAC,CAAD,EAAI,CAAJ,EAAO,WAAP,CAJO,CAHX;ADGEoD,ACMA+F,ACpBJ,ARmBD,ACNK1I,ACVoB,GAJH,GMCf+N,GFcG,ECME,EDPT,ICFA,CNEc,CMOG,MCpBM,CACvB;AFcEpI,ACMAsD,ACnBA+C,APSW,ACEf,AEVA,KHQE,SMUY,CAAC,CDNC,GFZJvL,ACRIgC,IHkBK,GEVrB,EAAqB9C,CGkBP,EAAiB,IHlB/B,CFJqB,CEIS,KIF5B,GDoBY;ADRZ,ACFA,ACREuK,ANWJ,ACRA,ACH8B,GEHL,ACFA,CDEzB,ACFA,OCKW,CACL,EAAEtI,IAAI,CAAN,ALEMnB,EKFG0L,KNUS,ACRxB,EAAmC,WKFF,CAA3B,EAA8BC,KAAK,ENLpB,CMKf,EAAwCC,MAAM,GAA9C,EADK,EACgD;ACJ7D,ADKQ,APWJ,ACDF,ACTmC,MKD3BzK,ELCajC,CFUdM,COXK,CAAN,EAASkM,ELCoB,GDSnB,ODCd,GAAwBvM,GOXO,CAA3B,EAA8BwM,CPWHvM,IOXQ,EPWf,CACtB,COZE,EAAyCwM,MAAM,GAA/C,EAFK,EAEiD,4BLC7B,EAAI;AGanC,ACMA,ACnBM,APYAnM,ACnBe,AEIS,CFJhC,KIoBQ8N,ACMAA,ACnBEpM,IAAI,CAAN,EAASuK,CPYD,QKCQ,ACMA,SCnBW,CAA3B,EAA8BC,KAAK,IAAnC,EAAyCC,CFaZ0B,ACMAA,KCnBkB,GAA/C,EAHK,EAGiD,IFatC,ACMA,CDNtB,ACMA,mDHjBQnO,OAAOC,MAAP,CAAcJ,cAAd,EAA8BE,OAA9B,CALsB;AKDhC,AHkBEqO,AEbM,APUF,AEX+B,ACFjC,KHYwB,COTlBpM,CPaJ,EQlBGyM,CDKK,CAAN,CPaG1O,CObMwM,GFaDzJ,GLAV,CAAazC,GQlBnB,CAAwB6N,IAAxB,AHkBE,EGlB4B,CHkBCpL,AEbI,CAA3B,EAA8B0J,EPSV,CAAxB,EOTuC,IFazC,AEbM,EAAyCC,MAAM,GAA/C,CAAqD;ACJ3D,AFwBA,ACpBM,APeL,ICJU9J,CMfA,CCAPnC,AFwBEgO,AC1BJ,OCESE,SPeA/L,EKSa,CExBpB,AFyBF,IEzByBnC,OAAOkO,YAAP,CAAoBC,OAA/C,EACEnO,OAAOkO,SFuBe,EAEtB,CEzBA,CAAoBC,OAApB,sIFuBsB,CAAxB;AEtBAnO,AHiBA,AEbIiK,ALH+B,MGgB7B4D,GGjBCK,ODIS,CACV,ICLN,GAAsBR,CHiBG,CAAC,IGjB1B,SHiByB,EAAgB,WAAhB,EAA6B,oBAA7B,CAAzB,uCHXQlO,OAAOC,MAAP,CAAcJ,cAAd,EAA8BE,OAA9B,CAL2B;AMApC,AF0BCqO,ACrBQpM,ALJN,UKIU,CADN,KDsBQkH,QAAd,GAAyB,wBAAasF,eAAb,CAAzB;ADRA,AEZQzM,ANOR,MIKMa,MEZQ,KFYG,EJLL/B,IMTN,GNSN,EAAmC,WIKLuN,cAActL,YAA3B,EAAyCsL,cAAcrL,GAAvD,CAAjB;AGhBF7B,AHiBEkN,ACSA,ACrBQb,ANM2B,MKe7BgB,ELfexO,COXdoB,MDKU,ANMkB,CIMrBuC,ID7BPgE,EIYT,AF0BwB,CE1BD,CF0BrB,EDTA,GAA2B9E,ELDhB,CAAE,KQhBf,CHiBsC0L,CGjBC1I,OAAvC,GAAiD,EHiBpB,CACzB,SGlBmD,eHkBtCyI,UJPgB,EAAI,IIOjC,CADyB,CAA3B;AGhBAI,ADCM,AJAJ,KIDc,EAMV,GJLC5N,OAAL,GAAeA,OAAf;AKAH,AHmBC,ACOA,ACpBQmB,ANG2B,ACNjC,CMLJ,KHqBQuM,GCOC,CCpBK,ALHL1N,CKED,MLFJ,GAAeA,EGgBK,EAAtB,GHhBE,GIuBiBuN,aAAZ,EAA2BG,aAA3B,CAAP;AACD,AHzBG,UAAKrO,KAAL,GAAaF,OAAOC,MHcXM,AGdI,CAAc,MAAKL,GHcb,EGdN,EAA0B;AKA3CgB,AHmBE,AEbQa,APSNvB,ACRiC,ACJjC,ACFEwC,SKDG7B,AHmBA,CHhBAjB,EKGO,CPSLO,EEZP,GFYA,AEZaT,CFYA,AGdE,EADwB,CKA3C,CAAuB,ADGf,CPYcD,CEZEE,KGgBHmO,CLJJ,AEZA,CFYa,AEZC,KMH/B,CNGoClO,CMHG0F,IHmB9B,AHhBQ,EGgBmB2I,AHhBO,CMH3C,GAAiD,ARehC,CAAb,QKIK,CAAP,EGnBqD,qDPY7CvO,OAAOC,MAAP,CAAcJ,cAAd,EAA8BE,OAA9B,CAL2B;AONnC0O,AHmBD,AEbSlB,ANCN,ACJEpN,ACFAiD,cDEQ,CKGK,CLHHxD,CCFC,CGyBFsO,GJvBM,IAAP,EAAavO,KAAK,IAAlB;AMFb,ADCO,APcJ,AEduC,ACHA,CKA3C,IDHkB,ALMD,ACHA,CDGb,ACHA,CISI;AACEqC,APQN,UORU,APQJtB,COTF,OFaOwN,SLJYvN,KAAKC,SAAL,CAAe;AQd1CM,AReML,AEZF,ACFA,SKDKM,CNGA1C,ACFA6L,KAAL,EHcW,CGdE,IKDjB,AReoBzJ,CQfG,ANGnB,CCFkBA,EDEG,GFWiB,EGbzB,CAAayJ,KKD9B,ALCiB,CAAmBjE,CKDGT,ELCtB,CACX,IKFN,ANGuCpC,GMHU,CNGxB,CAAmB,IAAnB,EAAyB3C,IMHK,INGG8G,IAAjC,CAArB;AMFF8G,ADOQ1M,APQJhC,AEZF,ACFE,UDEGrB,EKIO,CJNL,IHcI,AGdA6L,GCrBNF,CDqBE,CHcStK,AGdAsI,CIGZ,ALDJ,ACFO,EAAY,CDEE,CCFAmC,EHYiB,QGZP,MAAK3C,GDEDrE,IAAd,CAAmB,IAAnB,EAAyB3C,ACFf,CAAoB2C,IAApB,GDEuBmE,IAAjC,ACFF,CDEnB,CCFO,CAAL;AKAL,ADOS4F,APQJpN,AGfA,CKFN,ILCiB,CAAb,SIQe,CPQL,KAAKD,KAAL,CAAWC;AOZjB,APSkC,ACJtC,ACJA,KKbc,EPqBS,CAAvB,ECJKU,ACJA+G,ODIL,GAAe/G,CCJf,GAAmB,GDInB,GCJwB+G,WAAL,CAAiBpE,IAAjB,OAAnB;AKKI,ANAJ,ACJA,ACFA,UFMKZ,ACJAiF,ACFA4C,QFML,EENA,CFMgB,EENE,CDElB,CDIoB5H,ECJE,ECFChC,IFMP,ACJWgH,CDIE,EENX,CAAa4C,GFMG5J,OAAL,ACJP,ACFJ,CFMwBiC,ACJAU,ACFA6C,GAAxB,CDEI,ACFwB,ODE9C,CDIgB,EAAwC,MAAKxF,OAAL,CAAakC,GAArD,CAAhB;AMCI,APQJ,AGf8C,aAAK,IAAI2H,SAAJ,CAAcC,CAAd,CAAL;AIQ1C,APQJ7J,ACRA,ACJA,ACJ8C,KAA5B,CAAlB,IFQKZ,IDQGa,CCRR,EDQA,CAAY,ACRCf,OAAOC,MAAP,CAAc,IDQ3B,EAAgCS,ACRAR,KAAnB,EAA0B,ODQvC;AOPI,ANAF8C,ACJF,UAAK8E,IAAL,GAAYpG,EDIG,EADwB,ECHrB,MAAKb,OAAL,CAAakH,IAAb,GAAoB,MAAKlH,OAAL,CAAa8G,IAAvC,EACTK,IADS,CACJ,IADI,EACE;AKIV,APQJ,ACRE/E,ACLU,ACHZ,KDKGoD,GAFS,CAEL,CCLFhD,CHgBArC,IGhBL,IHgBA,AEXQiH,CFWM,AEXP,EFWS7H,ACRE,ACHPV,CDC4B,ECDhC,EAAY,OFWS,IAAd,EAAd,EAAoCa,QAApC;AOPI,APQL,ACRG2C,ACHE,AC1BwB,MI6BtBlB,IAAI,ALHAkG,CKGN,EAASnG,MAAM,ALHA,CDGH,CAHuB,ICAftD,MKGpB,EAA6B8O,KLHd,CAAmB7N,GKGI,ALHvB,CAAf,UKGA,EAvBU,EAwBV,EAAEsC,IAAI,CAAN,EAASD,MAAM,YAAf,EAA6BwL,SAAS,WAAtC,EAxBU,EAyBV,EAAEvL,IAAI,CAAN,EAASD,MAAM,YAAf,EAA6BwL,SAAS,0BAAtC,EAzBU;AARd,ANgCEpK,ACHE,ACNL,GIxBwB,CAAzB,SL8Ba,IAAIgF,IAAJ,CAASD,CDGD,CAJoB,KCCZtI,GAAhB,EAAqBsI,OAAOvI,GAA5B,CAAP;ADIFyD,ACHC,KALS,CAAZ,WDQa;AMKf,ANVyC,KAA1B,CMUTgL,ANVJ,gBMUoB,MPGd,kBOH2BD,gBAAb,CAAtB;APIE,AEVA,WFUKlN,QAAL,GAAgBC,SAASC,aAAT,CAAuB,KAAKd,gBAAL,CAAsBC,MAA7C,CAAhB;AOFF,APGE,ACPA,ACHA,SKOK,CNJA+C,ACHAxC,CFUAO,ICPL,ECHA,CAAagH,GFUb,IEVA,CAAqBzG,ECRf,EIeWyM,GLPjB,CAA6B,SKOxB,CAAP,GLPoC;AKQrC,APGE,AC1BkC,ACgB/B,ACTI;AFYP,ACFG,UAAM1O,MAAM,MAAKhB,aAAL,CAAmB2J,EAAE,CAAF,IAAO,CAA1B,EAA6BA,EAAE,CAAF,IAAO,CAApC,CAAZ;AACA,ACVF,YDUOP,IAAL,CAAUpI,CKODwO,ELPT,EAAe5F,UAAf,GAA4BD,EAAE,CAAF,CAA5B;AACD,ACVD7H,KDMA,QCNOoK,QAAP,GAAkB,QHmBRvJ,IAAIC,AGnBU,OHmBH;AAAA,AGlBnB,eAAKuJ,mBAAL,CAAyB,OAAKC,eAA9B;ADWF,ACVC,OAFD,GDYKzH,KAAL,aDAM;ADQN,ACPA,ACnCiC,ACyBlC,UHiBK/B,iBAAiBC,WAAjB,IAAgCD,iBAAiBE,IAArD,EAA2D;AACzDH,ACPFH,ACDD,WFQMO,ICPI6B,ODOP,CAAehC,CCPjB,GAAqB,CDOnB,ICPwBiC,UAAL,CAAgBC,IAAhB,CAAqB,IAArB,CAArB;ADQC,ACPF,ODKC,MAEO,IAAIlC,iBAAiBI,KAArB,EAA4B;AACjCJ,cAAMK,OAAN,CAAc,QGlBR,KHkBa;AACjB,AGlBJnB,aAAOoK,GHkBEhJ,KGlBT,GAAkB,GHkBd,CAAiBP,AGlBrB,EHkBI,EAAqBQ,CAArB;AACD,AGlBJ,SHgBG,qBCNM,KCFK;AFWZ,ACRDX,ACFA,OFMO,GENH,CAAC,EFUE,ECREoC,CCFCM,OAAL,CDEL,CCFA,EDEqB,ACFA,IDErB;ADSEvC,ACRH,ACFC,WFUKS,AEVA+B,SFUH,CEVF,EFUiBvC,SAAS,EAAxB;AACD,AEVF,+BCTU;AHoBV,AGnBC,UAAI,CAAC,KAAKmC,SAAL,EAAL,EAAuB;AACvB,UAAMT,cAAc,KAAKsH,EFUhB,GEVW,CAAWjE,GAAX,CAAe;AFWnC,AEXmC,UFW/B,CAAC,IEXmCgC,CFW9B5E,CEXgCsH,KAAF,EAAL,CFW9B,EAAL,EAAuB,GCFbxC,OAAOC,MAAM;ADCd,ACDc,ACTY,OAAf,CAApB,EFYQrI,ACFAP,GADe,GDCd,ACAY4I,GDEF,CCHI,CACf5I,GDEgBM,ACHD,KDCd,CAEDC,IDQI4B,ECVH,IDUSC,IAAIV,OAA+B;AAAA,ACV5C,ACDc,ACRvB,UHmB6BhB,ACPrBoD,ACHK/D,CCTRqB,EDQkB,GFW8B,AEVhCwH,GCTrB,CFSS,ACDc,ACRT,CDSD7I,CCTGqD,CFYO,CCJA,IDIKnC,OAHnB,CAGD6C,UAHC,AETK,EAAeN,WAAW,IAA1B,EAAd,sBHmBsC,KAAKnC,QAAU;AGlBtD;AHmBC,ACPA,ACHA,UFUMgB,ACPAe,CCHD6E,OFUS3G,MCPM,CCHpB,CAAoB,CFUGgB,ECPEU,CCHzB,EAA0B,EAAEhD,GDGR,CAAc+D,EDOpB,CAAuB5B,CEVX,EAAOpC,CFUnB,CAAd,ICPoB,CAA2B+D,CCHrB,EAA1B,ODGoB,EAAuCvD,MAAvC,CAApB;ADQA8B,ACPA,ACHD,WDGMjB,CDOCgB,EAAN,GAAWA,EAAX,ACPA,CAAc,EAAEgB,wBAAF,EAAeI,WAAW,IAA1B,EAAd;AACD,mCEZc;AHoBb,AGnBA,UAAI,CHmBCxB,AGnBA,KAAKgC,MHmBV,CAAiB3B,AGnBZ,EAAL,EAAqB,CHmBrB,EAAwBX,KAAxB;AGlBA,WAAKuC,UAAL,cDQa0E,OAAOE,WAAW;AFY/B,AEXA,ACRD,UHmBOtG,AEXF,CAAC,KAAKuG,EFWIxH,SAASC,EEXlB,EAAL,EAA2B,EDGd,KDQC,OAA2Ba,EAA3B,CAAd;AACA,ACRA,ACL+B,UFa3BG,ACRA,ACHIhC,CDGH,IDQL,CCRUyD,ACLqB,CFapBzB,EEXQ,IFWFC,ACRZ,CCHmBlC,CDGxB,EAAqB,ECLU,CAEvBC,GFWG,CAAiBkC,EEbG,SFapB,CAA6BF,KAA7B;ACPX,WAAK0B,UAAL;ADSA,ACRD,ACJC,UFYIvD,AEZAiI,MFYJ,EAAY,CEZC,CAAC,KAAD,EAAQ,KAAR,EAAepB,GCRb,IDQF,CAAuBoB,MAAMI,MAAN,CAAaC,IAApC,IAA4C,CAAC,CAA1D,EAA6D;AFa3DtI,AEZAH,ACRF,UAAI,CAAC,IHoBIsB,AEZA8G,CCRCG,KDQKC,KFYb,CAAmB1G,AEZZ,CAAa2G,CCRjB,EAAL,CHoBE,AEZA,CCRyB,GDQGL,MAAMI,MAAN,CAAarJ,KAAzC;AFaD,AEZA,ACRD,UAAMa,SAAS,KAAKmK,KAAL,CAAWjE,GAAX,CAAe;ADS9B,ACT8B,WDSzBrF,ICT+B,IDSpC,CAAc,EAAEb,ODGT,CCHiBoI,QAAQpI,MAAR,GAAiBsI,SAA3B,EAAd;AFaA,ACVO,ACFR,ACTGuC,aHqBK/I,GGrBCoG,EHqBR,AGrBUrG,CFY8B,CEbJ,IFaS9B,KADtC;ADWR,ACXQ,AEVL+K,UFWI/H,WEXOmF,CFUN,CEVQ4C,SFWT/H,AEXO,GAAcmF,EAAE4C,OFUtB,EEVoB,CAAYjJ,EAA1B,GAA+B;AFUrC,AEZ6B,SAAN,CFaVmB,eADb,UACaA,eADb;AAAA,AEZuB,OAAf,CAAf,EFcQL,YAFD,GAEkB,KAAKjC,ACFtB,ODAD,CAECiC,YAFD;ACAC,AC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UAAL;ADdS,ACeV,AC7BC,UFiBQS,AEjBFwI,eFcG,GAGmB,KAAKzL,AEjBJ,KFcpB,AEdyBqC,CFiB1BY,YEjBqB,CAC3B,EFaO,GEdoB,EAE3B,sBAF2B,EAG3B,KAAKyI,gBAAL,EAH2B,CAA7B;AFcS,oBAIwB,KAAK1L,KAJ7B;AAAA,AERTyL,UFYM1I,cAJG,GERY4I,QFYf5I,EEZN,GAAkC,SFQzB;AAAA,AERyB,UFYZ9C,KEZqBoI,CFQlC,KERwCjE,MFY3BnE,MAJb,EERkC,EDyB5B,ACzBmB;AFQzB,ACkBT,AC1BkC,OAAlC,GD0BMiJ,KAAKlI,MDb0B,GCajBgB,EDbsBrB,OALjC,ICkBE,CAAuB,IAAvB,CAAX;ADlBS,ACmBT,AC1BA8K,UFYQ7I,CCcHjC,OAAL,CAAawI,GDnBJ,KCmBT,AC1BqByC,CD0BCnK,KC1BtB,CFYQmB,CCcR,CAA8B,AC1BA,UFOrB,MCmB6B,CC1BC;AFO9B,ACoBP,AC1BAyF,UFWoB7E,ECedrC,EC1BAiD,GD0BKpD,GDpBJ,MCoBagB,EC1BpB,IFWoBwB,OCeT,CAAuB,EDpB3B,ECoBI,CAAX;AACArC,AC1BA,WD0BGS,CC1BGE,KAAKuG,GD0BX,GAAee,AC1BEyC,ID0BjB,QC1BW,CAAmBC,OAAnB,CAA2B,YAA3B,CAAX;AD2BA5C,AC1BA,WD0BG3H,CC1BC,CAACO,EAAL,EAAS,KD0BT,CAAeX,EAAf;ADfFlB,ACgBC,AC1BC,ODsBF,KCtBQkB,IFUEyB,CEVG5B,SAAS+K,GFUC9I,WEVV,CAAwBnB,EAAxB,CFUH,AEVR,CFUF;AACAiB,ACgBA,AC1BE,YAAI,CD0BCmG,AC1BA/H,ED0BP,CC1BUqJ,QFUQ,CAAlB,AEVE,EAAmB;AFWrB,ACgBD,AC1BGrJ,WAAGqJ,EFUEhH,OEVL,CAAawI,GFUGjJ,IEVhB,CAAqB,IAArB,KFUK,MAA+B,GAAtC,EAA2C;AACzCA,AEVA0I,0BFUkB,CAAlB,EEVqBlK,WAArB,CAAiCJ,EAAjC;AFWAlB,AEVD,OARD,WFkBY,GAAV;AACD,iCCeU;AAAA,ACxBX;AFWA,AEVA,WFUKa,AEVAwE,QFUL,CAAc,EAAErF,CEVhB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","file":"src.d91778a7.map","sourceRoot":"../src","sourcesContent":["export function randomChoice(arr) {\n  return arr[Math.floor(Math.random() * arr.length)];\n}\n\nexport function capitalize(str) {\n  return str.charAt(0).toUpperCase() + str.substr(1);\n}\n\nexport function setVendorStyle(element, property, value) {\n  const prop = capitalize(property);\n  element.style[\"webkit\" + prop] = value;\n  element.style[\"moz\" + prop] = value;\n  element.style[\"ms\" + prop] = value;\n  element.style[\"o\" + prop] = value;\n}\n\nexport function indexToRowCol(numOfCols, idx) {\n  return {\n    col: Math.floor(idx % numOfCols),\n    row: Math.floor(idx / numOfCols)\n  };\n}\n\nexport function rowColToIndex(numOfCols, row, col) {\n  return row * numOfCols + col;\n}\n","const defaultOptions = {\n  \"str-answer-label\": \"Vastauksesi:\",\n  \"str-check-answer\": \"Tarkista\",\n  \"str-send-answer\": \"Lähetä\",\n  \"str-answer-sent\": \"Vastaus lähetetty!\",\n  \"str-select\": \"Valitse\",\n  \"str-erase\": \"Poista\"\n};\n\nexport class BasePuzzle {\n  /**\n   * @param {object} options\n   */\n\n  constructor(options = {}) {\n    this.options = Object.assign(defaultOptions, options);\n\n    this.state = {\n      answer: \"\",\n      answerSent: false\n    };\n\n    this.elementSelectors = Object.assign(\n      {\n        parent: \"#puzzle\"\n      },\n      this.options.elementSelectors\n    );\n  }\n\n  onSubmit() {}\n\n  sendAnswer(callback) {\n    window.alert(this.options[\"str-answer-sent\"]);\n\n    // TODO: Actually send \"completeAnswer\" to server\n    const completeAnswer = JSON.stringify({\n      setting: this.setting,\n      options: this.options,\n      answer: this.state.answer\n    });\n\n    // eslint-disable-next-line no-console\n    console.log(\"Complete answer:\", completeAnswer);\n\n    this.setState({ answerSent: true }, callback);\n  }\n\n  setup() {\n    this.parentEl = document.querySelector(this.elementSelectors.parent);\n    this.renderHTML();\n  }\n\n  renderInner(el, inner) {\n    if (inner instanceof HTMLElement || inner instanceof Text) {\n      el.appendChild(inner);\n    } else if (inner instanceof Array) {\n      inner.forEach(i => {\n        this.renderInner(el, i);\n      });\n    } else {\n      el.innerText = inner || \"\";\n    }\n  }\n\n  renderElement(type, id, inner, parent = this.parentEl) {\n    const newEl = document.createElement(type);\n    newEl.id = id;\n\n    this.renderInner(newEl, inner);\n\n    const oldEl = document.querySelector(`#${id}`);\n    if (oldEl) oldEl.parentNode.removeChild(oldEl);\n\n    if (parent) {\n      parent.appendChild(newEl);\n    }\n\n    return newEl;\n  }\n\n  renderHTML() {\n    this.parentEl.innerHTML = \"\";\n    this.renderElement(\"h1\", \"puzzleName\", this.options[\"str-name\"]);\n  }\n\n  setState(newState, callback) {\n    const oldState = this.state;\n    this.state = Object.assign({}, oldState, newState);\n    if (typeof callback === \"function\") callback();\n    else this.updateView();\n  }\n\n  updateView() {}\n}\n","import { BasePuzzle } from \"./BasePuzzle\";\nimport { setVendorStyle } from \"../lib/util\";\n\nimport \"./Puzzle1.css\";\n\nconst defaultOptions = {\n  \"str-name\": \"Salakirjoitus\",\n  \"str-description\":\n    \"Majavat lähettävät tietoa erityistä salakirjoitusavainta käyttäen.\",\n  \"str-key-descriptions\": {\n    \"+1\":\n      \"Jokainen kirjain vaihdetaan aakkosissa yksi askel eteenpäin olevaan kirjaimeen.\",\n    \"+2\":\n      \"Jokainen kirjain vaihdetaan aakkosissa kaksi askelta eteenpäin olevaan kirjaimeen.\",\n    \"-1\":\n      \"Jokainen kirjain vaihdetaan aakkosissa yksi askel taaksepäin olevaan kirjaimeen.\",\n    \"-2\":\n      \"Jokainen kirjain vaihdetaan aakkosissa kaksi askelta taaksepäin olevaan kirjaimeen.\"\n  },\n  \"str-example-label\": \"Siis esim..\",\n  \"str-ciphertext-label\": \"Vastaanotettu viesti:\",\n  \"str-question\": \"Mikä oli viesti?\"\n};\n\nexport class Puzzle1 extends BasePuzzle {\n  constructor(setting, options = {}) {\n    /**\n     * @param {object} setting\n     * @param {object} options\n     */\n    super(Object.assign(defaultOptions, options));\n\n    this.setting = setting;\n    this.cipherer = new Cipherer(this.setting.characterSet, this.setting.key);\n\n    this.state = Object.assign(this.state, {\n      answerCheck: [],\n      currentCharIdx: 0,\n      ringRotation: 0,\n      selectedCharIdx: 0,\n      submitted: false\n    });\n\n    this.setup();\n  }\n\n  setup() {\n    super.setup();\n    document.onkeydown = this.onKeyPress.bind(this);\n  }\n\n  cleanUp() {\n    document.onkeydown = null;\n  }\n\n  onSubmit() {\n    if (!this.canSubmit()) return;\n    const { answer } = this.state;\n    const { cipherText } = this.setting;\n    const answerCheck = this.cipherer.checkMessage(cipherText, answer);\n    this.setState({ answerCheck, submitted: true });\n  }\n\n  onSendAnswer() {\n    if (!this.canSend()) return;\n    this.sendAnswer();\n  }\n\n  onPrev() {\n    let { ringRotation, selectedCharIdx } = this.state;\n    const { characterSet } = this.setting;\n\n    ringRotation -= 1;\n\n    if (selectedCharIdx <= 0) {\n      selectedCharIdx = characterSet.length - 1;\n    } else {\n      selectedCharIdx -= 1;\n    }\n\n    this.setState({ ringRotation, selectedCharIdx });\n  }\n\n  onNext() {\n    let { ringRotation, selectedCharIdx } = this.state;\n    const { characterSet } = this.setting;\n\n    ringRotation += 1;\n\n    if (selectedCharIdx >= characterSet.length - 1) {\n      selectedCharIdx = 0;\n    } else {\n      selectedCharIdx += 1;\n    }\n\n    this.setState({ ringRotation, selectedCharIdx });\n  }\n\n  onErase() {\n    if (!this.canErase()) return;\n\n    let { answer, currentCharIdx } = this.state;\n    const { cipherText } = this.setting;\n\n    answer = answer.slice(0, -1);\n    currentCharIdx -= 1;\n    while (cipherText[currentCharIdx] === \" \") {\n      currentCharIdx -= 1;\n      answer = answer.slice(0, -1);\n    }\n\n    this.setState({ answer, currentCharIdx });\n  }\n\n  onSelect() {\n    if (!this.canSelect()) return;\n\n    const { selectedCharIdx } = this.state;\n    let { currentCharIdx, answer } = this.state;\n    const { characterSet, cipherText } = this.setting;\n\n    answer += characterSet[selectedCharIdx];\n    currentCharIdx += 1;\n    while (cipherText[currentCharIdx] === \" \") {\n      currentCharIdx += 1;\n      answer += \" \";\n    }\n\n    this.setState({ answer, currentCharIdx });\n  }\n\n  onKeyPress(e) {\n    switch (e.key) {\n      case \"ArrowLeft\":\n        this.onPrev();\n        break;\n\n      case \"ArrowRight\":\n        this.onNext();\n        break;\n\n      case \"Enter\":\n        this.onSelect();\n        break;\n\n      case \"Backspace\":\n        this.onErase();\n        break;\n\n      default:\n        return; // exit this handler for other keys\n    }\n\n    e.preventDefault(); // prevent the default action (scroll / move caret)\n  }\n\n  canSelect() {\n    const { answer, submitted } = this.state;\n    const { cipherText } = this.setting;\n\n    return !submitted && answer.length < cipherText.length;\n  }\n\n  canErase() {\n    const { answer, currentCharIdx, submitted } = this.state;\n    return !submitted && answer.length > 0 && currentCharIdx > 0;\n  }\n\n  canSubmit() {\n    const { answer, submitted } = this.state;\n    return !submitted && answer.length > 0;\n  }\n\n  canSend() {\n    const { answerSent, submitted } = this.state;\n    return submitted && !answerSent;\n  }\n\n  updateView() {\n    super.updateView();\n\n    this.updateAnswer();\n    this.updateButtons();\n    this.updateQuestion();\n    this.updateRing();\n  }\n\n  updateRing() {\n    const { ringRotation, selectedCharIdx } = this.state;\n    const rotation = this.getRingRotation(ringRotation);\n\n    // Update rotation\n    const el = document.querySelector(\"#puzzleRing #characters\");\n    setVendorStyle(el, \"transform\", `rotateY(${-rotation}deg)`);\n\n    // Update selected class\n    // Use setTimeout so the class is set somewhat in sync with the animation\n    setTimeout(() => {\n      document\n        .querySelectorAll(\"#puzzleRing #characters .characterSet\")\n        .forEach((c, idx) => {\n          if (idx === selectedCharIdx) c.classList.add(\"current-char\");\n          else c.classList.remove(\"current-char\");\n        });\n    }, 60);\n  }\n\n  updateQuestion() {\n    const el = document.querySelector(\"#puzzleQuestion\");\n    el.innerHTML = \"\"; // Clear old content\n    this.renderInner(el, this.renderQuestion());\n  }\n\n  updateAnswer() {\n    const el = document.querySelector(\"#puzzleAnswer\");\n    el.innerHTML = \"\"; // Clear old content\n    this.renderInner(el, this.renderAnswer());\n  }\n\n  updateButtons() {\n    this.eraseButton.disabled = !this.canErase();\n    this.selectButton.disabled = !this.canSelect();\n    this.submitButton.disabled = !this.canSubmit();\n    this.sendAnswerButton.disabled = !this.canSend();\n  }\n\n  renderHTML() {\n    super.renderHTML();\n\n    this.renderElement(\"p\", \"puzzleDescription\", this.renderDescription());\n    this.renderElement(\"p\", \"puzzleQuestion\", this.renderQuestion());\n    this.renderElement(\"div\", \"puzzleRing\", this.renderCipherRing());\n    this.renderElement(\"p\", \"puzzleAnswer\", this.renderAnswer());\n\n    // \"Tarkista\"-button\n    this.submitButton = this.renderElement(\n      \"button\",\n      \"puzzleSubmit\",\n      this.options[\"str-check-answer\"]\n    );\n    this.submitButton.onclick = this.onSubmit.bind(this);\n    this.submitButton.disabled = true;\n\n    // \"Lähetä\"-button\n    this.sendAnswerButton = this.renderElement(\n      \"button\",\n      \"puzzleSend\",\n      this.options[\"str-send-answer\"]\n    );\n    this.sendAnswerButton.onclick = this.onSendAnswer.bind(this);\n    this.sendAnswerButton.disabled = true;\n\n    this.updateView();\n  }\n\n  renderDescription() {\n    const { key, keyExample } = this.setting;\n    return [\n      document.createTextNode(this.options[\"str-description\"]),\n      document.createElement(\"br\"),\n      document.createTextNode(this.options[\"str-key-descriptions\"][key]),\n      document.createElement(\"br\"),\n      document.createTextNode(this.options[\"str-example-label\"]),\n      document.createTextNode(\" \"),\n      document.createTextNode(keyExample)\n    ];\n  }\n\n  renderQuestion() {\n    const { currentCharIdx } = this.state;\n    const { cipherText } = this.setting;\n\n    const labelText = document.createTextNode(\n      this.options[\"str-ciphertext-label\"]\n    );\n\n    const label = [labelText, document.createTextNode(\" \")];\n\n    const chars = cipherText.split(\"\").map((c, idx) => {\n      const el = document.createElement(\"span\");\n      el.classList.add(\"cipher-char\");\n      if (idx === currentCharIdx) el.classList.add(\"current-char\");\n      el.innerText = c;\n      return el;\n    });\n\n    const questionEl = document.createElement(\"strong\");\n    questionEl.innerText = this.options[\"str-question\"];\n\n    return [label, chars, document.createElement(\"br\"), questionEl];\n  }\n\n  renderAnswer() {\n    const { answer, answerCheck, submitted } = this.state;\n\n    const labelText = document.createTextNode(this.options[\"str-answer-label\"]);\n\n    const label = [labelText, document.createTextNode(\" \")];\n\n    const chars = answer.split(\"\").map((c, idx) => {\n      const el = document.createElement(\"span\");\n      el.classList.add(answerCheck[idx] ? \"correct\" : \"incorrect\");\n      el.innerText = c;\n      return el;\n    });\n\n    const answerText = document.createTextNode(answer);\n\n    return submitted ? [label, chars] : [label, answerText];\n  }\n\n  renderCipherRing() {\n    const { characterSet } = this.setting;\n\n    const radius = 300;\n\n    const chars = characterSet.split(\"\").map((c, idx) => {\n      const rotation = this.getRingRotation(idx);\n      const el = document.createElement(\"li\");\n      el.classList.add(\"characterSet\");\n      el.innerText = c;\n      setVendorStyle(\n        el,\n        \"transform\",\n        `rotateY(${rotation}deg) translateZ(${radius}px)`\n      );\n      return el;\n    });\n\n    const ring = this.renderElement(\"ul\", \"characters\", chars, null);\n\n    const ringWrapper = this.renderElement(\"div\", \"ringWrapper\", ring, null);\n\n    const eraseButton = this.renderElement(\n      \"button\",\n      \"eraseButton\",\n      this.options[\"str-erase\"],\n      null\n    );\n    const prevButton = this.renderElement(\"button\", \"prevButton\", \"<<<\", null);\n    const nextButton = this.renderElement(\"button\", \"nextButton\", \">>>\", null);\n    const selectButton = this.renderElement(\n      \"button\",\n      \"selectButton\",\n      this.options[\"str-select\"],\n      null\n    );\n\n    eraseButton.disabled = true;\n\n    eraseButton.onclick = this.onErase.bind(this);\n    prevButton.onclick = this.onPrev.bind(this);\n    nextButton.onclick = this.onNext.bind(this);\n    selectButton.onclick = this.onSelect.bind(this);\n\n    const controls = this.renderElement(\"div\", \"controls\", [\n      eraseButton,\n      prevButton,\n      nextButton,\n      selectButton\n    ]);\n\n    this.eraseButton = eraseButton;\n    this.selectButton = selectButton;\n\n    return [ringWrapper, controls];\n  }\n\n  getRingRotation(index) {\n    return index * (360 / this.setting.characterSet.length);\n  }\n}\n\nexport class Cipherer {\n  constructor(characterSet, key) {\n    const keys = /([+-])(\\d+)/g.exec(key);\n    this.factor = keys[1] === \"-\" ? -parseInt(keys[2]) : parseInt(keys[2]);\n    this.characterSet = characterSet;\n  }\n\n  cipherChar(c) {\n    if (this.characterSet.indexOf(c) === -1) return c;\n    let idx = this.characterSet.indexOf(c) + this.factor;\n    if (idx < 0) idx += this.characterSet.length;\n    else if (idx > this.characterSet.length - 1)\n      idx -= this.characterSet.length;\n    return this.characterSet[idx];\n  }\n\n  cipherMessage(m) {\n    if (typeof m === \"string\") {\n      return m\n        .toUpperCase()\n        .split(\"\")\n        .map(this.cipherChar.bind(this))\n        .join(\"\");\n    }\n  }\n\n  checkCharacter(cipherChar, charToCheck) {\n    return (\n      cipherChar && charToCheck && cipherChar === this.cipherChar(charToCheck)\n    );\n  }\n\n  checkMessage(cipherText, message) {\n    return message\n      .toUpperCase()\n      .split(\"\")\n      .map((c, idx) => this.checkCharacter(cipherText[idx], c));\n  }\n}\n","import { BasePuzzle } from \"./BasePuzzle\";\nimport { rowColToIndex, indexToRowCol } from \"../lib/util\";\n\nimport \"./Puzzle2.css\";\n\nconst defaultOptions = {\n  \"str-name\": \"Majavakartta\",\n  \"str-description\":\n    \"Majavakartassa esineen paikka ilmaistaan kahdella suluissa olevalla numerolla. Ensin rivin numero ja sitten sarakkeen numero.\"\n};\n\nexport class Puzzle2 extends BasePuzzle {\n  constructor(setting, options = {}) {\n    /**\n     * @param {object} options\n     */\n\n    super(Object.assign(defaultOptions, options));\n\n    this.setting = setting;\n\n    this.state = Object.assign(this.state, {\n      answer: { row: null, col: null }\n    });\n\n    this.indexToRowCol = indexToRowCol.bind(null, setting.cols);\n    this.rowColToIndex = rowColToIndex.bind(null, setting.cols);\n\n    this.onSpotClick = this.onSpotClick.bind(this);\n    this.onAnswerChange = this.onAnswerChange.bind(this);\n\n    // Init an array with empty Spot in each element\n    this.grid = Array(this.setting.rows * this.setting.cols)\n      .fill(null) // Fill with nulls so we can use map()\n      .map((_, idx) => {\n        const rowCol = this.indexToRowCol(idx);\n        return new Spot(rowCol.row, rowCol.col);\n      });\n\n    // Replace Spot objectType with received parameters\n    this.setting.objects.forEach(s => {\n      // setting indexes are 1-indexed so we need to substract 1\n      const idx = this.rowColToIndex(s[0] - 1, s[1] - 1);\n      this.grid[idx].objectType = s[2];\n    });\n\n    this.setup();\n  }\n\n  onSendAnswer() {\n    if (!this.canSend()) return;\n    this.sendAnswer();\n  }\n\n  onSpotClick(event, spot) {\n    const { row, col } = spot;\n    this.onAnswerChange(null, { row, col });\n  }\n\n  onAnswerChange(event, newAnswer) {\n    if (!this.canEditAnswer()) return;\n    const { answer } = this.state;\n    if (event && [\"row\", \"col\"].indexOf(event.target.name) > -1) {\n      answer[event.target.name] = event.target.value;\n    }\n    this.setState({ answer: event ? answer : newAnswer });\n  }\n\n  canSend() {\n    const { answer, answerSent } = this.state;\n    return !answerSent && answer.row !== null && answer.col !== null;\n  }\n\n  canEditAnswer() {\n    const { answerSent } = this.state;\n    return !answerSent;\n  }\n\n  updateView() {\n    super.updateView();\n\n    this.updateAnswer();\n    this.updateButtons();\n  }\n\n  updateButtons() {\n    this.sendAnswerButton.disabled = !this.canSend();\n  }\n\n  updateAnswer() {\n    const { answer } = this.state;\n\n    this.rowInput.value = answer.row;\n    this.rowInput.disabled =\n      !this.canEditAnswer() || this.setting.input === \"mouse\";\n\n    this.colInput.value = answer.col;\n    this.colInput.disabled =\n      !this.canEditAnswer() || this.setting.input === \"mouse\";\n  }\n\n  renderHTML() {\n    super.renderHTML();\n\n    this.renderElement(\n      \"p\",\n      \"puzzleDescription\",\n      this.options[\"str-description\"]\n    );\n    this.renderElement(\"div\", \"puzzleExample\", this.renderExamples());\n    this.renderElement(\"div\", \"puzzleGrid\", this.renderGrid());\n    this.renderElement(\"p\", \"puzzleQuestion\", this.setting.question);\n    this.renderElement(\n      \"p\",\n      \"puzzleAnswerLabel\",\n      this.options[\"str-answer-label\"]\n    );\n    this.renderElement(\"div\", \"puzzleInput\", this.renderInputForm());\n\n    // Render \"Lähetä\"-button\n    this.sendAnswerButton = this.renderElement(\n      \"button\",\n      \"puzzleSend\",\n      this.options[\"str-send-answer\"]\n    );\n    this.sendAnswerButton.onclick = this.onSendAnswer.bind(this);\n    this.sendAnswerButton.disabled = true;\n\n    this.updateView();\n  }\n\n  renderExamples() {\n    const ul = document.createElement(\"ul\");\n    this.setting.examples.forEach(text => {\n      const el = document.createElement(\"li\");\n      el.innerText = text;\n      ul.appendChild(el);\n    });\n    return ul;\n  }\n\n  renderGrid() {\n    const gridElements = this.grid.map(spot =>\n      spot.renderHTML({\n        onClick: this.onSpotClick\n      })\n    );\n\n    return this.renderElement(\"div\", \"gridWrapper\", gridElements, null);\n  }\n\n  renderInputForm() {\n    this.rowInput = document.createElement(\"input\");\n    this.colInput = document.createElement(\"input\");\n\n    [this.rowInput, this.colInput].forEach(i => {\n      i.type = \"number\";\n      i.step = 1;\n      i.min = 1;\n      i.disabled = this.setting.input === \"mouse\";\n      i.onchange = this.onAnswerChange;\n      i.onkeyup = this.onAnswerChange;\n    });\n\n    this.rowInput.max = this.setting.rows;\n    this.rowInput.name = \"row\";\n    this.colInput.max = this.setting.cols;\n    this.colInput.name = \"col\";\n\n    return this.renderElement(\n      \"form\",\n      \"inputForm\",\n      [this.rowInput, this.colInput],\n      null\n    );\n  }\n}\n\nclass Spot {\n  constructor(row_0, col_0, objectType = null) {\n    /**\n     * @param {number} row_0 - 0-indexed row\n     * @param {number} col_0 - 0-indexed col\n     * @param {number} objectType\n     */\n    this.col = col_0 + 1; // Coordinate in 1-indexed system\n    this.row = row_0 + 1; // Coordinate in 1-indexed system\n    this.objectType = objectType;\n  }\n\n  renderHTML({ onClick }) {\n    const el = document.createElement(\"div\");\n    el.className = \"spot\";\n\n    if (this.objectType) el.classList.add(this.objectType);\n    else {\n      el.classList.add(\"empty\");\n      el.innerText = \"•\";\n    }\n\n    el.style.gridColumn = this.col;\n    el.style.gridRow = this.row;\n\n    if (this.row === 1)\n      el.appendChild(this.renderIndexingNumber(\"col\", this.col));\n\n    if (this.col === 1)\n      el.appendChild(this.renderIndexingNumber(\"row\", this.row));\n\n    el.onclick = e => onClick(e, this);\n    return el;\n  }\n\n  renderIndexingNumber(type, number) {\n    const el = document.createElement(\"span\");\n    el.className = \"indexingNumber\";\n    el.classList.add(type);\n    el.innerText = number;\n    return el;\n  }\n}\n","import { BasePuzzle } from \"./BasePuzzle\";\n\nimport \"./Puzzle3.css\";\n\nconst defaultOptions = {\n  \"str-name\": \"Drag & Drop\"\n};\n\nexport class Puzzle3 extends BasePuzzle {\n  constructor(setting, options) {\n    /**\n     * @param {object} setting\n     * @param {object} options\n     */\n    super(Object.assign(defaultOptions, options));\n\n    this.setting = setting;\n\n    this.state = Object.assign(this.state, {\n      answerCheck: [],\n      submitted: false\n    });\n\n    this.slots = this.setting.slots.map(\n      s => new Slot(s, { onChange: this.onAnswerChange.bind(this) })\n    );\n\n    this.draggables = this.setting.draggables.map(d => new Draggable(d));\n\n    this.setup();\n  }\n\n  setup() {\n    super.setup();\n    window.onresize = () => {\n      this.updateSlotPositions(this.backgroundImage);\n    };\n  }\n\n  cleanUp() {\n    window.onresize = null;\n  }\n\n  onSubmit() {\n    if (!this.canSubmit()) return;\n    const answerCheck = this.slots.map(s => s.check());\n    this.setState({ answerCheck, submitted: true });\n  }\n\n  onSendAnswer() {\n    if (!this.canSend()) return;\n    this.sendAnswer();\n  }\n\n  onAnswerChange() {\n    if (!this.canEditAnswer()) return;\n    const answer = this.slots.map(s => ({\n      slot: s.id,\n      draggable: s.draggable ? s.draggable.id : null\n    }));\n    this.setState({ answer });\n  }\n\n  canEditAnswer() {\n    const { answerSent } = this.state;\n    return !answerSent;\n  }\n\n  canSubmit() {\n    const { answer, submitted } = this.state;\n    return !submitted && answer.length > 0;\n  }\n\n  canSend() {\n    const { answerSent, submitted } = this.state;\n    return submitted && !answerSent;\n  }\n\n  updateView() {\n    super.updateView();\n\n    this.updateButtons();\n  }\n\n  updateButtons() {\n    this.submitButton.disabled = !this.canSubmit();\n    this.sendAnswerButton.disabled = !this.canSend();\n  }\n\n  updateSlotPositions(imageEl) {\n    const widthRatio = imageEl.offsetWidth / imageEl.naturalWidth;\n    const heightRatio = imageEl.offsetHeight / imageEl.naturalHeight;\n    this.slots.forEach(s => s.setPosition({ widthRatio, heightRatio }));\n  }\n\n  renderHTML() {\n    super.renderHTML();\n\n    this.renderElement(\"div\", \"background\", this.renderBackground());\n\n    const draggabblesContainer = this.renderElement(\n      \"div\",\n      \"draggables-container\",\n      this.renderDraggables()\n    );\n\n    draggabblesContainer.ondragover = event => event.preventDefault();\n    draggabblesContainer.ondrop = event => {\n      event.preventDefault();\n      const id = event.dataTransfer.getData(\"dragged-id\");\n      if (!id) return;\n      const el = document.getElementById(id);\n      if (!el.Draggable) return;\n      el.Draggable.setSlot(null);\n      draggabblesContainer.appendChild(el);\n    };\n\n    // Render \"Tarkista\"-button\n    this.submitButton = this.renderElement(\n      \"button\",\n      \"puzzleSubmit\",\n      this.options[\"str-check-answer\"]\n    );\n    this.submitButton.onclick = this.onSubmit.bind(this);\n    this.submitButton.disabled = true;\n\n    // Render \"Lähetä\"-button\n    this.sendAnswerButton = this.renderElement(\n      \"button\",\n      \"puzzleSend\",\n      this.options[\"str-send-answer\"]\n    );\n    this.sendAnswerButton.onclick = this.onSendAnswer.bind(this);\n    this.sendAnswerButton.disabled = true;\n\n    this.updateView();\n  }\n\n  renderBackground() {\n    const el = document.createElement(\"img\");\n    el.src = this.setting.backgroundUrl;\n    el.id = \"background-image\";\n    el.onload = () => {\n      this.updateSlotPositions(el);\n      this.slots.forEach(s => el.parentNode.appendChild(s.el));\n    };\n    this.backgroundImage = el;\n    return el;\n  }\n\n  renderDraggables() {\n    return this.draggables.map(d => d.render());\n  }\n}\n\nclass Slot {\n  constructor({ id, correctDraggable, top, left }, { onChange }) {\n    this.id = id;\n    this.correctDraggable = correctDraggable;\n    this.position = { top, left };\n    this.size = 20;\n\n    this.onDraggableChange = onChange;\n\n    this.draggable = null;\n\n    this.el = document.createElement(\"div\");\n    this.el.className = \"slot\";\n    this.el.style.width = this.size + \"px\";\n    this.el.style.height = this.size + \"px\";\n\n    this.el.ondragover = this.onDragover.bind(this);\n    this.el.ondrop = this.onDrop.bind(this);\n    this.el.ondragenter = this.onDragEnter.bind(this);\n    this.el.ondragleave = this.onDragLeave.bind(this);\n  }\n\n  check() {\n    return (\n      !this.correctDraggable ||\n      (!!this.draggable && this.correctDraggable === this.draggable.id)\n    );\n  }\n\n  setDraggable(newDraggable) {\n    this.draggable = newDraggable;\n    this.onDraggableChange();\n  }\n\n  setPosition({ widthRatio = 1, heightRatio = 1 }) {\n    this.el.style.top = widthRatio * this.position.top - this.size / 2 + \"px\";\n    this.el.style.left =\n      heightRatio * this.position.left - this.size / 2 + \"px\";\n  }\n\n  render(ratios) {\n    this.setPosition(ratios);\n    return this.el;\n  }\n\n  onDragover(event) {\n    event.preventDefault();\n  }\n\n  onDrop(event) {\n    event.preventDefault();\n    this.el.classList.remove(\"drag-hover\");\n    if (this.draggable) return; // Already occupied\n    const id = event.dataTransfer.getData(\"dragged-id\");\n    if (!id) return;\n    const el = document.getElementById(id);\n    if (!el.Draggable) return;\n    el.Draggable.setSlot(this);\n    this.el.appendChild(el);\n  }\n\n  onDragEnter() {\n    this.el.classList.add(\"drag-hover\");\n  }\n\n  onDragLeave() {\n    this.el.classList.remove(\"drag-hover\");\n  }\n}\n\nclass Draggable {\n  constructor({ id, type, content }) {\n    this.id = id;\n    this.type = type;\n    this.content = content;\n\n    this.slot = null;\n\n    this.el = this.renderElement();\n\n    this.el.draggable = true;\n    this.el.ondragstart = this.onDragStart.bind(this);\n    this.el.ondragend = this.onDragEnd.bind(this);\n\n    this.el.Draggable = this;\n  }\n\n  renderElement() {\n    const el = document.createElement(\"div\");\n    el.id = `draggable-${this.id}`;\n    el.className = \"draggable\";\n    el.appendChild(this.renderContent(el));\n    return el;\n  }\n\n  renderContent(parentEl) {\n    let el;\n    switch (this.type.split(\"/\")[0]) {\n      case \"image\":\n        parentEl.classList.add(\"loading\");\n        el = document.createElement(\"img\");\n        el.src = this.content;\n        el.onload = () => {\n          parentEl.classList.remove(\"loading\");\n        };\n        break;\n      case \"video\":\n        parentEl.classList.add(\"loading\");\n        el = document.createElement(\"embed\");\n        el.src = this.content;\n        el.width = 200 + \"px\";\n        el.height = 100 + \"px\";\n        el.onload = () => {\n          parentEl.classList.remove(\"loading\");\n        };\n        parentEl.classList.add(\"extra-space\");\n        break;\n      case \"text\":\n        el = document.createElement(\"p\");\n        parentEl.style.minWidth = 100 + \"px\";\n        parentEl.style.padding = 4 + \"px\";\n        el.innerText = this.content;\n        break;\n      default:\n        el = document.createElement(\"p\");\n        el.innerHTML = \"N/A\";\n    }\n    return el;\n  }\n\n  render() {\n    return this.el;\n  }\n\n  setSlot(newSlot) {\n    if (this.slot) {\n      // Moving out of this.slot\n      this.slot.setDraggable(null);\n    }\n    if (newSlot) {\n      // Moving into newSlot\n      newSlot.setDraggable(this);\n    }\n    this.slot = newSlot;\n  }\n\n  onDragStart(event) {\n    event.dataTransfer.setData(\"dragged-id\", this.el.id);\n\n    this.el.classList.add(\"dragging\");\n    this.el.classList.remove(\"in-slot\");\n\n    setTimeout(() => {\n      // Needs to be in a timeout because otherwise element we are dragging\n      // will be hidden as well\n      this.el.classList.add(\"hide\");\n    }, 1);\n  }\n\n  onDragEnd() {\n    this.el.classList.remove(\"dragging\");\n    if (this.slot) {\n      this.el.classList.add(\"in-slot\");\n    }\n    this.el.classList.remove(\"hide\");\n  }\n}\n","export { BasePuzzle } from \"./BasePuzzle\";\nexport { Puzzle1, Cipherer } from \"./Puzzle1\";\nexport { Puzzle2 } from \"./Puzzle2\";\nexport { Puzzle3 } from \"./Puzzle3\";\n","import { randomChoice } from \"./lib/util\";\nimport { Puzzle1, Cipherer } from \"./puzzles\";\n\nfunction init() {\n  const characterSet = \"ABCDEFGHIJKLMNOPQRSTUVWXYZÅÄÖ\";\n\n  const possibleSettings = [\n    {\n      key: \"+1\",\n      keyExample: \"A → B, B → C..., Ä → Ö, Ö → A\"\n    },\n    {\n      key: \"+2\",\n      keyExample: \"A → C, B → D..., Ä → A, Ö → B\"\n    },\n    {\n      key: \"-1\",\n      keyExample: \"A → Ö, B → A..., Ä → Å, Ö → Ä\"\n    },\n    {\n      key: \"-2\",\n      keyExample: \"A → Ä, B → Ö..., Ä → Z, Ö → Å\"\n    }\n  ];\n\n  const puzzleSetting = randomChoice(possibleSettings);\n  puzzleSetting.characterSet = characterSet;\n\n  const possibleMessages = [\"HEI MAAILMA\", \"JS ROKKAA\", \"YLIOPISTO ON PARAS\"];\n\n  const cipherer = new Cipherer(puzzleSetting.characterSet, puzzleSetting.key);\n  puzzleSetting.cipherText = cipherer.cipherMessage(\n    randomChoice(possibleMessages)\n  );\n\n  const puzzleOptions = {};\n\n  return new Puzzle1(puzzleSetting, puzzleOptions);\n}\n\nexport default init;\n","import { randomChoice } from \"./lib/util\";\nimport { Puzzle2 } from \"./puzzles\";\n\nfunction init() {\n  const possibleSettings = [\n    {\n      rows: 10,\n      cols: 10,\n      objects: [\n        [1, 1, \"lake\"],\n        [2, 5, \"mushroom\"],\n        [3, 9, \"tree\"],\n        [9, 6, \"treestump\"]\n      ],\n      input: \"mouse\", // (\"mouse\", \"text\")\n      examples: [\"Järvi (1, 1)\", \"Sieni (2, 5)\"]\n    },\n    {\n      rows: 10,\n      cols: 10,\n      objects: [\n        [4, 2, \"lake\"],\n        [3, 5, \"mushroom\"],\n        [2, 9, \"tree\"],\n        [9, 6, \"treestump\"]\n      ],\n      input: \"text\", // (\"mouse\", \"text\")\n      examples: [\"Järvi (4, 2)\", \"Sieni (3, 5)\"]\n    }\n  ];\n\n  const puzzleSetting = randomChoice(possibleSettings);\n\n  const puzzleQuestions = [\n    \"Kirjoita tai klikkaa missä puunkanto sijaitsee.\",\n    \"Majavan talo sijaitsee neljä askelta sienen alapuolella ja siitä kaksi askelta oikealle. Missä rivissä ja sarakkeessa Majavan talo sijaitsee?\"\n  ];\n\n  puzzleSetting.question = randomChoice(puzzleQuestions);\n\n  const puzzleOptions = {};\n\n  return new Puzzle2(puzzleSetting, puzzleOptions);\n}\n\nexport default init;\n","import { randomChoice } from \"./lib/util\";\nimport { Puzzle3 } from \"./puzzles\";\n\nimport finlandImg from \"./static/finland-23572_1280.png\";\n\nfunction init() {\n  const possibleSettings = [\n    {\n      backgroundUrl: finlandImg,\n      slots: [\n        { id: 1, correctDraggable: 1, top: 620, left: 390 }, // Oulu\n        { id: 2, correctDraggable: 2, top: 1070, left: 280 }, // Tampere\n        { id: 3, correctDraggable: 3, top: 1230, left: 340 }, // Helsinki\n        { id: 4, correctDraggable: 5, top: 1190, left: 160 } // Turku\n      ],\n      draggables: [\n        {\n          id: 1,\n          type: \"image/png\",\n          content: \"https://picsum.photos/200/100/?random\"\n        },\n        {\n          id: 2,\n\n          type: \"image/png\",\n          content: \"https://picsum.photos/200/200/?random\"\n        },\n        {\n          id: 3,\n\n          type: \"image/png\",\n          content: \"https://picsum.photos/100/100/?random\"\n        },\n        // {\n        //   id: 4,\n        //   type: \"video/youtube\",\n        //   content: \"https://www.youtube.com/embed/tgbNymZ7vqY\"\n        // },\n        { id: 5, type: \"text/plain\", content: \"Drag me 1\" },\n        { id: 6, type: \"text/plain\", content: \"Drag me 2\" },\n        { id: 7, type: \"text/plain\", content: \"Drag me 3 very long text\" }\n      ]\n    }\n  ];\n\n  const puzzleSetting = randomChoice(possibleSettings);\n\n  return new Puzzle3(puzzleSetting);\n}\n\nexport default init;\n","import \"./index.css\";\n\nimport initPuzzle1 from \"./initPuzzle1\";\nimport initPuzzle2 from \"./initPuzzle2\";\nimport initPuzzle3 from \"./initPuzzle3\";\n\n// initPuzzle3();\n\nfunction activatePuzzle(init) {\n  if (window.activePuzzle && window.activePuzzle.cleanUp)\n    window.activePuzzle.cleanUp();\n  window.activePuzzle = init();\n}\n\ndocument.querySelector(\"#initPuzzle1\").onclick = () => {\n  activatePuzzle(initPuzzle1);\n};\n\ndocument.querySelector(\"#initPuzzle2\").onclick = () => {\n  activatePuzzle(initPuzzle2);\n};\n\ndocument.querySelector(\"#initPuzzle3\").onclick = () => {\n  activatePuzzle(initPuzzle3);\n};\n"]}