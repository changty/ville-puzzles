{"version":3,"sources":["puzzles/BasePuzzle.js","lib/util.js","puzzles/Puzzle2.js"],"names":["BasePuzzle","data","JSON","parse","e","SyntaxError","console","log","setting","locale","state","answer","answerSent","callback","window","alert","general","completeAnswer","stringify","setState","parentEl","document","querySelector","renderHTML","el","inner","HTMLElement","Text","appendChild","Array","forEach","renderInner","i","innerText","type","id","parent","newEl","createElement","oldEl","parentNode","removeChild","innerHTML","renderElement","specific","newState","oldState","Object","assign","updateView","randomChoice","capitalize","setVendorStyle","indexToRowCol","rowColToIndex","arr","Math","floor","random","length","str","charAt","toUpperCase","substr","element","property","value","prop","style","numOfCols","idx","col","row","Puzzle2","bind","cols","onSpotClick","onAnswerChange","grid","rows","fill","map","_","rowCol","Spot","objects","s","objectType","setup","canSend","sendAnswer","event","spot","input","newAnswer","canEditAnswer","indexOf","target","name","updateAnswer","updateButtons","sendAnswerButton","disabled","rowInput","colInput","renderExamples","renderGrid","createTextNode","question","renderInputForm","onclick","onSendAnswer","ul","examples","text","gridElements","onClick","step","min","onchange","onkeyup","max","row_0","col_0","className","classList","add","gridColumn","gridRow","renderIndexingNumber","number"],"mappings":"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","file":"Puzzle2.641a94e1.map","sourceRoot":"../src","sourcesContent":["export class BasePuzzle {\n  /**\n   * @param {object} data\n   */\n\n  constructor(data) {\n    try {\n      data = JSON.parse(data);\n    } catch (e) {\n      if (e instanceof SyntaxError) {\n        // eslint-disable-next-line no-console\n        console.log(\n          \"SyntaxError while parsing settings. Using settings as is.\"\n        );\n      } else throw e;\n    }\n\n    this.setting = data.setting;\n    this.locale = data.locale;\n\n    this.state = {\n      answer: \"\",\n      answerSent: false\n    };\n  }\n\n  onSubmit() {}\n\n  sendAnswer(callback) {\n    window.alert(this.locale.general[\"str-answer-sent\"]);\n\n    // TODO: Actually send \"completeAnswer\" to server\n    const completeAnswer = JSON.stringify({\n      setting: this.setting,\n      locale: this.locale,\n      answer: this.state.answer\n    });\n\n    // eslint-disable-next-line no-console\n    console.log(\"Complete answer:\", completeAnswer);\n\n    this.setState({ answerSent: true }, callback);\n  }\n\n  setup() {\n    this.parentEl = document.querySelector(\"#puzzle\");\n    this.renderHTML();\n  }\n\n  renderInner(el, inner) {\n    if (inner instanceof HTMLElement || inner instanceof Text) {\n      el.appendChild(inner);\n    } else if (inner instanceof Array) {\n      inner.forEach(i => {\n        this.renderInner(el, i);\n      });\n    } else {\n      el.innerText = inner || \"\";\n    }\n  }\n\n  renderElement(type, id, inner, parent = this.parentEl) {\n    const newEl = document.createElement(type);\n    newEl.id = id;\n\n    this.renderInner(newEl, inner);\n\n    const oldEl = document.querySelector(`#${id}`);\n    if (oldEl) oldEl.parentNode.removeChild(oldEl);\n\n    if (parent) {\n      parent.appendChild(newEl);\n    }\n\n    return newEl;\n  }\n\n  renderHTML() {\n    this.parentEl.innerHTML = \"\";\n    this.renderElement(\"h1\", \"puzzleName\", this.locale.specific[\"str-name\"]);\n  }\n\n  setState(newState, callback) {\n    const oldState = this.state;\n    this.state = Object.assign({}, oldState, newState);\n    if (typeof callback === \"function\") callback();\n    else this.updateView();\n  }\n\n  updateView() {}\n}\n","export function randomChoice(arr) {\n  return arr[Math.floor(Math.random() * arr.length)];\n}\n\nexport function capitalize(str) {\n  return str.charAt(0).toUpperCase() + str.substr(1);\n}\n\nexport function setVendorStyle(element, property, value) {\n  const prop = capitalize(property);\n  element.style[\"webkit\" + prop] = value;\n  element.style[\"moz\" + prop] = value;\n  element.style[\"ms\" + prop] = value;\n  element.style[\"o\" + prop] = value;\n}\n\nexport function indexToRowCol(numOfCols, idx) {\n  return {\n    col: Math.floor(idx % numOfCols),\n    row: Math.floor(idx / numOfCols)\n  };\n}\n\nexport function rowColToIndex(numOfCols, row, col) {\n  return row * numOfCols + col;\n}\n","import { BasePuzzle } from \"./BasePuzzle\";\nimport { rowColToIndex, indexToRowCol } from \"../lib/util\";\n\nimport \"./Puzzle2.css\";\n\n/**\n * possible input types: text-only, mouse-only, text-or-mouse\n */\nexport class Puzzle2 extends BasePuzzle {\n  constructor(data) {\n    /**\n     * @param {object} data\n     */\n\n    super(data);\n\n    this.state = Object.assign(this.state, {\n      answer: { row: null, col: null }\n    });\n\n    this.indexToRowCol = indexToRowCol.bind(null, this.setting.cols);\n    this.rowColToIndex = rowColToIndex.bind(null, this.setting.cols);\n\n    this.onSpotClick = this.onSpotClick.bind(this);\n    this.onAnswerChange = this.onAnswerChange.bind(this);\n\n    // Init an array with empty Spot in each element\n    this.grid = Array(this.setting.rows * this.setting.cols)\n      .fill(null) // Fill with nulls so we can use map()\n      .map((_, idx) => {\n        const rowCol = this.indexToRowCol(idx);\n        return new Spot(rowCol.row, rowCol.col);\n      });\n\n    // Replace Spot objectType with received parameters\n    this.setting.objects.forEach(s => {\n      // setting indexes are 1-indexed so we need to substract 1\n      const idx = this.rowColToIndex(s[0] - 1, s[1] - 1);\n      this.grid[idx].objectType = s[2];\n    });\n\n    this.setup();\n  }\n\n  onSendAnswer() {\n    if (!this.canSend()) return;\n    this.sendAnswer();\n  }\n\n  onSpotClick(event, spot) {\n    if (this.setting.input === \"text-only\") return;\n    const { row, col } = spot;\n    this.onAnswerChange(null, { row, col });\n  }\n\n  onAnswerChange(event, newAnswer) {\n    if (!this.canEditAnswer()) return;\n    const { answer } = this.state;\n    if (event && [\"row\", \"col\"].indexOf(event.target.name) > -1) {\n      answer[event.target.name] = event.target.value;\n    }\n    this.setState({ answer: event ? answer : newAnswer });\n  }\n\n  canSend() {\n    const { answer, answerSent } = this.state;\n    return !answerSent && answer.row !== null && answer.col !== null;\n  }\n\n  canEditAnswer() {\n    const { answerSent } = this.state;\n    return !answerSent;\n  }\n\n  updateView() {\n    super.updateView();\n\n    this.updateAnswer();\n    this.updateButtons();\n  }\n\n  updateButtons() {\n    this.sendAnswerButton.disabled = !this.canSend();\n  }\n\n  updateAnswer() {\n    const { answer } = this.state;\n\n    this.rowInput.value = answer.row;\n    this.rowInput.disabled =\n      !this.canEditAnswer() || this.setting.input === \"mouse-only\";\n\n    this.colInput.value = answer.col;\n    this.colInput.disabled =\n      !this.canEditAnswer() || this.setting.input === \"mouse-only\";\n  }\n\n  renderHTML() {\n    super.renderHTML();\n\n    this.renderElement(\n      \"p\",\n      \"puzzleDescription\",\n      this.locale.specific[\"str-description\"]\n    );\n    this.renderElement(\"div\", \"puzzleExample\", this.renderExamples());\n    this.renderElement(\"div\", \"puzzleGrid\", this.renderGrid());\n    this.renderElement(\"p\", \"puzzleQuestion\", [\n      document.createTextNode(this.setting.question),\n      document.createElement(\"br\"),\n      document.createTextNode(\n        this.locale.specific[\"str-input-type-description\"]\n      )\n    ]);\n    this.renderElement(\n      \"p\",\n      \"puzzleAnswerLabel\",\n      this.locale.general[\"str-answer-label\"]\n    );\n    this.renderElement(\"div\", \"puzzleInput\", this.renderInputForm());\n\n    // Render \"Lähetä\"-button\n    this.sendAnswerButton = this.renderElement(\n      \"button\",\n      \"puzzleSend\",\n      this.locale.general[\"str-send-answer\"]\n    );\n    this.sendAnswerButton.onclick = this.onSendAnswer.bind(this);\n    this.sendAnswerButton.disabled = true;\n\n    this.updateView();\n  }\n\n  renderExamples() {\n    const ul = document.createElement(\"ul\");\n    this.setting.examples.forEach(text => {\n      const el = document.createElement(\"li\");\n      el.innerText = text;\n      ul.appendChild(el);\n    });\n    return ul;\n  }\n\n  renderGrid() {\n    const gridElements = this.grid.map(spot =>\n      spot.renderHTML({\n        onClick: this.onSpotClick\n      })\n    );\n\n    return this.renderElement(\"div\", \"gridWrapper\", gridElements, null);\n  }\n\n  renderInputForm() {\n    this.rowInput = document.createElement(\"input\");\n    this.colInput = document.createElement(\"input\");\n\n    [this.rowInput, this.colInput].forEach(i => {\n      i.type = \"number\";\n      i.step = 1;\n      i.min = 1;\n      i.disabled = this.setting.input === \"mouse-only\";\n      i.onchange = this.onAnswerChange;\n      i.onkeyup = this.onAnswerChange;\n    });\n\n    this.rowInput.max = this.setting.rows;\n    this.rowInput.name = \"row\";\n    this.colInput.max = this.setting.cols;\n    this.colInput.name = \"col\";\n\n    return this.renderElement(\n      \"form\",\n      \"inputForm\",\n      [this.rowInput, this.colInput],\n      null\n    );\n  }\n}\n\nclass Spot {\n  constructor(row_0, col_0, objectType = null) {\n    /**\n     * @param {number} row_0 - 0-indexed row\n     * @param {number} col_0 - 0-indexed col\n     * @param {number} objectType\n     */\n    this.col = col_0 + 1; // Coordinate in 1-indexed system\n    this.row = row_0 + 1; // Coordinate in 1-indexed system\n    this.objectType = objectType;\n  }\n\n  renderHTML({ onClick }) {\n    const el = document.createElement(\"div\");\n    el.className = \"spot\";\n\n    if (this.objectType) el.classList.add(this.objectType);\n    else {\n      el.classList.add(\"empty\");\n      el.innerText = \"•\";\n    }\n\n    el.style.gridColumn = this.col;\n    el.style.gridRow = this.row;\n\n    if (this.row === 1)\n      el.appendChild(this.renderIndexingNumber(\"col\", this.col));\n\n    if (this.col === 1)\n      el.appendChild(this.renderIndexingNumber(\"row\", this.row));\n\n    el.onclick = e => onClick(e, this);\n    return el;\n  }\n\n  renderIndexingNumber(type, number) {\n    const el = document.createElement(\"span\");\n    el.className = \"indexingNumber\";\n    el.classList.add(type);\n    el.innerText = number;\n    return el;\n  }\n}\n\nwindow.Puzzle2 = Puzzle2;\n"]}